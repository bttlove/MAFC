2025-07-10 08:57:48.876 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 08:57:48.914 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 08:57:48.929 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 08:57:48.971 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 08:57:48.979 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 08:57:48.981 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 08:57:48.985 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 08:57:48.991 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 08:57:48.995 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 08:57:49.267 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 08:57:49.395 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 08:57:49.890 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 08:57:49.891 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 08:57:50.054 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 08:57:50.055 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 08:57:50.056 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 08:57:50.065 +07:00 [DBG] Execution loop BackgroundServerProcess:655d457e has started in 5.0224 ms
2025-07-10 08:57:50.072 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 08:57:50.072 +07:00 [INF] Hosting environment: Development
2025-07-10 08:57:50.073 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 08:57:50.079 +07:00 [INF] Server digi-tbhh2:2812:90d58b79 successfully announced in 7.8916 ms
2025-07-10 08:57:50.084 +07:00 [DBG] Execution loop ServerHeartbeatProcess:521f08ec has started in 3.3936 ms
2025-07-10 08:57:50.084 +07:00 [INF] Server digi-tbhh2:2812:90d58b79 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 08:57:50.087 +07:00 [DBG] Execution loop ServerWatchdog:b515068b has started in 2.8824 ms
2025-07-10 08:57:50.090 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:2dfc8a62 has started in 5.3741 ms
2025-07-10 08:57:50.093 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:38db2e61 has started in 5.0463 ms
2025-07-10 08:57:50.095 +07:00 [DBG] Execution loop ExpirationManager:d6ad93c3 has started in 4.8223 ms
2025-07-10 08:57:50.097 +07:00 [DBG] Execution loop CountersAggregator:86d5fabd has started in 4.6502 ms
2025-07-10 08:57:50.106 +07:00 [DBG] Execution loop Worker:cb833370 has started in 10.5175 ms
2025-07-10 08:57:50.103 +07:00 [INF] 1 servers were removed due to timeout
2025-07-10 08:57:50.112 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 08:57:50.119 +07:00 [DBG] Execution loop Worker:9bb40594 has started in 23.5608 ms
2025-07-10 08:57:50.109 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 08:57:50.101 +07:00 [DBG] Execution loop Worker:162bbd01 has started in 5.3666 ms
2025-07-10 08:57:50.103 +07:00 [DBG] Execution loop Worker:c144a4b6 has started in 8.0984 ms
2025-07-10 08:57:50.108 +07:00 [DBG] Execution loop Worker:5ea47a51 has started in 13.1006 ms
2025-07-10 08:57:50.111 +07:00 [DBG] Execution loop Worker:1afd3040 has started in 15.6582 ms
2025-07-10 08:57:50.113 +07:00 [DBG] Execution loop Worker:13b623a9 has started in 18.1707 ms
2025-07-10 08:57:50.116 +07:00 [DBG] Execution loop Worker:18faac4d has started in 20.8841 ms
2025-07-10 08:57:50.177 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 08:57:50.185 +07:00 [INF] Server digi-tbhh2:2812:90d58b79 all the dispatchers started
2025-07-10 08:57:50.121 +07:00 [DBG] Execution loop Worker:57012f8e has started in 26.0269 ms
2025-07-10 08:57:50.124 +07:00 [DBG] Execution loop Worker:f469ad6e has started in 29.0594 ms
2025-07-10 08:57:50.127 +07:00 [DBG] Execution loop Worker:d0dd628f has started in 31.7413 ms
2025-07-10 08:57:50.130 +07:00 [DBG] Execution loop Worker:d980bc68 has started in 34.8804 ms
2025-07-10 08:57:50.133 +07:00 [DBG] Execution loop Worker:464ae24a has started in 37.8197 ms
2025-07-10 08:57:50.162 +07:00 [DBG] Execution loop Worker:659ccbf2 has started in 66.6676 ms
2025-07-10 08:57:50.195 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 08:57:50.162 +07:00 [DBG] Execution loop Worker:6d11e424 has started in 66.7096 ms
2025-07-10 08:57:50.166 +07:00 [DBG] Execution loop Worker:ad3b1b21 has started in 71.2325 ms
2025-07-10 08:57:50.170 +07:00 [DBG] Execution loop Worker:e2b38f5a has started in 75.1966 ms
2025-07-10 08:57:50.176 +07:00 [DBG] Execution loop Worker:f6a7b264 has started in 81.2929 ms
2025-07-10 08:57:50.201 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 08:57:50.179 +07:00 [DBG] Execution loop Worker:a2a9f64d has started in 84.1871 ms
2025-07-10 08:57:50.183 +07:00 [DBG] Execution loop Worker:fd152930 has started in 87.4003 ms
2025-07-10 08:57:50.186 +07:00 [DBG] Execution loop DelayedJobScheduler:1780dc36 has started in 6.1743 ms
2025-07-10 08:57:50.189 +07:00 [DBG] Execution loop RecurringJobScheduler:9773d81a has started in 6.0719 ms
2025-07-10 08:57:50.204 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 08:57:50.302 +07:00 [DBG] 1 recurring job(s) processed by scheduler.
2025-07-10 08:57:50.381 +07:00 [INF] Performing daily data cleanup at 7/10/2025 8:57:50 AM
2025-07-10 08:57:50.707 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger - null null
2025-07-10 08:57:50.834 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger - 301 0 null 132.4142ms
2025-07-10 08:57:50.844 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/index.html - null null
2025-07-10 08:57:50.886 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/index.html - 200 null text/html;charset=utf-8 41.6199ms
2025-07-10 08:57:50.906 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/swagger-ui.css - null null
2025-07-10 08:57:50.907 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/index.css - null null
2025-07-10 08:57:50.907 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/swagger-ui-bundle.js - null null
2025-07-10 08:57:50.912 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/swagger-ui-standalone-preset.js - null null
2025-07-10 08:57:50.912 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 08:57:50.912 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/index.js - null null
2025-07-10 08:57:50.918 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 08:57:50.931 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/index.js - 200 null application/javascript;charset=utf-8 18.7889ms
2025-07-10 08:57:50.952 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 39.4434ms
2025-07-10 08:57:50.954 +07:00 [INF] Sending file. Request path: '/index.css'. Physical path: 'N/A'
2025-07-10 08:57:50.962 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/index.css - 200 202 text/css 55.405ms
2025-07-10 08:57:50.976 +07:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-07-10 08:57:50.976 +07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-07-10 08:57:50.984 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/swagger-ui.css - 200 154949 text/css 77.5369ms
2025-07-10 08:57:50.984 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/swagger-ui-standalone-preset.js - 200 229223 text/javascript 72.083ms
2025-07-10 08:57:50.993 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-07-10 08:57:50.995 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/swagger-ui-bundle.js - 200 1485241 text/javascript 88.7627ms
2025-07-10 08:57:51.010 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 91.6248ms
2025-07-10 08:57:51.283 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 08:57:51.298 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/favicon-32x32.png - null null
2025-07-10 08:57:51.299 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 16.9544ms
2025-07-10 08:57:51.301 +07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-07-10 08:57:51.305 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/favicon-32x32.png - 200 628 image/png 7.6687ms
2025-07-10 08:57:51.402 +07:00 [INF] Daily data cleanup completed.
2025-07-10 08:58:20.114 +07:00 [DBG] Server digi-tbhh2:2812:90d58b79 heartbeat successfully sent
2025-07-10 08:58:50.131 +07:00 [DBG] Server digi-tbhh2:2812:90d58b79 heartbeat successfully sent
2025-07-10 08:58:58.087 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - application/json-patch+json 568
2025-07-10 08:58:58.113 +07:00 [INF] CORS policy execution failed.
2025-07-10 08:58:58.114 +07:00 [INF] Request origin https://localhost:7024 does not have permission to access the resource.
2025-07-10 08:58:58.117 +07:00 [INF] Request from IP: ::1
2025-07-10 08:58:58.120 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 08:58:58.138 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractRequestDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 08:58:58.313 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 170.7532ms
2025-07-10 08:58:58.316 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 08:58:58.378 +07:00 [ERR] An unhandled exception has occurred.
FluentValidation.AsyncValidatorInvokedSynchronouslyException: Validator "CreateContractRequestDtoValidator" can't be used with ASP.NET automatic validation as it contains asynchronous rules. ASP.NET's validation pipeline is not asynchronous and can't invoke asynchronous rules. Remove the asynchronous rules in order for this validator to run.
   at FluentValidation.AbstractValidator`1.Validate(ValidationContext`1 context) in /_/src/FluentValidation/AbstractValidator.cs:line 207
   at FluentValidation.AbstractValidator`1.FluentValidation.IValidator.Validate(IValidationContext context) in /_/src/FluentValidation/AbstractValidator.cs:line 153
   at FluentValidation.AspNetCore.FluentValidationModelValidator.Validate(ModelValidationContext mvContext) in /_/src/FluentValidation.AspNetCore/FluentValidationModelValidatorProvider.cs:line 150
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.ValidateNode()
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitComplexType(IValidationStrategy defaultStrategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at FluentValidation.AspNetCore.FluentValidationVisitor.<>n__1(ModelMetadata metadata, String key, Object model, Boolean alwaysValidateAtTopLevel, Object container)
   at FluentValidation.AspNetCore.FluentValidationVisitor.<>c__DisplayClass2_0.<Validate>g__BaseValidate|0() in /_/src/FluentValidation.AspNetCore/FluentValidationVisitor.cs:line 45
   at FluentValidation.AspNetCore.FluentValidationVisitor.ValidateInternal(ModelMetadata metadata, String key, Object model, Func`1 continuation) in /_/src/FluentValidation.AspNetCore/FluentValidationVisitor.cs:line 63
   at FluentValidation.AspNetCore.FluentValidationVisitor.Validate(ModelMetadata metadata, String key, Object model, Boolean alwaysValidateAtTopLevel, Object container) in /_/src/FluentValidation.AspNetCore/FluentValidationVisitor.cs:line 47
   at Microsoft.AspNetCore.Mvc.ModelBinding.ObjectModelValidator.Validate(ActionContext actionContext, ValidationStateDictionary validationState, String prefix, Object model, ModelMetadata metadata, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.EnforceBindRequiredAndValidate(ObjectModelValidator baseObjectValidator, ActionContext actionContext, ParameterDescriptor parameter, ModelMetadata metadata, ModelBindingContext modelBindingContext, ModelBindingResult modelBindingResult, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at pviBase.Middlewares.ResponseWrappingMiddleware.InvokeAsync(HttpContext context) in C:\Users\ADMIN\source\repos\pviBase\Middlewares\ResponseWrappingMiddleware.cs:line 29
   at pviBase.Middlewares.IpWhitelistMiddleware.InvokeAsync(HttpContext context) in C:\Users\ADMIN\source\repos\pviBase\Middlewares\IpWhitelistMiddleware.cs:line 38
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at pviBase.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\ADMIN\source\repos\pviBase\Middlewares\ExceptionHandlingMiddleware.cs:line 28
2025-07-10 08:58:58.460 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, ReadOnlyMemory`1 data, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.GetTaskForValueTaskSource(IValueTaskSource`1 t)
--- End of stack trace from previous location ---
   at pviBase.Middlewares.ExceptionHandlingMiddleware.HandleExceptionAsync(HttpContext context, Exception exception) in C:\Users\ADMIN\source\repos\pviBase\Middlewares\ExceptionHandlingMiddleware.cs:line 60
   at pviBase.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\ADMIN\source\repos\pviBase\Middlewares\ExceptionHandlingMiddleware.cs:line 33
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-10 08:58:58.466 +07:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, ReadOnlyMemory`1 data, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.GetTaskForValueTaskSource(IValueTaskSource`1 t)
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.DisplayExceptionContent(ErrorContext errorContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-10 08:58:58.469 +07:00 [ERR] Connection id "0HNDVAKMDIDQ1", Request id "0HNDVAKMDIDQ1:00000017": An unhandled exception was thrown by the application.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, ReadOnlyMemory`1 data, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.GetTaskForValueTaskSource(IValueTaskSource`1 t)
--- End of stack trace from previous location ---
   at pviBase.Middlewares.ExceptionHandlingMiddleware.HandleExceptionAsync(HttpContext context, Exception exception) in C:\Users\ADMIN\source\repos\pviBase\Middlewares\ExceptionHandlingMiddleware.cs:line 60
   at pviBase.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\ADMIN\source\repos\pviBase\Middlewares\ExceptionHandlingMiddleware.cs:line 33
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-07-10 08:58:58.487 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 500 0 null 399.686ms
2025-07-10 08:59:20.150 +07:00 [DBG] Server digi-tbhh2:2812:90d58b79 heartbeat successfully sent
2025-07-10 08:59:50.169 +07:00 [DBG] Server digi-tbhh2:2812:90d58b79 heartbeat successfully sent
2025-07-10 09:20:02.648 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 09:20:02.680 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 09:20:02.695 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 09:20:02.739 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 09:20:02.747 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 09:20:02.749 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 09:20:02.752 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 09:20:02.758 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 09:20:02.761 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 09:20:02.987 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 09:20:03.090 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 09:20:03.356 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 09:20:03.357 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 09:20:03.426 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 09:20:03.427 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 09:20:03.428 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 09:20:03.437 +07:00 [DBG] Execution loop BackgroundServerProcess:dcf356b6 has started in 4.5889 ms
2025-07-10 09:20:03.443 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 09:20:03.445 +07:00 [INF] Hosting environment: Development
2025-07-10 09:20:03.446 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 09:20:03.453 +07:00 [INF] Server digi-tbhh2:27152:34e868b5 successfully announced in 9.7942 ms
2025-07-10 09:20:03.457 +07:00 [INF] Server digi-tbhh2:27152:34e868b5 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 09:20:03.459 +07:00 [DBG] Execution loop ServerHeartbeatProcess:a4a23830 has started in 4.0211 ms
2025-07-10 09:20:03.462 +07:00 [DBG] Execution loop ServerWatchdog:b1441851 has started in 3.1622 ms
2025-07-10 09:20:03.465 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:f22309ab has started in 5.1065 ms
2025-07-10 09:20:03.468 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:47f998ba has started in 4.8511 ms
2025-07-10 09:20:03.470 +07:00 [DBG] Execution loop ExpirationManager:23bd7bf2 has started in 5.1255 ms
2025-07-10 09:20:03.474 +07:00 [DBG] Execution loop CountersAggregator:61c8ca89 has started in 6.7721 ms
2025-07-10 09:20:03.476 +07:00 [DBG] Execution loop Worker:4d20b70b has started in 6.1652 ms
2025-07-10 09:20:03.493 +07:00 [INF] 1 servers were removed due to timeout
2025-07-10 09:20:03.497 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 09:20:03.494 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 09:20:03.479 +07:00 [DBG] Execution loop Worker:f430e72f has started in 9.6284 ms
2025-07-10 09:20:03.485 +07:00 [DBG] Execution loop Worker:6135cf57 has started in 14.6439 ms
2025-07-10 09:20:03.488 +07:00 [DBG] Execution loop Worker:690a54ad has started in 18.0699 ms
2025-07-10 09:20:03.491 +07:00 [DBG] Execution loop Worker:39bd4116 has started in 21.4018 ms
2025-07-10 09:20:03.526 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 09:20:03.493 +07:00 [DBG] Execution loop Worker:7ec35b30 has started in 23.5018 ms
2025-07-10 09:20:03.496 +07:00 [DBG] Execution loop Worker:23c55e2f has started in 26.6339 ms
2025-07-10 09:20:03.500 +07:00 [DBG] Execution loop Worker:51fa58c8 has started in 30.1442 ms
2025-07-10 09:20:03.503 +07:00 [DBG] Execution loop Worker:4dabc1a6 has started in 32.8379 ms
2025-07-10 09:20:03.554 +07:00 [INF] Server digi-tbhh2:27152:34e868b5 all the dispatchers started
2025-07-10 09:20:03.554 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 09:20:03.506 +07:00 [DBG] Execution loop Worker:5efec3f2 has started in 36.158 ms
2025-07-10 09:20:03.510 +07:00 [DBG] Execution loop Worker:837c4c9b has started in 39.8334 ms
2025-07-10 09:20:03.564 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 09:20:03.514 +07:00 [DBG] Execution loop Worker:e35532aa has started in 43.8969 ms
2025-07-10 09:20:03.518 +07:00 [DBG] Execution loop Worker:16713478 has started in 47.7509 ms
2025-07-10 09:20:03.521 +07:00 [DBG] Execution loop Worker:5d2ccdcf has started in 51.3045 ms
2025-07-10 09:20:03.525 +07:00 [DBG] Execution loop Worker:5f37b114 has started in 55.2692 ms
2025-07-10 09:20:03.529 +07:00 [DBG] Execution loop Worker:391edc22 has started in 59.0145 ms
2025-07-10 09:20:03.534 +07:00 [DBG] Execution loop Worker:fb869bef has started in 64.6856 ms
2025-07-10 09:20:03.541 +07:00 [DBG] Execution loop Worker:c4e7f83c has started in 70.1769 ms
2025-07-10 09:20:03.546 +07:00 [DBG] Execution loop Worker:a0b1908a has started in 76.6946 ms
2025-07-10 09:20:03.550 +07:00 [DBG] Execution loop Worker:5bfdebfc has started in 80.751 ms
2025-07-10 09:20:03.554 +07:00 [DBG] Execution loop DelayedJobScheduler:2b351b64 has started in 7.3 ms
2025-07-10 09:20:03.557 +07:00 [DBG] Execution loop RecurringJobScheduler:c8cbdb46 has started in 6.6273 ms
2025-07-10 09:20:03.571 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 09:20:03.858 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 09:20:03.858 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 09:20:03.884 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 33.0853ms
2025-07-10 09:20:03.920 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 69.963ms
2025-07-10 09:20:03.947 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 09:20:03.979 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.9851ms
2025-07-10 09:20:18.032 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - application/json-patch+json 568
2025-07-10 09:20:18.052 +07:00 [INF] CORS policy execution failed.
2025-07-10 09:20:18.053 +07:00 [INF] Request origin https://localhost:7024 does not have permission to access the resource.
2025-07-10 09:20:18.055 +07:00 [INF] Request from IP: ::1
2025-07-10 09:20:18.058 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 09:20:18.077 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractRequestDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 09:20:18.430 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 09:20:18.451 +07:00 [INF] Received request to create contracts. Product Code: MAFC_SKNVV, Data Count: 1
2025-07-10 09:20:18.456 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 09:20:18.563 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 09:20:18.639 +07:00 [INF] Enqueued job for RequestId: 134c1135-5fd1-47a8-a472-dfebb55f2025
2025-07-10 09:20:18.652 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 09:20:18.665 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 583.7142ms
2025-07-10 09:20:18.666 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 09:20:18.677 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 644.1931ms
2025-07-10 09:20:18.797 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 09:20:18.810 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 09:20:18.814 +07:00 [INF] Processing job for RequestId: 134c1135-5fd1-47a8-a472-dfebb55f2025
2025-07-10 09:20:18.816 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 09:20:19.062 +07:00 [INF] Removed cache key: InsuranceContract:05052003
2025-07-10 09:20:19.074 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 200), @p2='?' (DbType = DateTime2), @p3='?' (Size = 200), @p4='?' (Size = 1), @p5='?' (Size = 12), @p6='?' (Size = 200), @p7='?' (Size = 10), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Double), @p10='?' (DbType = Int64), @p11='?' (DbType = DateTime2), @p12='?' (Size = 50), @p13='?' (DbType = Int32), @p14='?' (Size = 50), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-07-10 09:20:19.078 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 09:20:19.080 +07:00 [INF] Job for RequestId: 134c1135-5fd1-47a8-a472-dfebb55f2025 completed successfully.
2025-07-10 09:20:26.881 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - application/json-patch+json 568
2025-07-10 09:20:26.886 +07:00 [INF] CORS policy execution failed.
2025-07-10 09:20:26.887 +07:00 [INF] Request origin https://localhost:7024 does not have permission to access the resource.
2025-07-10 09:20:26.888 +07:00 [INF] Request from IP: ::1
2025-07-10 09:20:26.889 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 09:20:26.890 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractRequestDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 09:20:26.897 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 09:20:26.905 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'pviBase.Dtos.ApiResponse'.
2025-07-10 09:20:26.910 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 18.7486ms
2025-07-10 09:20:26.911 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 09:20:26.912 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 400 195 application/json; charset=utf-8 31.4767ms
2025-07-10 09:20:33.493 +07:00 [DBG] Server digi-tbhh2:27152:34e868b5 heartbeat successfully sent
2025-07-10 09:59:52.325 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 09:59:52.362 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 09:59:52.378 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 09:59:52.423 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 09:59:52.430 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 09:59:52.432 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 09:59:52.435 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 09:59:52.441 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 09:59:52.443 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 09:59:52.727 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 09:59:52.837 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 09:59:53.233 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 09:59:53.234 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 09:59:53.304 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 09:59:53.306 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 09:59:53.306 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 09:59:53.316 +07:00 [DBG] Execution loop BackgroundServerProcess:8864f8ea has started in 5.5779 ms
2025-07-10 09:59:53.322 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 09:59:53.323 +07:00 [INF] Hosting environment: Development
2025-07-10 09:59:53.324 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 09:59:53.330 +07:00 [INF] Server digi-tbhh2:24132:259ba328 successfully announced in 8.1297 ms
2025-07-10 09:59:53.336 +07:00 [DBG] Execution loop ServerHeartbeatProcess:31604bca has started in 3.7412 ms
2025-07-10 09:59:53.336 +07:00 [INF] Server digi-tbhh2:24132:259ba328 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 09:59:53.340 +07:00 [DBG] Execution loop ServerWatchdog:776e926b has started in 2.9879 ms
2025-07-10 09:59:53.343 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:0cc8f09c has started in 5.4942 ms
2025-07-10 09:59:53.346 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:a72e0535 has started in 5.7157 ms
2025-07-10 09:59:53.349 +07:00 [DBG] Execution loop ExpirationManager:e048b501 has started in 5.8473 ms
2025-07-10 09:59:53.351 +07:00 [DBG] Execution loop CountersAggregator:c6eba089 has started in 5.7709 ms
2025-07-10 09:59:53.359 +07:00 [INF] 1 servers were removed due to timeout
2025-07-10 09:59:53.366 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 09:59:53.369 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 09:59:53.355 +07:00 [DBG] Execution loop Worker:8a25af2c has started in 6.0451 ms
2025-07-10 09:59:53.361 +07:00 [DBG] Execution loop Worker:a07b5dc9 has started in 12.192 ms
2025-07-10 09:59:53.358 +07:00 [DBG] Execution loop Worker:18343a53 has started in 9.2545 ms
2025-07-10 09:59:53.364 +07:00 [DBG] Execution loop Worker:95a55ce7 has started in 15.5649 ms
2025-07-10 09:59:53.370 +07:00 [DBG] Execution loop Worker:1bf3cc72 has started in 21.2987 ms
2025-07-10 09:59:53.374 +07:00 [DBG] Execution loop Worker:18e70cda has started in 24.7632 ms
2025-07-10 09:59:53.377 +07:00 [DBG] Execution loop Worker:a6deee11 has started in 27.8832 ms
2025-07-10 09:59:53.382 +07:00 [DBG] Execution loop Worker:6bd4e51d has started in 31.6586 ms
2025-07-10 09:59:53.384 +07:00 [DBG] Execution loop Worker:1e45dfb7 has started in 35.032 ms
2025-07-10 09:59:53.387 +07:00 [DBG] Execution loop Worker:47cbe8c5 has started in 38.5466 ms
2025-07-10 09:59:53.391 +07:00 [DBG] Execution loop Worker:65ff0ef3 has started in 42.0857 ms
2025-07-10 09:59:53.424 +07:00 [INF] Server digi-tbhh2:24132:259ba328 all the dispatchers started
2025-07-10 09:59:53.425 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 09:59:53.394 +07:00 [DBG] Execution loop Worker:0c987e24 has started in 45.6636 ms
2025-07-10 09:59:53.398 +07:00 [DBG] Execution loop Worker:2753c65d has started in 49.1783 ms
2025-07-10 09:59:53.401 +07:00 [DBG] Execution loop Worker:00304a38 has started in 52.7066 ms
2025-07-10 09:59:53.405 +07:00 [DBG] Execution loop Worker:bda077c2 has started in 55.7986 ms
2025-07-10 09:59:53.407 +07:00 [DBG] Execution loop Worker:2de6fe10 has started in 58.7349 ms
2025-07-10 09:59:53.413 +07:00 [DBG] Execution loop Worker:9b077470 has started in 63.5602 ms
2025-07-10 09:59:53.414 +07:00 [DBG] Execution loop Worker:2925501c has started in 65.7402 ms
2025-07-10 09:59:53.436 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 09:59:53.418 +07:00 [DBG] Execution loop Worker:7e664948 has started in 68.8751 ms
2025-07-10 09:59:53.421 +07:00 [DBG] Execution loop Worker:838b88f5 has started in 72.2841 ms
2025-07-10 09:59:53.424 +07:00 [DBG] Execution loop DelayedJobScheduler:b72a842f has started in 6.8196 ms
2025-07-10 09:59:53.427 +07:00 [DBG] Execution loop RecurringJobScheduler:0e5a9633 has started in 6.5686 ms
2025-07-10 09:59:53.440 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 09:59:53.443 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 09:59:54.017 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 09:59:54.017 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 09:59:54.047 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 35.2361ms
2025-07-10 09:59:54.130 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 119.8303ms
2025-07-10 09:59:54.158 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 09:59:54.184 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 26.2946ms
2025-07-10 10:00:23.357 +07:00 [DBG] Server digi-tbhh2:24132:259ba328 heartbeat successfully sent
2025-07-10 10:12:59.047 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 10:12:59.087 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 10:12:59.105 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 10:12:59.144 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 10:12:59.149 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 10:12:59.149 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 10:12:59.152 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 10:12:59.157 +07:00 [INF] Applying migration '20250710031250_AddAttachmentToInsuranceContract'.
2025-07-10 10:12:59.165 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [InsuranceContracts] ADD [AttachmentContentType] nvarchar(max) NULL;
2025-07-10 10:12:59.165 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [InsuranceContracts] ADD [AttachmentData] varbinary(max) NULL;
2025-07-10 10:12:59.166 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [InsuranceContracts] ADD [AttachmentFileName] nvarchar(max) NULL;
2025-07-10 10:12:59.167 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250710031250_AddAttachmentToInsuranceContract', N'9.0.6');
2025-07-10 10:12:59.170 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 10:13:05.609 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 10:13:05.642 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 10:13:05.654 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 10:13:05.697 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 10:13:05.704 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 10:13:05.706 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 10:13:05.709 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 10:13:05.714 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 10:13:05.716 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 10:13:05.914 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 10:13:06.015 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 10:13:06.305 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 10:13:06.306 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 10:13:06.462 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 10:13:06.463 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 10:13:06.464 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 10:13:06.475 +07:00 [DBG] Execution loop BackgroundServerProcess:277ca61a has started in 5.4718 ms
2025-07-10 10:13:06.481 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 10:13:06.481 +07:00 [INF] Hosting environment: Development
2025-07-10 10:13:06.482 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 10:13:06.490 +07:00 [INF] Server digi-tbhh2:26188:2409130d successfully announced in 9.1454 ms
2025-07-10 10:13:06.494 +07:00 [DBG] Execution loop ServerHeartbeatProcess:42d7cc89 has started in 3.3005 ms
2025-07-10 10:13:06.494 +07:00 [INF] Server digi-tbhh2:26188:2409130d is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 10:13:06.498 +07:00 [DBG] Execution loop ServerWatchdog:fff669d4 has started in 2.8009 ms
2025-07-10 10:13:06.502 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:0e5f72bb has started in 6.611 ms
2025-07-10 10:13:06.506 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:c4c334da has started in 7.896 ms
2025-07-10 10:13:06.508 +07:00 [DBG] Execution loop ExpirationManager:07de69c1 has started in 6.606 ms
2025-07-10 10:13:06.511 +07:00 [DBG] Execution loop CountersAggregator:0c63e825 has started in 5.7137 ms
2025-07-10 10:13:06.520 +07:00 [INF] 1 servers were removed due to timeout
2025-07-10 10:13:06.524 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 10:13:06.527 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 10:13:06.514 +07:00 [DBG] Execution loop Worker:365ad8cd has started in 5.934 ms
2025-07-10 10:13:06.517 +07:00 [DBG] Execution loop Worker:9b928b40 has started in 8.8707 ms
2025-07-10 10:13:06.520 +07:00 [DBG] Execution loop Worker:16b31cd6 has started in 12.0325 ms
2025-07-10 10:13:06.523 +07:00 [DBG] Execution loop Worker:5dcd2a7e has started in 14.9095 ms
2025-07-10 10:13:06.525 +07:00 [DBG] Execution loop Worker:4f14cb8b has started in 17.6487 ms
2025-07-10 10:13:06.530 +07:00 [DBG] Execution loop Worker:2bda5fd2 has started in 22.2725 ms
2025-07-10 10:13:06.532 +07:00 [DBG] Execution loop Worker:c9869e8d has started in 23.8491 ms
2025-07-10 10:13:06.534 +07:00 [DBG] Execution loop Worker:f31cfe69 has started in 26.6387 ms
2025-07-10 10:13:06.537 +07:00 [DBG] Execution loop Worker:78d6ca42 has started in 29.5625 ms
2025-07-10 10:13:06.562 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 10:13:06.541 +07:00 [DBG] Execution loop Worker:da272d94 has started in 33.3721 ms
2025-07-10 10:13:06.575 +07:00 [INF] Server digi-tbhh2:26188:2409130d all the dispatchers started
2025-07-10 10:13:06.543 +07:00 [DBG] Execution loop Worker:e396a708 has started in 35.1879 ms
2025-07-10 10:13:06.546 +07:00 [DBG] Execution loop Worker:6a21f8b4 has started in 38.2495 ms
2025-07-10 10:13:06.549 +07:00 [DBG] Execution loop Worker:533fa128 has started in 41.1329 ms
2025-07-10 10:13:06.553 +07:00 [DBG] Execution loop Worker:03ea9a03 has started in 45.3869 ms
2025-07-10 10:13:06.555 +07:00 [DBG] Execution loop Worker:4073dba1 has started in 47.0922 ms
2025-07-10 10:13:06.558 +07:00 [DBG] Execution loop Worker:627f9970 has started in 50.026 ms
2025-07-10 10:13:06.597 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 10:13:06.561 +07:00 [DBG] Execution loop Worker:8d7bd741 has started in 52.983 ms
2025-07-10 10:13:06.564 +07:00 [DBG] Execution loop Worker:db38a783 has started in 55.9683 ms
2025-07-10 10:13:06.567 +07:00 [DBG] Execution loop Worker:bb5942e8 has started in 58.9403 ms
2025-07-10 10:13:06.570 +07:00 [DBG] Execution loop Worker:67254184 has started in 62.1236 ms
2025-07-10 10:13:06.575 +07:00 [DBG] Execution loop DelayedJobScheduler:c7de940d has started in 8.6436 ms
2025-07-10 10:13:06.580 +07:00 [DBG] Execution loop RecurringJobScheduler:6e95d1df has started in 9.6255 ms
2025-07-10 10:13:06.601 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 10:13:06.608 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 10:13:07.063 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 10:13:07.063 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 10:13:07.094 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 36.5363ms
2025-07-10 10:13:07.126 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 70.3334ms
2025-07-10 10:13:07.152 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 10:13:07.180 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 28.1402ms
2025-07-10 10:13:36.523 +07:00 [DBG] Server digi-tbhh2:26188:2409130d heartbeat successfully sent
2025-07-10 10:14:06.540 +07:00 [DBG] Server digi-tbhh2:26188:2409130d heartbeat successfully sent
2025-07-10 10:14:36.548 +07:00 [DBG] Server digi-tbhh2:26188:2409130d heartbeat successfully sent
2025-07-10 10:15:06.565 +07:00 [DBG] Server digi-tbhh2:26188:2409130d heartbeat successfully sent
2025-07-10 10:15:36.571 +07:00 [DBG] Server digi-tbhh2:26188:2409130d heartbeat successfully sent
2025-07-10 10:16:06.586 +07:00 [DBG] Server digi-tbhh2:26188:2409130d heartbeat successfully sent
2025-07-10 10:16:36.599 +07:00 [DBG] Server digi-tbhh2:26188:2409130d heartbeat successfully sent
2025-07-10 10:17:06.605 +07:00 [DBG] Server digi-tbhh2:26188:2409130d heartbeat successfully sent
2025-07-10 10:17:36.615 +07:00 [DBG] Server digi-tbhh2:26188:2409130d heartbeat successfully sent
2025-07-10 10:18:06.562 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 10:18:06.625 +07:00 [DBG] Server digi-tbhh2:26188:2409130d heartbeat successfully sent
2025-07-10 10:18:36.638 +07:00 [DBG] Server digi-tbhh2:26188:2409130d heartbeat successfully sent
2025-07-10 10:18:40.695 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------435157222960731481413139 3053
2025-07-10 10:18:40.722 +07:00 [INF] Request from IP: ::1
2025-07-10 10:18:40.727 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 10:18:40.747 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractRequestDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 10:18:40.873 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-07-10 10:18:40.892 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 141.2383ms
2025-07-10 10:18:40.893 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 10:18:40.896 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 415 176 application/problem+json; charset=utf-8 200.5833ms
2025-07-10 10:19:06.647 +07:00 [DBG] Server digi-tbhh2:26188:2409130d heartbeat successfully sent
2025-07-10 10:19:36.664 +07:00 [DBG] Server digi-tbhh2:26188:2409130d heartbeat successfully sent
2025-07-10 10:20:06.681 +07:00 [DBG] Server digi-tbhh2:26188:2409130d heartbeat successfully sent
2025-07-10 10:22:23.225 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 10:22:23.263 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 10:22:23.276 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 10:22:23.318 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 10:22:23.324 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 10:22:23.326 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 10:22:23.329 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 10:22:23.334 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 10:22:23.336 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 10:22:23.447 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 10:22:23.545 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 10:22:23.779 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 10:22:23.780 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 10:22:23.865 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 10:22:23.866 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 10:22:23.867 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 10:22:23.878 +07:00 [DBG] Execution loop BackgroundServerProcess:ffd802f2 has started in 5.1727 ms
2025-07-10 10:22:23.885 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 10:22:23.886 +07:00 [INF] Hosting environment: Development
2025-07-10 10:22:23.887 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 10:22:23.895 +07:00 [INF] Server digi-tbhh2:28512:f30881fa successfully announced in 10.5075 ms
2025-07-10 10:22:23.900 +07:00 [DBG] Execution loop ServerHeartbeatProcess:8095f015 has started in 3.416 ms
2025-07-10 10:22:23.900 +07:00 [INF] Server digi-tbhh2:28512:f30881fa is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 10:22:23.905 +07:00 [DBG] Execution loop ServerWatchdog:1be90b47 has started in 3.3537 ms
2025-07-10 10:22:23.908 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:58ca65a7 has started in 5.5563 ms
2025-07-10 10:22:23.910 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:07424568 has started in 4.821 ms
2025-07-10 10:22:23.913 +07:00 [DBG] Execution loop ExpirationManager:c8528d45 has started in 4.8021 ms
2025-07-10 10:22:23.915 +07:00 [DBG] Execution loop CountersAggregator:29af2dcb has started in 4.6346 ms
2025-07-10 10:22:23.917 +07:00 [DBG] Execution loop Worker:3a9859dd has started in 4.9428 ms
2025-07-10 10:22:23.920 +07:00 [DBG] Execution loop Worker:00c7674b has started in 7.9282 ms
2025-07-10 10:22:23.923 +07:00 [DBG] Execution loop Worker:dca1bcd6 has started in 10.7338 ms
2025-07-10 10:22:23.929 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 10:22:23.929 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 10:22:23.926 +07:00 [DBG] Execution loop Worker:9051085c has started in 13.304 ms
2025-07-10 10:22:23.928 +07:00 [DBG] Execution loop Worker:8a0960b0 has started in 15.8837 ms
2025-07-10 10:22:23.932 +07:00 [DBG] Execution loop Worker:1fa95ea7 has started in 19.6844 ms
2025-07-10 10:22:23.934 +07:00 [DBG] Execution loop Worker:ae41743c has started in 21.2664 ms
2025-07-10 10:22:23.938 +07:00 [DBG] Execution loop Worker:d3260a97 has started in 24.2912 ms
2025-07-10 10:22:23.940 +07:00 [DBG] Execution loop Worker:51a84d8e has started in 27.3657 ms
2025-07-10 10:22:23.943 +07:00 [DBG] Execution loop Worker:d726958c has started in 30.4656 ms
2025-07-10 10:22:23.945 +07:00 [DBG] Execution loop Worker:35958410 has started in 32.8615 ms
2025-07-10 10:22:23.948 +07:00 [DBG] Execution loop Worker:c79fca81 has started in 35.6679 ms
2025-07-10 10:22:23.972 +07:00 [INF] Server digi-tbhh2:28512:f30881fa all the dispatchers started
2025-07-10 10:22:23.954 +07:00 [DBG] Execution loop Worker:9f1467fb has started in 41.2436 ms
2025-07-10 10:22:23.954 +07:00 [DBG] Execution loop Worker:bccf938c has started in 41.2354 ms
2025-07-10 10:22:23.955 +07:00 [DBG] Execution loop Worker:81f02065 has started in 42.9102 ms
2025-07-10 10:22:23.959 +07:00 [DBG] Execution loop Worker:236ced06 has started in 46.3635 ms
2025-07-10 10:22:23.960 +07:00 [DBG] Execution loop Worker:70d4f5ca has started in 47.9881 ms
2025-07-10 10:22:23.963 +07:00 [DBG] Execution loop Worker:02194ccd has started in 50.6082 ms
2025-07-10 10:22:23.966 +07:00 [DBG] Execution loop Worker:35804495 has started in 53.6305 ms
2025-07-10 10:22:23.969 +07:00 [DBG] Execution loop Worker:61c57530 has started in 56.6212 ms
2025-07-10 10:22:23.972 +07:00 [DBG] Execution loop DelayedJobScheduler:38bbecde has started in 5.7609 ms
2025-07-10 10:22:23.974 +07:00 [DBG] Execution loop RecurringJobScheduler:8190485a has started in 5.4018 ms
2025-07-10 10:22:23.997 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 10:22:24.099 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 10:22:24.102 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 10:22:24.105 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 10:22:24.291 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 10:22:24.291 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 10:22:24.329 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 45.5929ms
2025-07-10 10:22:24.361 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 78.5105ms
2025-07-10 10:22:24.392 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 10:22:24.420 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 28.6368ms
2025-07-10 10:22:37.966 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------701592790171005649951962 3053
2025-07-10 10:22:37.987 +07:00 [INF] Request from IP: ::1
2025-07-10 10:22:37.991 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 10:22:38.009 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 10:22:38.367 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 10:22:38.404 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'pviBase.Dtos.ApiResponse'.
2025-07-10 10:22:38.428 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 416.2893ms
2025-07-10 10:22:38.430 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 10:22:38.437 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 400 195 application/json; charset=utf-8 471.1351ms
2025-07-10 10:22:51.149 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------554086673853761663363659 3049
2025-07-10 10:22:51.154 +07:00 [INF] Request from IP: ::1
2025-07-10 10:22:51.156 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 10:22:51.158 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 10:22:51.217 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 10:22:51.221 +07:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'pviBase.Dtos.ApiResponse'.
2025-07-10 10:22:51.222 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 61.4195ms
2025-07-10 10:22:51.223 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 10:22:51.224 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 401 90 application/json; charset=utf-8 75.2556ms
2025-07-10 10:22:53.930 +07:00 [DBG] Server digi-tbhh2:28512:f30881fa heartbeat successfully sent
2025-07-10 10:23:08.299 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------573251863812769293209589 3079
2025-07-10 10:23:08.304 +07:00 [INF] Request from IP: ::1
2025-07-10 10:23:08.305 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 10:23:08.306 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 10:23:08.316 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 10:23:08.323 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 10:23:08.470 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 10:23:08.554 +07:00 [INF] Enqueued job for RequestId: 66ce593f-7539-40a2-a7ec-f28a220fafce
2025-07-10 10:23:08.555 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 10:23:08.557 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 250.0262ms
2025-07-10 10:23:08.558 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 10:23:08.569 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 269.5038ms
2025-07-10 10:23:08.685 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 10:23:08.697 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 10:23:08.699 +07:00 [INF] Processing job for RequestId: 66ce593f-7539-40a2-a7ec-f28a220fafce
2025-07-10 10:23:08.701 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 10:23:08.954 +07:00 [INF] Removed cache key: InsuranceContract:thinh1
2025-07-10 10:23:08.966 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 10:23:08.971 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 10:23:08.972 +07:00 [INF] Job for RequestId: 66ce593f-7539-40a2-a7ec-f28a220fafce completed successfully.
2025-07-10 10:23:23.935 +07:00 [DBG] Server digi-tbhh2:28512:f30881fa heartbeat successfully sent
2025-07-10 10:23:53.950 +07:00 [DBG] Server digi-tbhh2:28512:f30881fa heartbeat successfully sent
2025-07-10 10:24:23.969 +07:00 [DBG] Server digi-tbhh2:28512:f30881fa heartbeat successfully sent
2025-07-10 10:24:53.990 +07:00 [DBG] Server digi-tbhh2:28512:f30881fa heartbeat successfully sent
2025-07-10 10:25:24.010 +07:00 [DBG] Server digi-tbhh2:28512:f30881fa heartbeat successfully sent
2025-07-10 10:25:54.022 +07:00 [DBG] Server digi-tbhh2:28512:f30881fa heartbeat successfully sent
2025-07-10 10:35:54.880 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 10:35:54.930 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 10:35:54.940 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 10:35:54.980 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 10:35:54.986 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 10:35:54.988 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 10:35:54.991 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 10:35:54.996 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 10:35:54.997 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 10:35:55.189 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 10:35:55.217 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 10:35:55.482 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 10:35:55.483 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 10:35:55.555 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 10:35:55.556 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 10:35:55.557 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 10:35:55.570 +07:00 [DBG] Execution loop BackgroundServerProcess:69c9b9b5 has started in 6.1205 ms
2025-07-10 10:35:55.576 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 10:35:55.577 +07:00 [INF] Hosting environment: Development
2025-07-10 10:35:55.577 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 10:35:55.583 +07:00 [INF] Server digi-tbhh2:27440:c04f5986 successfully announced in 7.4498 ms
2025-07-10 10:35:55.588 +07:00 [DBG] Execution loop ServerHeartbeatProcess:d8562bae has started in 3.4846 ms
2025-07-10 10:35:55.588 +07:00 [INF] Server digi-tbhh2:27440:c04f5986 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 10:35:55.591 +07:00 [DBG] Execution loop ServerWatchdog:ceeb6b75 has started in 2.561 ms
2025-07-10 10:35:55.594 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:6e9eae01 has started in 4.8711 ms
2025-07-10 10:35:55.596 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:d5a5c854 has started in 4.9917 ms
2025-07-10 10:35:55.599 +07:00 [DBG] Execution loop ExpirationManager:f2f269e1 has started in 5.0209 ms
2025-07-10 10:35:55.607 +07:00 [INF] 2 servers were removed due to timeout
2025-07-10 10:35:55.601 +07:00 [DBG] Execution loop CountersAggregator:fe539bee has started in 4.7665 ms
2025-07-10 10:35:55.618 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 10:35:55.605 +07:00 [DBG] Execution loop Worker:f23f206a has started in 5.5098 ms
2025-07-10 10:35:55.625 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 10:35:55.607 +07:00 [DBG] Execution loop Worker:5f6969f6 has started in 8.2057 ms
2025-07-10 10:35:55.610 +07:00 [DBG] Execution loop Worker:2a53e45c has started in 11.1542 ms
2025-07-10 10:35:55.615 +07:00 [DBG] Execution loop Worker:8537c390 has started in 14.1527 ms
2025-07-10 10:35:55.652 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 10:35:55.618 +07:00 [DBG] Execution loop Worker:696667af has started in 18.9474 ms
2025-07-10 10:35:55.620 +07:00 [DBG] Execution loop Worker:0f311166 has started in 21.1937 ms
2025-07-10 10:35:55.668 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 10:35:55.623 +07:00 [DBG] Execution loop Worker:75fdef7f has started in 24.2746 ms
2025-07-10 10:35:55.677 +07:00 [INF] Server digi-tbhh2:27440:c04f5986 all the dispatchers started
2025-07-10 10:35:55.629 +07:00 [DBG] Execution loop Worker:6c98e9c8 has started in 30.175 ms
2025-07-10 10:35:55.632 +07:00 [DBG] Execution loop Worker:16b10764 has started in 32.9057 ms
2025-07-10 10:35:55.636 +07:00 [DBG] Execution loop Worker:33eee3ef has started in 36.9245 ms
2025-07-10 10:35:55.640 +07:00 [DBG] Execution loop Worker:f75ecf8e has started in 40.6924 ms
2025-07-10 10:35:55.643 +07:00 [DBG] Execution loop Worker:f84bd0af has started in 44.2969 ms
2025-07-10 10:35:55.647 +07:00 [DBG] Execution loop Worker:18b67b2c has started in 47.7624 ms
2025-07-10 10:35:55.683 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 10:35:55.650 +07:00 [DBG] Execution loop Worker:1b711b14 has started in 51.2902 ms
2025-07-10 10:35:55.654 +07:00 [DBG] Execution loop Worker:d0d763bb has started in 55.1499 ms
2025-07-10 10:35:55.691 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 10:35:55.658 +07:00 [DBG] Execution loop Worker:ea97a2f1 has started in 58.7238 ms
2025-07-10 10:35:55.664 +07:00 [DBG] Execution loop Worker:192cda12 has started in 64.6758 ms
2025-07-10 10:35:55.666 +07:00 [DBG] Execution loop Worker:178342d0 has started in 67.0471 ms
2025-07-10 10:35:55.670 +07:00 [DBG] Execution loop Worker:a5fa0255 has started in 70.6695 ms
2025-07-10 10:35:55.674 +07:00 [DBG] Execution loop Worker:eac65f04 has started in 74.3339 ms
2025-07-10 10:35:55.677 +07:00 [DBG] Execution loop DelayedJobScheduler:d4f38bf6 has started in 7.1549 ms
2025-07-10 10:35:55.681 +07:00 [DBG] Execution loop RecurringJobScheduler:899e717e has started in 7.1754 ms
2025-07-10 10:35:55.998 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 10:35:55.998 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 10:35:56.026 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 36.9954ms
2025-07-10 10:35:56.060 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 71.5145ms
2025-07-10 10:35:56.093 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 10:35:56.119 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 26.6646ms
2025-07-10 10:36:07.375 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------145946228706058403031998 3079
2025-07-10 10:36:07.391 +07:00 [INF] Request from IP: ::1
2025-07-10 10:36:07.394 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 10:36:07.410 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 10:36:07.730 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 10:36:07.766 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 10:36:07.878 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 10:36:07.952 +07:00 [INF] Enqueued job for RequestId: 006925c2-1f80-4265-b056-7fb17d06c529
2025-07-10 10:36:07.965 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 10:36:07.979 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 565.5834ms
2025-07-10 10:36:07.981 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 10:36:07.991 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 616.6732ms
2025-07-10 10:36:08.099 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 10:36:08.116 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 10:36:08.120 +07:00 [INF] Processing job for RequestId: 006925c2-1f80-4265-b056-7fb17d06c529
2025-07-10 10:36:08.123 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 10:36:08.129 +07:00 [INF] No file matched for LoanNo: thinh2
2025-07-10 10:36:08.377 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 10:36:08.381 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 10:36:08.382 +07:00 [INF] Job for RequestId: 006925c2-1f80-4265-b056-7fb17d06c529 completed successfully.
2025-07-10 10:36:25.606 +07:00 [DBG] Server digi-tbhh2:27440:c04f5986 heartbeat successfully sent
2025-07-10 10:36:55.625 +07:00 [DBG] Server digi-tbhh2:27440:c04f5986 heartbeat successfully sent
2025-07-10 10:37:25.637 +07:00 [DBG] Server digi-tbhh2:27440:c04f5986 heartbeat successfully sent
2025-07-10 10:37:55.643 +07:00 [DBG] Server digi-tbhh2:27440:c04f5986 heartbeat successfully sent
2025-07-10 10:38:25.655 +07:00 [DBG] Server digi-tbhh2:27440:c04f5986 heartbeat successfully sent
2025-07-10 10:47:13.270 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 10:47:13.347 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 10:47:13.360 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 10:47:13.410 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 10:47:13.418 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 10:47:13.421 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 10:47:13.425 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 10:47:13.431 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 10:47:13.433 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 10:47:13.644 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 10:47:13.721 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 10:47:13.980 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 10:47:13.981 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 10:47:14.053 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 10:47:14.054 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 10:47:14.055 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 10:47:14.063 +07:00 [DBG] Execution loop BackgroundServerProcess:ec5a1caf has started in 4.039 ms
2025-07-10 10:47:14.068 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 10:47:14.069 +07:00 [INF] Hosting environment: Development
2025-07-10 10:47:14.070 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 10:47:14.077 +07:00 [INF] Server digi-tbhh2:4416:7d83fce0 successfully announced in 8.7493 ms
2025-07-10 10:47:14.081 +07:00 [DBG] Execution loop ServerHeartbeatProcess:a1af49d5 has started in 2.7975 ms
2025-07-10 10:47:14.081 +07:00 [INF] Server digi-tbhh2:4416:7d83fce0 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 10:47:14.084 +07:00 [DBG] Execution loop ServerWatchdog:4b11aa3d has started in 2.2504 ms
2025-07-10 10:47:14.088 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:ea5efd2a has started in 6.4634 ms
2025-07-10 10:47:14.090 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:47cbdd47 has started in 5.9924 ms
2025-07-10 10:47:14.092 +07:00 [DBG] Execution loop ExpirationManager:6e689f4f has started in 3.9238 ms
2025-07-10 10:47:14.094 +07:00 [DBG] Execution loop CountersAggregator:bb3d8d14 has started in 4.0316 ms
2025-07-10 10:47:14.097 +07:00 [DBG] Execution loop Worker:6da5b57a has started in 4.5414 ms
2025-07-10 10:47:14.101 +07:00 [INF] 1 servers were removed due to timeout
2025-07-10 10:47:14.105 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 10:47:14.105 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 10:47:14.100 +07:00 [DBG] Execution loop Worker:0889391a has started in 7.4546 ms
2025-07-10 10:47:14.101 +07:00 [DBG] Execution loop Worker:76c0025f has started in 9.2133 ms
2025-07-10 10:47:14.104 +07:00 [DBG] Execution loop Worker:f803c745 has started in 11.7687 ms
2025-07-10 10:47:14.106 +07:00 [DBG] Execution loop Worker:084bea38 has started in 13.9531 ms
2025-07-10 10:47:14.125 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 10:47:14.108 +07:00 [DBG] Execution loop Worker:5409e988 has started in 15.9504 ms
2025-07-10 10:47:14.111 +07:00 [DBG] Execution loop Worker:5480d77f has started in 18.3081 ms
2025-07-10 10:47:14.113 +07:00 [DBG] Execution loop Worker:f8d4bc78 has started in 20.7976 ms
2025-07-10 10:47:14.115 +07:00 [DBG] Execution loop Worker:bf7aa128 has started in 22.9418 ms
2025-07-10 10:47:14.118 +07:00 [DBG] Execution loop Worker:4fd15af0 has started in 25.5724 ms
2025-07-10 10:47:14.121 +07:00 [DBG] Execution loop Worker:0d971d31 has started in 28.7582 ms
2025-07-10 10:47:14.148 +07:00 [INF] Server digi-tbhh2:4416:7d83fce0 all the dispatchers started
2025-07-10 10:47:14.124 +07:00 [DBG] Execution loop Worker:4cd09157 has started in 31.8358 ms
2025-07-10 10:47:14.127 +07:00 [DBG] Execution loop Worker:867b7228 has started in 34.5457 ms
2025-07-10 10:47:14.131 +07:00 [DBG] Execution loop Worker:e90df947 has started in 38.2347 ms
2025-07-10 10:47:14.133 +07:00 [DBG] Execution loop Worker:60f92ade has started in 40.2708 ms
2025-07-10 10:47:14.135 +07:00 [DBG] Execution loop Worker:63d7ec56 has started in 42.9106 ms
2025-07-10 10:47:14.138 +07:00 [DBG] Execution loop Worker:a5ac0bd5 has started in 45.849 ms
2025-07-10 10:47:14.154 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 10:47:14.141 +07:00 [DBG] Execution loop Worker:e5e81334 has started in 48.4474 ms
2025-07-10 10:47:14.143 +07:00 [DBG] Execution loop Worker:775ee78e has started in 50.9299 ms
2025-07-10 10:47:14.146 +07:00 [DBG] Execution loop Worker:7d262639 has started in 53.34 ms
2025-07-10 10:47:14.148 +07:00 [DBG] Execution loop DelayedJobScheduler:34b89135 has started in 5.1097 ms
2025-07-10 10:47:14.151 +07:00 [DBG] Execution loop RecurringJobScheduler:ab9ef0ef has started in 4.9727 ms
2025-07-10 10:47:14.161 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 10:47:14.166 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 10:47:14.845 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 10:47:14.845 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 10:47:14.870 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 30.3242ms
2025-07-10 10:47:14.905 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 66.2874ms
2025-07-10 10:47:14.932 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 10:47:14.961 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 29.3148ms
2025-07-10 10:47:36.867 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------212528040624564374138476 16402
2025-07-10 10:47:36.883 +07:00 [INF] Request from IP: ::1
2025-07-10 10:47:36.887 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 10:47:36.905 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 10:47:37.247 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 10:47:37.279 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 10:47:37.396 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 10:47:37.466 +07:00 [INF] Enqueued job for RequestId: c12d5a9a-6389-42e0-b007-f5d86f00fb8a
2025-07-10 10:47:37.476 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 10:47:37.496 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 587.3003ms
2025-07-10 10:47:37.497 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 10:47:37.508 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 641.9173ms
2025-07-10 10:47:37.649 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 10:47:37.665 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 10:47:37.668 +07:00 [INF] Processing job for RequestId: c12d5a9a-6389-42e0-b007-f5d86f00fb8a
2025-07-10 10:47:37.670 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 10:47:37.678 +07:00 [INF] No file matched for LoanNo: thinh3
2025-07-10 10:47:37.949 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 10:47:37.953 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 10:47:37.955 +07:00 [INF] Job for RequestId: c12d5a9a-6389-42e0-b007-f5d86f00fb8a completed successfully.
2025-07-10 10:47:44.093 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:48:14.100 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:48:44.123 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:49:14.138 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:49:44.152 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:50:14.160 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:50:44.173 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:50:54.463 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------082399351266104996589816 16445
2025-07-10 10:50:54.467 +07:00 [INF] Request from IP: ::1
2025-07-10 10:50:54.467 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 10:50:54.468 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 10:50:54.477 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 10:50:54.481 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 10:50:54.486 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 10:50:54.495 +07:00 [INF] Enqueued job for RequestId: 27c3ec91-c15c-4877-a61d-0991b6729dda
2025-07-10 10:50:54.497 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 10:50:54.498 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 28.8115ms
2025-07-10 10:50:54.499 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 10:50:54.500 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 37.1624ms
2025-07-10 10:50:54.508 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 10:50:54.511 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 10:50:54.513 +07:00 [INF] Processing job for RequestId: 27c3ec91-c15c-4877-a61d-0991b6729dda
2025-07-10 10:50:54.515 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 10:50:54.517 +07:00 [INF] No file matched for LoanNo: thinh4
2025-07-10 10:50:54.521 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 10:50:54.524 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 10:50:54.525 +07:00 [INF] Job for RequestId: 27c3ec91-c15c-4877-a61d-0991b6729dda completed successfully.
2025-07-10 10:51:14.179 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:51:44.198 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:52:14.157 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 10:52:14.206 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:52:44.214 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:53:14.226 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:53:44.236 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:54:01.344 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------427811217185054535290351 16443
2025-07-10 10:54:01.353 +07:00 [INF] Request from IP: ::1
2025-07-10 10:54:01.354 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 10:54:01.356 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 10:54:01.362 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 10:54:01.365 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 10:54:01.369 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 10:54:01.378 +07:00 [INF] Enqueued job for RequestId: 4275b573-9bfc-4eb9-a2ba-47002455e8fe
2025-07-10 10:54:01.379 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 10:54:01.380 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 23.2049ms
2025-07-10 10:54:01.381 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 10:54:01.383 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 39.0453ms
2025-07-10 10:54:01.388 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 10:54:01.391 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 10:54:01.393 +07:00 [INF] Processing job for RequestId: 4275b573-9bfc-4eb9-a2ba-47002455e8fe
2025-07-10 10:54:01.394 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 10:54:01.396 +07:00 [INF] No file matched for LoanNo: thinh5
2025-07-10 10:54:01.399 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 10:54:01.401 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 10:54:01.403 +07:00 [INF] Job for RequestId: 4275b573-9bfc-4eb9-a2ba-47002455e8fe completed successfully.
2025-07-10 10:54:14.255 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:54:44.261 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:55:14.273 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:55:44.282 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:56:14.298 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:56:44.309 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:57:14.186 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 10:57:14.329 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:57:44.348 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:58:14.367 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 10:58:44.378 +07:00 [DBG] Server digi-tbhh2:4416:7d83fce0 heartbeat successfully sent
2025-07-10 11:01:52.709 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 11:01:52.756 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 11:01:52.767 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 11:01:52.808 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 11:01:52.814 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 11:01:52.816 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 11:01:52.820 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 11:01:52.826 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 11:01:52.829 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 11:01:53.020 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 11:01:53.098 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 11:01:53.358 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 11:01:53.358 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 11:01:53.539 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 11:01:53.540 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 11:01:53.541 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 11:01:53.550 +07:00 [DBG] Execution loop BackgroundServerProcess:d13ce217 has started in 5.0034 ms
2025-07-10 11:01:53.557 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 11:01:53.557 +07:00 [INF] Hosting environment: Development
2025-07-10 11:01:53.558 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 11:01:53.567 +07:00 [INF] Server digi-tbhh2:24888:4a23c1ef successfully announced in 9.7946 ms
2025-07-10 11:01:53.572 +07:00 [DBG] Execution loop ServerHeartbeatProcess:d3dc18ce has started in 4.1324 ms
2025-07-10 11:01:53.572 +07:00 [INF] Server digi-tbhh2:24888:4a23c1ef is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 11:01:53.576 +07:00 [DBG] Execution loop ServerWatchdog:e240588a has started in 3.0956 ms
2025-07-10 11:01:53.579 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:c5a02df1 has started in 5.6875 ms
2025-07-10 11:01:53.584 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:f2fdeb13 has started in 6.6079 ms
2025-07-10 11:01:53.586 +07:00 [DBG] Execution loop ExpirationManager:0f60de78 has started in 6.8011 ms
2025-07-10 11:01:53.589 +07:00 [DBG] Execution loop CountersAggregator:b171277e has started in 6.2849 ms
2025-07-10 11:01:53.593 +07:00 [DBG] Execution loop Worker:177b9dd6 has started in 6.3521 ms
2025-07-10 11:01:53.611 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 11:01:53.614 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 11:01:53.599 +07:00 [DBG] Execution loop Worker:e0ba3f89 has started in 12.8319 ms
2025-07-10 11:01:53.604 +07:00 [DBG] Execution loop Worker:94377f4d has started in 15.863 ms
2025-07-10 11:01:53.606 +07:00 [DBG] Execution loop Worker:db86ffcd has started in 19.34 ms
2025-07-10 11:01:53.611 +07:00 [DBG] Execution loop Worker:47ecbc8e has started in 23.466 ms
2025-07-10 11:01:53.613 +07:00 [DBG] Execution loop Worker:6338a7b1 has started in 26.4643 ms
2025-07-10 11:01:53.617 +07:00 [DBG] Execution loop Worker:cace58fc has started in 30.9784 ms
2025-07-10 11:01:53.622 +07:00 [DBG] Execution loop Worker:5b5ead79 has started in 35.669 ms
2025-07-10 11:01:53.668 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 11:01:53.624 +07:00 [DBG] Execution loop Worker:27036fad has started in 37.7988 ms
2025-07-10 11:01:53.672 +07:00 [INF] Server digi-tbhh2:24888:4a23c1ef all the dispatchers started
2025-07-10 11:01:53.628 +07:00 [DBG] Execution loop Worker:802d73eb has started in 41.5107 ms
2025-07-10 11:01:53.632 +07:00 [DBG] Execution loop Worker:3398210d has started in 45.6303 ms
2025-07-10 11:01:53.638 +07:00 [DBG] Execution loop Worker:edb9c789 has started in 51.9584 ms
2025-07-10 11:01:53.641 +07:00 [DBG] Execution loop Worker:9f3fe5ea has started in 54.4392 ms
2025-07-10 11:01:53.646 +07:00 [DBG] Execution loop Worker:5cc168c9 has started in 59.2941 ms
2025-07-10 11:01:53.649 +07:00 [DBG] Execution loop Worker:36637276 has started in 62.6619 ms
2025-07-10 11:01:53.653 +07:00 [DBG] Execution loop Worker:f38a8db4 has started in 66.4933 ms
2025-07-10 11:01:53.694 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 11:01:53.657 +07:00 [DBG] Execution loop Worker:92b9a11b has started in 70.4076 ms
2025-07-10 11:01:53.660 +07:00 [DBG] Execution loop Worker:544841e6 has started in 73.2895 ms
2025-07-10 11:01:53.663 +07:00 [DBG] Execution loop Worker:4f3b60ce has started in 76.747 ms
2025-07-10 11:01:53.667 +07:00 [DBG] Execution loop Worker:d3a6d930 has started in 80.7736 ms
2025-07-10 11:01:53.672 +07:00 [DBG] Execution loop DelayedJobScheduler:5eea0b47 has started in 9.0001 ms
2025-07-10 11:01:53.677 +07:00 [DBG] Execution loop RecurringJobScheduler:52d7d9f1 has started in 9.406 ms
2025-07-10 11:01:53.698 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 11:01:53.714 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 11:01:53.782 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 11:01:53.782 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 11:01:53.815 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 37.5355ms
2025-07-10 11:01:53.855 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 78.3931ms
2025-07-10 11:01:53.887 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 11:01:53.921 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 34.2302ms
2025-07-10 11:02:01.482 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------146702614418501675673952 16443
2025-07-10 11:02:01.500 +07:00 [INF] Request from IP: ::1
2025-07-10 11:02:01.503 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 11:02:01.519 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 11:02:01.818 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 11:02:01.848 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 11:02:01.955 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 11:02:02.025 +07:00 [INF] Enqueued job for RequestId: 3ce34cec-e9a5-47ea-bc89-fcb3066b705d
2025-07-10 11:02:02.037 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 11:02:02.050 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 527.2701ms
2025-07-10 11:02:02.052 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 11:02:02.062 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 579.9267ms
2025-07-10 11:02:02.194 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 11:02:02.208 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 11:02:02.211 +07:00 [INF] Processing job for RequestId: 3ce34cec-e9a5-47ea-bc89-fcb3066b705d
2025-07-10 11:02:02.213 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 11:02:02.220 +07:00 [INF] No file matched for LoanNo: thinh6
2025-07-10 11:02:02.451 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 11:02:02.456 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 11:02:02.457 +07:00 [INF] Job for RequestId: 3ce34cec-e9a5-47ea-bc89-fcb3066b705d completed successfully.
2025-07-10 11:02:23.602 +07:00 [DBG] Server digi-tbhh2:24888:4a23c1ef heartbeat successfully sent
2025-07-10 11:02:53.621 +07:00 [DBG] Server digi-tbhh2:24888:4a23c1ef heartbeat successfully sent
2025-07-10 11:03:23.633 +07:00 [DBG] Server digi-tbhh2:24888:4a23c1ef heartbeat successfully sent
2025-07-10 11:03:53.639 +07:00 [DBG] Server digi-tbhh2:24888:4a23c1ef heartbeat successfully sent
2025-07-10 11:04:23.651 +07:00 [DBG] Server digi-tbhh2:24888:4a23c1ef heartbeat successfully sent
2025-07-10 11:04:53.665 +07:00 [DBG] Server digi-tbhh2:24888:4a23c1ef heartbeat successfully sent
2025-07-10 11:05:23.679 +07:00 [DBG] Server digi-tbhh2:24888:4a23c1ef heartbeat successfully sent
2025-07-10 11:05:53.695 +07:00 [DBG] Server digi-tbhh2:24888:4a23c1ef heartbeat successfully sent
2025-07-10 11:06:23.711 +07:00 [DBG] Server digi-tbhh2:24888:4a23c1ef heartbeat successfully sent
2025-07-10 11:06:53.615 +07:00 [INF] 1 servers were removed due to timeout
2025-07-10 11:06:53.641 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 11:06:53.720 +07:00 [DBG] Server digi-tbhh2:24888:4a23c1ef heartbeat successfully sent
2025-07-10 11:10:41.693 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 11:10:41.741 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 11:10:41.752 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 11:10:41.793 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 11:10:41.799 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 11:10:41.801 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 11:10:41.805 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 11:10:41.812 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 11:10:41.813 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 11:10:42.008 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 11:10:42.101 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 11:10:42.380 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 11:10:42.380 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 11:10:42.452 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 11:10:42.454 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 11:10:42.455 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 11:10:42.463 +07:00 [DBG] Execution loop BackgroundServerProcess:1c83a69a has started in 4.4912 ms
2025-07-10 11:10:42.469 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 11:10:42.470 +07:00 [INF] Hosting environment: Development
2025-07-10 11:10:42.471 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 11:10:42.478 +07:00 [INF] Server digi-tbhh2:25652:e8f3942c successfully announced in 8.4194 ms
2025-07-10 11:10:42.482 +07:00 [INF] Server digi-tbhh2:25652:e8f3942c is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 11:10:42.482 +07:00 [DBG] Execution loop ServerHeartbeatProcess:94978c45 has started in 3.4845 ms
2025-07-10 11:10:42.488 +07:00 [DBG] Execution loop ServerWatchdog:bc0130e8 has started in 5.1232 ms
2025-07-10 11:10:42.489 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:d3c35084 has started in 6.3376 ms
2025-07-10 11:10:42.492 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:df926c63 has started in 4.4389 ms
2025-07-10 11:10:42.495 +07:00 [DBG] Execution loop ExpirationManager:1c83a2f6 has started in 4.9787 ms
2025-07-10 11:10:42.497 +07:00 [DBG] Execution loop CountersAggregator:3b073b4b has started in 4.7343 ms
2025-07-10 11:10:42.500 +07:00 [DBG] Execution loop Worker:8a1f29dc has started in 5.5978 ms
2025-07-10 11:10:42.504 +07:00 [DBG] Execution loop Worker:e3e05d32 has started in 9.0862 ms
2025-07-10 11:10:42.511 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 11:10:42.518 +07:00 [DBG] Execution loop Worker:9f58a0da has started in 23.2317 ms
2025-07-10 11:10:42.513 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 11:10:42.507 +07:00 [DBG] Execution loop Worker:da3aee34 has started in 11.9325 ms
2025-07-10 11:10:42.510 +07:00 [DBG] Execution loop Worker:b449e3da has started in 15.0019 ms
2025-07-10 11:10:42.512 +07:00 [DBG] Execution loop Worker:fe910af1 has started in 17.6923 ms
2025-07-10 11:10:42.515 +07:00 [DBG] Execution loop Worker:351a3a7b has started in 20.5991 ms
2025-07-10 11:10:42.521 +07:00 [DBG] Execution loop Worker:48458aa4 has started in 26.4219 ms
2025-07-10 11:10:42.524 +07:00 [DBG] Execution loop Worker:bfc29c1c has started in 29.1119 ms
2025-07-10 11:10:42.526 +07:00 [DBG] Execution loop Worker:b23b5f0c has started in 31.797 ms
2025-07-10 11:10:42.529 +07:00 [DBG] Execution loop Worker:325147d8 has started in 34.6071 ms
2025-07-10 11:10:42.533 +07:00 [DBG] Execution loop Worker:cac7c431 has started in 38.0738 ms
2025-07-10 11:10:42.564 +07:00 [INF] Server digi-tbhh2:25652:e8f3942c all the dispatchers started
2025-07-10 11:10:42.565 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 11:10:42.536 +07:00 [DBG] Execution loop Worker:dbf9b30c has started in 41.2939 ms
2025-07-10 11:10:42.539 +07:00 [DBG] Execution loop Worker:6e32b587 has started in 44.2754 ms
2025-07-10 11:10:42.542 +07:00 [DBG] Execution loop Worker:7bb8954b has started in 47.2548 ms
2025-07-10 11:10:42.545 +07:00 [DBG] Execution loop Worker:dce8c55c has started in 50.374 ms
2025-07-10 11:10:42.548 +07:00 [DBG] Execution loop Worker:d3b41416 has started in 53.5824 ms
2025-07-10 11:10:42.553 +07:00 [DBG] Execution loop Worker:e3c6eb9c has started in 58.0115 ms
2025-07-10 11:10:42.557 +07:00 [DBG] Execution loop Worker:02f5451a has started in 62.5285 ms
2025-07-10 11:10:42.560 +07:00 [DBG] Execution loop Worker:7b776249 has started in 64.9045 ms
2025-07-10 11:10:42.609 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 11:10:42.565 +07:00 [DBG] Execution loop DelayedJobScheduler:2e9c1325 has started in 9.0312 ms
2025-07-10 11:10:42.567 +07:00 [DBG] Execution loop RecurringJobScheduler:62b366d0 has started in 7.1995 ms
2025-07-10 11:10:42.623 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 11:10:42.626 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 11:10:42.916 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 11:10:42.916 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 11:10:42.946 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 35.3704ms
2025-07-10 11:10:42.982 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 71.42ms
2025-07-10 11:10:43.010 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 11:10:43.037 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 26.8606ms
2025-07-10 11:10:48.935 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------862602998525894263678657 16443
2025-07-10 11:10:48.953 +07:00 [INF] Request from IP: ::1
2025-07-10 11:10:48.957 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 11:10:48.974 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 11:10:49.310 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 11:10:49.346 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 11:10:49.467 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 11:10:49.545 +07:00 [INF] Enqueued job for RequestId: 05d6024e-963d-4a16-b0e3-06f73f7f3318
2025-07-10 11:10:49.554 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 11:10:49.581 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 602.595ms
2025-07-10 11:10:49.583 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 11:10:49.596 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 660.3719ms
2025-07-10 11:10:49.735 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 11:10:49.749 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 11:10:49.753 +07:00 [INF] Processing job for RequestId: 05d6024e-963d-4a16-b0e3-06f73f7f3318
2025-07-10 11:10:49.756 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 11:10:49.766 +07:00 [INF] Searching for file: Work.docx
2025-07-10 11:13:18.178 +07:00 [DBG] Server digi-tbhh2:25652:e8f3942c heartbeat successfully sent
2025-07-10 11:13:18.190 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [ErrorMessage] = @p0, [LastUpdatedAt] = @p1, [Status] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-07-10 11:13:18.204 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------415599863708451578537429 16442
2025-07-10 11:13:18.204 +07:00 [ERR] Job for RequestId: 05d6024e-963d-4a16-b0e3-06f73f7f3318 failed.
System.NullReferenceException: Object reference not set to an instance of an object.
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 124
2025-07-10 11:13:18.207 +07:00 [INF] Request from IP: ::1
2025-07-10 11:13:20.194 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 11:13:20.195 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 11:13:20.206 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 11:13:20.208 +07:00 [WRN] Failed to process the job '17': an exception occurred. Retry attempt 1 of 3 will be performed in 00:00:34.
System.NullReferenceException: Object reference not set to an instance of an object.
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 124
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 165
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-07-10 11:13:20.210 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 11:13:20.219 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 11:13:20.226 +07:00 [INF] Enqueued job for RequestId: 15df4ed5-89d5-4b39-b7bd-b3df9a4d7f8d
2025-07-10 11:13:20.227 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 11:13:20.229 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 32.0873ms
2025-07-10 11:13:20.230 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 11:13:20.231 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 2027.3085ms
2025-07-10 11:13:20.234 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 11:13:20.238 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 11:13:20.240 +07:00 [INF] Processing job for RequestId: 15df4ed5-89d5-4b39-b7bd-b3df9a4d7f8d
2025-07-10 11:13:20.241 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 11:13:20.244 +07:00 [INF] Searching for file: Work.docx
2025-07-10 11:13:20.595 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [ErrorMessage] = @p0, [LastUpdatedAt] = @p1, [Status] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-07-10 11:13:20.597 +07:00 [ERR] Job for RequestId: 15df4ed5-89d5-4b39-b7bd-b3df9a4d7f8d failed.
System.NullReferenceException: Object reference not set to an instance of an object.
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 124
2025-07-10 11:13:21.021 +07:00 [WRN] Failed to process the job '18': an exception occurred. Retry attempt 1 of 3 will be performed in 00:00:43.
System.NullReferenceException: Object reference not set to an instance of an object.
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 124
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 165
   at InvokeStub_TaskAwaiter.GetResult(Object, Object, IntPtr*)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-07-10 11:13:46.126 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 11:13:46.159 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 11:13:46.170 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 11:13:46.210 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 11:13:46.218 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 11:13:46.221 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 11:13:46.225 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 11:13:46.231 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 11:13:46.232 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 11:13:46.343 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 11:13:46.420 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 11:13:46.673 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 11:13:46.674 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 11:13:46.750 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 11:13:46.751 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 11:13:46.752 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 11:13:46.767 +07:00 [DBG] Execution loop BackgroundServerProcess:b0cc0c5e has started in 6.2739 ms
2025-07-10 11:13:46.774 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 11:13:46.775 +07:00 [INF] Hosting environment: Development
2025-07-10 11:13:46.776 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 11:13:46.782 +07:00 [INF] Server digi-tbhh2:2556:82b9c3e1 successfully announced in 8.0656 ms
2025-07-10 11:13:46.786 +07:00 [INF] Server digi-tbhh2:2556:82b9c3e1 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 11:13:46.788 +07:00 [DBG] Execution loop ServerHeartbeatProcess:14fa558e has started in 3.9707 ms
2025-07-10 11:13:46.791 +07:00 [DBG] Execution loop ServerWatchdog:61b0b200 has started in 2.6153 ms
2025-07-10 11:13:46.793 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:7688218e has started in 4.3793 ms
2025-07-10 11:13:46.796 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:0d601699 has started in 4.5358 ms
2025-07-10 11:13:46.798 +07:00 [DBG] Execution loop ExpirationManager:6052c0af has started in 4.7337 ms
2025-07-10 11:13:46.800 +07:00 [DBG] Execution loop CountersAggregator:9815d7f5 has started in 4.7091 ms
2025-07-10 11:13:46.804 +07:00 [DBG] Execution loop Worker:49ce238d has started in 5.6158 ms
2025-07-10 11:13:46.806 +07:00 [DBG] Execution loop Worker:e52c695a has started in 8.1257 ms
2025-07-10 11:13:46.817 +07:00 [INF] 1 servers were removed due to timeout
2025-07-10 11:13:46.818 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 11:13:46.815 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 11:13:46.809 +07:00 [DBG] Execution loop Worker:0e9bf4bf has started in 10.7428 ms
2025-07-10 11:13:46.811 +07:00 [DBG] Execution loop Worker:dc8753cd has started in 13.2338 ms
2025-07-10 11:13:46.815 +07:00 [DBG] Execution loop Worker:d2a47eea has started in 16.6305 ms
2025-07-10 11:13:46.817 +07:00 [DBG] Execution loop Worker:0865c8ee has started in 19.1087 ms
2025-07-10 11:13:46.820 +07:00 [DBG] Execution loop Worker:e98775cc has started in 22.0699 ms
2025-07-10 11:13:46.824 +07:00 [DBG] Execution loop Worker:1b0fefcc has started in 25.6445 ms
2025-07-10 11:13:46.826 +07:00 [DBG] Execution loop Worker:c8e795d8 has started in 27.5534 ms
2025-07-10 11:13:46.828 +07:00 [DBG] Execution loop Worker:e0937eac has started in 30.3032 ms
2025-07-10 11:13:46.831 +07:00 [DBG] Execution loop Worker:5966c937 has started in 32.8412 ms
2025-07-10 11:13:46.859 +07:00 [INF] Server digi-tbhh2:2556:82b9c3e1 all the dispatchers started
2025-07-10 11:13:46.860 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 11:13:46.833 +07:00 [DBG] Execution loop Worker:9c5c782a has started in 35.2302 ms
2025-07-10 11:13:46.836 +07:00 [DBG] Execution loop Worker:1a3c7180 has started in 38.0912 ms
2025-07-10 11:13:46.839 +07:00 [DBG] Execution loop Worker:a62a30d1 has started in 40.8324 ms
2025-07-10 11:13:46.841 +07:00 [DBG] Execution loop Worker:371ebf41 has started in 43.4404 ms
2025-07-10 11:13:46.844 +07:00 [DBG] Execution loop Worker:1b714d43 has started in 46.2233 ms
2025-07-10 11:13:46.848 +07:00 [DBG] Execution loop Worker:6c643086 has started in 49.5091 ms
2025-07-10 11:13:46.870 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 11:13:46.850 +07:00 [DBG] Execution loop Worker:f32162ea has started in 51.5016 ms
2025-07-10 11:13:46.854 +07:00 [DBG] Execution loop Worker:38f9d0f3 has started in 55.7993 ms
2025-07-10 11:13:46.856 +07:00 [DBG] Execution loop Worker:cdc5e548 has started in 57.8456 ms
2025-07-10 11:13:46.859 +07:00 [DBG] Execution loop DelayedJobScheduler:125059b2 has started in 5.1396 ms
2025-07-10 11:13:46.862 +07:00 [DBG] Execution loop RecurringJobScheduler:294258bd has started in 5.7789 ms
2025-07-10 11:13:46.875 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 11:13:46.880 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 11:13:47.394 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 11:13:47.394 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 11:13:47.429 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 45.1802ms
2025-07-10 11:13:47.464 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 81.0577ms
2025-07-10 11:13:47.492 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 11:13:47.523 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.4118ms
2025-07-10 11:13:55.247 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------284893425909087601650821 16442
2025-07-10 11:13:55.264 +07:00 [INF] Request from IP: ::1
2025-07-10 11:13:55.266 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 11:13:55.283 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 11:13:55.622 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 11:13:55.658 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 11:13:55.767 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 11:13:55.833 +07:00 [INF] Enqueued job for RequestId: 44ebc917-b986-4e7c-8bac-20049feb7514
2025-07-10 11:13:55.840 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 11:13:55.861 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 573.5304ms
2025-07-10 11:13:55.862 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 11:13:55.873 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 625.6685ms
2025-07-10 11:13:55.977 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 11:13:55.989 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 11:13:55.993 +07:00 [INF] Processing job for RequestId: 44ebc917-b986-4e7c-8bac-20049feb7514
2025-07-10 11:13:55.996 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 11:13:56.003 +07:00 [INF] Searching for file: Work.docx
2025-07-10 11:14:09.948 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [ErrorMessage] = @p0, [LastUpdatedAt] = @p1, [Status] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-07-10 11:14:09.950 +07:00 [ERR] Job for RequestId: 44ebc917-b986-4e7c-8bac-20049feb7514 failed.
System.NullReferenceException: Object reference not set to an instance of an object.
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 124
2025-07-10 11:14:09.964 +07:00 [DBG] 2 scheduled job(s) processed by scheduler.
2025-07-10 11:14:19.286 +07:00 [DBG] Server digi-tbhh2:2556:82b9c3e1 heartbeat successfully sent
2025-07-10 11:14:19.292 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 11:14:19.295 +07:00 [WRN] Failed to process the job '19': an exception occurred. Retry attempt 1 of 3 will be performed in 00:00:18.
System.NullReferenceException: Object reference not set to an instance of an object.
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 124
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 165
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-07-10 11:14:19.295 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 11:14:19.300 +07:00 [INF] Processing job for RequestId: 05d6024e-963d-4a16-b0e3-06f73f7f3318
2025-07-10 11:14:19.302 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 11:14:19.304 +07:00 [INF] Searching for file: Work.docx
2025-07-10 11:14:26.441 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 11:14:26.443 +07:00 [ERR] Job for RequestId: 05d6024e-963d-4a16-b0e3-06f73f7f3318 failed.
System.NullReferenceException: Object reference not set to an instance of an object.
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 124
2025-07-10 11:14:39.538 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 11:14:39.540 +07:00 [WRN] Failed to process the job '17': an exception occurred. Retry attempt 2 of 3 will be performed in 00:01:00.
System.NullReferenceException: Object reference not set to an instance of an object.
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 124
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 165
   at InvokeStub_TaskAwaiter.GetResult(Object, Object, IntPtr*)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-07-10 11:14:39.541 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 11:14:39.540 +07:00 [DBG] 1 scheduled job(s) processed by scheduler.
2025-07-10 11:14:39.545 +07:00 [INF] Processing job for RequestId: 15df4ed5-89d5-4b39-b7bd-b3df9a4d7f8d
2025-07-10 11:14:39.547 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 11:14:39.548 +07:00 [INF] Searching for file: Work.docx
2025-07-10 13:34:27.597 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 13:34:27.643 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 13:34:27.654 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 13:34:27.695 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 13:34:27.701 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 13:34:27.703 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 13:34:27.706 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 13:34:27.712 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 13:34:27.713 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 13:34:27.931 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 13:34:28.021 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 13:34:28.320 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 13:34:28.321 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 13:34:28.402 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 13:34:28.403 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 13:34:28.403 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 13:34:28.412 +07:00 [DBG] Execution loop BackgroundServerProcess:ac91360b has started in 4.9599 ms
2025-07-10 13:34:28.420 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 13:34:28.421 +07:00 [INF] Hosting environment: Development
2025-07-10 13:34:28.421 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 13:34:28.428 +07:00 [INF] Server digi-tbhh2:25708:23aef94e successfully announced in 9.3045 ms
2025-07-10 13:34:28.435 +07:00 [INF] Server digi-tbhh2:25708:23aef94e is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 13:34:28.436 +07:00 [DBG] Execution loop ServerHeartbeatProcess:532fb083 has started in 5.5558 ms
2025-07-10 13:34:28.439 +07:00 [DBG] Execution loop ServerWatchdog:31d88297 has started in 3.2001 ms
2025-07-10 13:34:28.443 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:7237fd0e has started in 5.8713 ms
2025-07-10 13:34:28.446 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:08f95b37 has started in 6.162 ms
2025-07-10 13:34:28.448 +07:00 [DBG] Execution loop ExpirationManager:6e012ed4 has started in 5.9243 ms
2025-07-10 13:34:28.452 +07:00 [DBG] Execution loop CountersAggregator:ae524456 has started in 6.1021 ms
2025-07-10 13:34:28.458 +07:00 [DBG] Execution loop Worker:ca120579 has started in 9.3219 ms
2025-07-10 13:34:28.464 +07:00 [INF] 2 servers were removed due to timeout
2025-07-10 13:34:28.469 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 13:34:28.465 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 13:34:28.462 +07:00 [DBG] Execution loop Worker:c48336d7 has started in 12.9593 ms
2025-07-10 13:34:28.464 +07:00 [DBG] Execution loop Worker:96be8390 has started in 15.2857 ms
2025-07-10 13:34:28.468 +07:00 [DBG] Execution loop Worker:84438492 has started in 18.9041 ms
2025-07-10 13:34:28.471 +07:00 [DBG] Execution loop Worker:b75dec22 has started in 21.9721 ms
2025-07-10 13:34:28.474 +07:00 [DBG] Execution loop Worker:2ed0c7f3 has started in 24.9872 ms
2025-07-10 13:34:28.501 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 13:34:28.477 +07:00 [DBG] Execution loop Worker:489f52ba has started in 28.5036 ms
2025-07-10 13:34:28.482 +07:00 [DBG] Execution loop Worker:2e2a76b1 has started in 32.65 ms
2025-07-10 13:34:28.487 +07:00 [DBG] Execution loop Worker:6bdd8457 has started in 37.9093 ms
2025-07-10 13:34:28.489 +07:00 [DBG] Execution loop Worker:9517e337 has started in 39.9561 ms
2025-07-10 13:34:28.492 +07:00 [DBG] Execution loop Worker:c437d56e has started in 43.2153 ms
2025-07-10 13:34:28.497 +07:00 [DBG] Execution loop Worker:342ce74f has started in 48.2488 ms
2025-07-10 13:34:28.500 +07:00 [DBG] Execution loop Worker:f8469faa has started in 50.6558 ms
2025-07-10 13:34:28.503 +07:00 [DBG] Execution loop Worker:c0027a6d has started in 53.9145 ms
2025-07-10 13:34:28.506 +07:00 [DBG] Execution loop Worker:8c5b844d has started in 57.2173 ms
2025-07-10 13:34:28.509 +07:00 [DBG] Execution loop Worker:9a2a19a4 has started in 60.5187 ms
2025-07-10 13:34:28.515 +07:00 [DBG] Execution loop Worker:b30ec6bc has started in 65.7741 ms
2025-07-10 13:34:28.517 +07:00 [DBG] Execution loop Worker:5f9dfb9c has started in 67.9023 ms
2025-07-10 13:34:28.520 +07:00 [DBG] Execution loop Worker:bec16c2f has started in 71.4364 ms
2025-07-10 13:34:28.524 +07:00 [DBG] Execution loop Worker:9f960f8a has started in 74.8272 ms
2025-07-10 13:34:28.525 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 13:34:28.559 +07:00 [DBG] Execution loop DelayedJobScheduler:3df2aa25 has started in 38.9263 ms
2025-07-10 13:34:28.562 +07:00 [INF] Server digi-tbhh2:25708:23aef94e all the dispatchers started
2025-07-10 13:34:28.562 +07:00 [DBG] Execution loop RecurringJobScheduler:2eed5563 has started in 38.8787 ms
2025-07-10 13:34:28.577 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 13:34:28.595 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 13:34:28.783 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 13:34:28.783 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 13:34:28.791 +07:00 [DBG] 1 scheduled job(s) processed by scheduler.
2025-07-10 13:34:28.820 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 44.49ms
2025-07-10 13:34:28.859 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 84.216ms
2025-07-10 13:34:28.888 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 13:34:28.920 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.9184ms
2025-07-10 13:34:29.123 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 13:34:29.204 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-07-10 13:34:29.212 +07:00 [INF] Processing job for RequestId: 15df4ed5-89d5-4b39-b7bd-b3df9a4d7f8d
2025-07-10 13:34:29.231 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:34:29.252 +07:00 [INF] Searching for file: Work.docx
2025-07-10 13:38:02.357 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 13:38:02.386 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 13:38:02.396 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 13:38:02.434 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 13:38:02.439 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 13:38:02.440 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 13:38:02.442 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 13:38:02.447 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 13:38:02.448 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 13:38:02.557 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 13:38:02.659 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 13:38:02.847 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 13:38:02.847 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 13:38:02.850 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 13:38:02.850 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 13:38:02.850 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 13:38:02.862 +07:00 [DBG] Execution loop BackgroundServerProcess:1b7c32d9 has started in 3.9869 ms
2025-07-10 13:38:02.865 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 13:38:02.865 +07:00 [INF] Hosting environment: Development
2025-07-10 13:38:02.866 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 13:38:02.872 +07:00 [INF] Server digi-tbhh2:25144:3b1a595a successfully announced in 7.7649 ms
2025-07-10 13:38:02.876 +07:00 [DBG] Execution loop ServerHeartbeatProcess:becaabe1 has started in 2.8944 ms
2025-07-10 13:38:02.876 +07:00 [INF] Server digi-tbhh2:25144:3b1a595a is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 13:38:02.879 +07:00 [DBG] Execution loop ServerWatchdog:c83cc7da has started in 3.2631 ms
2025-07-10 13:38:02.882 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:b6b6d9ff has started in 5.3727 ms
2025-07-10 13:38:02.885 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:ec45412d has started in 5.7782 ms
2025-07-10 13:38:02.888 +07:00 [DBG] Execution loop ExpirationManager:0464340c has started in 6.1681 ms
2025-07-10 13:38:02.890 +07:00 [DBG] Execution loop CountersAggregator:7d8a2d56 has started in 5.2322 ms
2025-07-10 13:38:02.892 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 13:38:02.894 +07:00 [DBG] Execution loop Worker:14059e38 has started in 5.7097 ms
2025-07-10 13:38:02.895 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 13:38:02.898 +07:00 [DBG] Execution loop Worker:eb36018d has started in 9.19 ms
2025-07-10 13:38:02.900 +07:00 [DBG] Execution loop Worker:56168486 has started in 12.462 ms
2025-07-10 13:38:02.902 +07:00 [DBG] Execution loop Worker:84347a1a has started in 14.2246 ms
2025-07-10 13:38:02.905 +07:00 [DBG] Execution loop Worker:8ff7eee5 has started in 16.8149 ms
2025-07-10 13:38:02.907 +07:00 [DBG] Execution loop Worker:4cf26961 has started in 19.3197 ms
2025-07-10 13:38:02.910 +07:00 [DBG] Execution loop Worker:d9c2aeb2 has started in 21.6881 ms
2025-07-10 13:38:02.912 +07:00 [DBG] Execution loop Worker:64670caf has started in 24.1417 ms
2025-07-10 13:38:02.913 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 13:38:02.916 +07:00 [DBG] Execution loop Worker:1affe15e has started in 27.8085 ms
2025-07-10 13:38:02.917 +07:00 [DBG] Execution loop Worker:3023026e has started in 29.3763 ms
2025-07-10 13:38:02.918 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 13:38:02.920 +07:00 [DBG] Execution loop Worker:23fffcca has started in 31.9798 ms
2025-07-10 13:38:02.922 +07:00 [DBG] Execution loop Worker:9a96dfb9 has started in 34.3245 ms
2025-07-10 13:38:02.925 +07:00 [DBG] Execution loop Worker:63b65c26 has started in 36.9343 ms
2025-07-10 13:38:02.928 +07:00 [DBG] Execution loop Worker:ce3e781d has started in 40.4866 ms
2025-07-10 13:38:02.930 +07:00 [DBG] Execution loop Worker:630231d9 has started in 41.9174 ms
2025-07-10 13:38:02.932 +07:00 [DBG] Execution loop Worker:bde5f128 has started in 44.4299 ms
2025-07-10 13:38:02.935 +07:00 [DBG] Execution loop Worker:26fb308b has started in 47.1279 ms
2025-07-10 13:38:02.940 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 13:38:02.940 +07:00 [DBG] Execution loop Worker:43f43e93 has started in 51.9399 ms
2025-07-10 13:38:02.941 +07:00 [DBG] Execution loop Worker:db30986e has started in 53.5641 ms
2025-07-10 13:38:02.944 +07:00 [DBG] Execution loop Worker:7c8598d7 has started in 56.3383 ms
2025-07-10 13:38:02.948 +07:00 [INF] Server digi-tbhh2:25144:3b1a595a all the dispatchers started
2025-07-10 13:38:02.948 +07:00 [DBG] Execution loop DelayedJobScheduler:15e9f92d has started in 6.7989 ms
2025-07-10 13:38:02.950 +07:00 [DBG] Execution loop RecurringJobScheduler:2eda020a has started in 6.1417 ms
2025-07-10 13:38:02.954 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 13:38:03.169 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/ - null null
2025-07-10 13:38:03.209 +07:00 [INF] Request from IP: ::1
2025-07-10 13:38:03.214 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/ - 404 0 null 45.4059ms
2025-07-10 13:38:03.222 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7024/, Response status code: 404
2025-07-10 13:39:03.454 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 13:39:03.491 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 13:39:03.502 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 13:39:03.559 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 13:39:03.568 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 13:39:03.570 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 13:39:03.574 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 13:39:03.580 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 13:39:03.582 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 13:39:03.726 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 13:39:03.866 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 13:39:04.137 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 13:39:04.138 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 13:39:04.220 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 13:39:04.222 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 13:39:04.223 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 13:39:04.235 +07:00 [DBG] Execution loop BackgroundServerProcess:1a9132b7 has started in 6.9855 ms
2025-07-10 13:39:04.243 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 13:39:04.244 +07:00 [INF] Hosting environment: Development
2025-07-10 13:39:04.245 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 13:39:04.255 +07:00 [INF] Server digi-tbhh2:14452:5caebd44 successfully announced in 11.537 ms
2025-07-10 13:39:04.296 +07:00 [DBG] Execution loop ServerHeartbeatProcess:97d12484 has started in 39.1347 ms
2025-07-10 13:39:04.296 +07:00 [INF] Server digi-tbhh2:14452:5caebd44 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 13:39:04.302 +07:00 [DBG] Execution loop ServerWatchdog:78660110 has started in 4.3584 ms
2025-07-10 13:39:04.305 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:d6fefed4 has started in 7.3548 ms
2025-07-10 13:39:04.308 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:d273cb64 has started in 6.3118 ms
2025-07-10 13:39:04.311 +07:00 [DBG] Execution loop ExpirationManager:3fdf883d has started in 6.085 ms
2025-07-10 13:39:04.314 +07:00 [DBG] Execution loop CountersAggregator:2d8ea47d has started in 5.6435 ms
2025-07-10 13:39:04.317 +07:00 [DBG] Execution loop Worker:bc468907 has started in 5.8331 ms
2025-07-10 13:39:04.333 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 13:39:04.322 +07:00 [DBG] Execution loop Worker:3fbd4cfa has started in 10.1973 ms
2025-07-10 13:39:04.340 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 13:39:04.324 +07:00 [DBG] Execution loop Worker:f0dde566 has started in 12.1776 ms
2025-07-10 13:39:04.330 +07:00 [DBG] Execution loop Worker:e1674809 has started in 18.3937 ms
2025-07-10 13:39:04.330 +07:00 [DBG] Execution loop Worker:c44dd333 has started in 18.398 ms
2025-07-10 13:39:04.331 +07:00 [DBG] Execution loop Worker:3c941124 has started in 20.1194 ms
2025-07-10 13:39:04.334 +07:00 [DBG] Execution loop Worker:0d39513a has started in 23.3294 ms
2025-07-10 13:39:04.338 +07:00 [DBG] Execution loop Worker:c763bf10 has started in 26.7845 ms
2025-07-10 13:39:04.342 +07:00 [DBG] Execution loop Worker:d257e89f has started in 30.8594 ms
2025-07-10 13:39:04.348 +07:00 [DBG] Execution loop Worker:4ff57e0c has started in 36.5351 ms
2025-07-10 13:39:04.350 +07:00 [DBG] Execution loop Worker:489b3784 has started in 38.4395 ms
2025-07-10 13:39:04.389 +07:00 [INF] Server digi-tbhh2:14452:5caebd44 all the dispatchers started
2025-07-10 13:39:04.390 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 13:39:04.353 +07:00 [DBG] Execution loop Worker:149b2806 has started in 41.6817 ms
2025-07-10 13:39:04.356 +07:00 [DBG] Execution loop Worker:32ec7de7 has started in 45.0754 ms
2025-07-10 13:39:04.363 +07:00 [DBG] Execution loop Worker:ce5c7c36 has started in 51.9779 ms
2025-07-10 13:39:04.365 +07:00 [DBG] Execution loop Worker:e55a97b0 has started in 54.3076 ms
2025-07-10 13:39:04.369 +07:00 [DBG] Execution loop Worker:80f0be45 has started in 57.8509 ms
2025-07-10 13:39:04.373 +07:00 [DBG] Execution loop Worker:a1d32472 has started in 61.6703 ms
2025-07-10 13:39:04.379 +07:00 [DBG] Execution loop Worker:5b66398e has started in 68.1579 ms
2025-07-10 13:39:04.382 +07:00 [DBG] Execution loop Worker:f00fa608 has started in 70.4073 ms
2025-07-10 13:39:04.406 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 13:39:04.387 +07:00 [DBG] Execution loop Worker:00397dc5 has started in 75.8791 ms
2025-07-10 13:39:04.389 +07:00 [DBG] Execution loop DelayedJobScheduler:3fd0d0ed has started in 7.7728 ms
2025-07-10 13:39:04.393 +07:00 [DBG] Execution loop RecurringJobScheduler:30ab125a has started in 7.2146 ms
2025-07-10 13:39:04.441 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 13:39:04.449 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 13:39:06.305 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 13:39:06.305 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 13:39:06.337 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 36.1359ms
2025-07-10 13:39:06.736 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 436.0238ms
2025-07-10 13:39:06.765 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 13:39:06.793 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 28.4459ms
2025-07-10 13:39:23.051 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------008433231097998312751480 16443
2025-07-10 13:39:23.067 +07:00 [INF] Request from IP: ::1
2025-07-10 13:39:23.070 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 13:39:23.086 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 13:39:23.388 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:39:23.424 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:39:23.541 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 13:39:23.613 +07:00 [INF] Enqueued job for RequestId: 2a53511c-b7b2-4cfd-bea0-ee92dd35455b
2025-07-10 13:39:23.629 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 13:39:23.642 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 552.1855ms
2025-07-10 13:39:23.644 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 13:39:23.653 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 602.7374ms
2025-07-10 13:39:23.761 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 13:39:23.774 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 13:39:23.779 +07:00 [INF] Processing job for RequestId: 2a53511c-b7b2-4cfd-bea0-ee92dd35455b
2025-07-10 13:39:23.781 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:39:23.788 +07:00 [INF] Searching for file: Work.docx
2025-07-10 13:40:04.117 +07:00 [DBG] Server digi-tbhh2:14452:5caebd44 heartbeat successfully sent
2025-07-10 13:40:04.125 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [ErrorMessage] = @p0, [LastUpdatedAt] = @p1, [Status] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-07-10 13:40:04.137 +07:00 [ERR] Job for RequestId: 2a53511c-b7b2-4cfd-bea0-ee92dd35455b failed.
System.NullReferenceException: Object reference not set to an instance of an object.
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 124
2025-07-10 13:40:21.531 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 13:40:21.535 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 13:40:21.535 +07:00 [WRN] Failed to process the job '20': an exception occurred. Retry attempt 1 of 3 will be performed in 00:00:35.
System.NullReferenceException: Object reference not set to an instance of an object.
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 124
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 165
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-07-10 13:40:21.536 +07:00 [INF] Processing job for RequestId: 44ebc917-b986-4e7c-8bac-20049feb7514
2025-07-10 13:40:21.540 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:40:21.542 +07:00 [INF] Searching for file: Work.docx
2025-07-10 13:40:32.338 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 13:40:32.341 +07:00 [ERR] Job for RequestId: 44ebc917-b986-4e7c-8bac-20049feb7514 failed.
System.NullReferenceException: Object reference not set to an instance of an object.
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 124
2025-07-10 13:40:34.775 +07:00 [DBG] Server digi-tbhh2:14452:5caebd44 heartbeat successfully sent
2025-07-10 13:40:34.780 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 13:40:34.783 +07:00 [WRN] Failed to process the job '19': an exception occurred. Retry attempt 2 of 3 will be performed in 00:00:56.
System.NullReferenceException: Object reference not set to an instance of an object.
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 124
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 165
   at InvokeStub_TaskAwaiter.GetResult(Object, Object, IntPtr*)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-07-10 13:40:34.783 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-07-10 13:40:34.786 +07:00 [INF] Processing job for RequestId: 15df4ed5-89d5-4b39-b7bd-b3df9a4d7f8d
2025-07-10 13:40:34.788 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:40:34.789 +07:00 [INF] Searching for file: Work.docx
2025-07-10 13:40:36.449 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 13:40:36.452 +07:00 [ERR] Job for RequestId: 15df4ed5-89d5-4b39-b7bd-b3df9a4d7f8d failed.
System.NullReferenceException: Object reference not set to an instance of an object.
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 124
2025-07-10 13:40:37.695 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 13:40:37.698 +07:00 [WRN] Failed to process the job '18': an exception occurred. Retry attempt 2 of 3 will be performed in 00:00:34.
System.NullReferenceException: Object reference not set to an instance of an object.
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 124
   at pviBase.Services.InsuranceService.ProcessCreateInsuranceContractsJob(String requestId, CreateContractRequestDto request) in C:\Users\ADMIN\source\repos\pviBase\Services\InsuranceService.cs:line 165
   at InvokeStub_TaskAwaiter.GetResult(Object, Object, IntPtr*)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-07-10 13:40:37.699 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 13:40:37.702 +07:00 [INF] Processing job for RequestId: 05d6024e-963d-4a16-b0e3-06f73f7f3318
2025-07-10 13:40:37.705 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:40:37.707 +07:00 [INF] Searching for file: Work.docx
2025-07-10 13:42:54.042 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 13:42:54.076 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 13:42:54.089 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 13:42:54.133 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 13:42:54.140 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 13:42:54.143 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 13:42:54.146 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 13:42:54.152 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 13:42:54.154 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 13:42:54.279 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 13:42:54.409 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 13:42:54.698 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 13:42:54.699 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 13:42:54.774 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 13:42:54.776 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 13:42:54.777 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 13:42:54.788 +07:00 [DBG] Execution loop BackgroundServerProcess:72554c5a has started in 5.5092 ms
2025-07-10 13:42:54.796 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 13:42:54.797 +07:00 [INF] Hosting environment: Development
2025-07-10 13:42:54.798 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 13:42:54.806 +07:00 [INF] Server digi-tbhh2:28588:d86badc1 successfully announced in 10.4564 ms
2025-07-10 13:42:54.812 +07:00 [DBG] Execution loop ServerHeartbeatProcess:bd61df43 has started in 3.7532 ms
2025-07-10 13:42:54.812 +07:00 [INF] Server digi-tbhh2:28588:d86badc1 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 13:42:54.816 +07:00 [DBG] Execution loop ServerWatchdog:2305af20 has started in 3.1675 ms
2025-07-10 13:42:54.822 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:d9732b78 has started in 5.3489 ms
2025-07-10 13:42:54.819 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:af8f9012 has started in 5.3176 ms
2025-07-10 13:42:54.824 +07:00 [DBG] Execution loop ExpirationManager:835e83de has started in 5.4427 ms
2025-07-10 13:42:54.827 +07:00 [DBG] Execution loop CountersAggregator:122e201a has started in 5.2146 ms
2025-07-10 13:42:54.839 +07:00 [INF] 1 servers were removed due to timeout
2025-07-10 13:42:54.844 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 13:42:54.847 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 13:42:54.832 +07:00 [DBG] Execution loop Worker:45fcd015 has started in 7.8516 ms
2025-07-10 13:42:54.834 +07:00 [DBG] Execution loop Worker:1546a3f9 has started in 9.5338 ms
2025-07-10 13:42:54.866 +07:00 [DBG] Execution loop Worker:065f0518 has started in 41.3144 ms
2025-07-10 13:42:54.839 +07:00 [DBG] Execution loop Worker:1ba6425d has started in 13.2299 ms
2025-07-10 13:42:54.840 +07:00 [DBG] Execution loop Worker:ab5e519e has started in 15.9242 ms
2025-07-10 13:42:54.843 +07:00 [DBG] Execution loop Worker:9138c772 has started in 18.7385 ms
2025-07-10 13:42:54.897 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 13:42:54.846 +07:00 [DBG] Execution loop Worker:c994a51b has started in 21.9782 ms
2025-07-10 13:42:54.849 +07:00 [DBG] Execution loop Worker:2ed2cc86 has started in 24.7926 ms
2025-07-10 13:42:54.915 +07:00 [INF] Server digi-tbhh2:28588:d86badc1 all the dispatchers started
2025-07-10 13:42:54.852 +07:00 [DBG] Execution loop Worker:a96b2cdb has started in 27.98 ms
2025-07-10 13:42:54.855 +07:00 [DBG] Execution loop Worker:f6a48070 has started in 30.984 ms
2025-07-10 13:42:54.858 +07:00 [DBG] Execution loop Worker:9dbe99af has started in 34.1318 ms
2025-07-10 13:42:54.862 +07:00 [DBG] Execution loop Worker:fa830136 has started in 37.7467 ms
2025-07-10 13:42:54.871 +07:00 [DBG] Execution loop Worker:d457885c has started in 47.0273 ms
2025-07-10 13:42:54.873 +07:00 [DBG] Execution loop Worker:7ecb463a has started in 49.152 ms
2025-07-10 13:42:54.883 +07:00 [DBG] Execution loop Worker:8f5f6e5f has started in 58.4323 ms
2025-07-10 13:42:54.888 +07:00 [DBG] Execution loop Worker:4e78cb30 has started in 63.144 ms
2025-07-10 13:42:54.895 +07:00 [DBG] Execution loop Worker:10c1241a has started in 70.7336 ms
2025-07-10 13:42:54.902 +07:00 [DBG] Execution loop Worker:d031047d has started in 77.4408 ms
2025-07-10 13:42:54.941 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 13:42:54.905 +07:00 [DBG] Execution loop Worker:ca43eb21 has started in 80.825 ms
2025-07-10 13:42:54.911 +07:00 [DBG] Execution loop Worker:6f5313cb has started in 86.7722 ms
2025-07-10 13:42:54.917 +07:00 [DBG] Execution loop DelayedJobScheduler:be4f09c1 has started in 11.3697 ms
2025-07-10 13:42:54.920 +07:00 [DBG] Execution loop RecurringJobScheduler:06038974 has started in 10.5624 ms
2025-07-10 13:42:54.951 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 13:42:54.959 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 13:42:55.123 +07:00 [DBG] 3 scheduled job(s) processed by scheduler.
2025-07-10 13:42:55.424 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 13:42:55.424 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 13:42:55.459 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 41.3431ms
2025-07-10 13:42:55.499 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 81.5897ms
2025-07-10 13:42:55.505 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 13:42:55.528 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 13:42:55.556 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 28.6685ms
2025-07-10 13:42:55.798 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 13:42:55.809 +07:00 [INF] Processing job for RequestId: 2a53511c-b7b2-4cfd-bea0-ee92dd35455b
2025-07-10 13:42:55.835 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:42:55.859 +07:00 [INF] Searching for file: Work.docx
2025-07-10 13:42:55.860 +07:00 [INF] No file matched for LoanNo: thinh10
2025-07-10 13:42:56.115 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 13:42:56.126 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [ErrorMessage] = @p0, [LastUpdatedAt] = @p1, [Status] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-07-10 13:42:56.127 +07:00 [INF] Job for RequestId: 2a53511c-b7b2-4cfd-bea0-ee92dd35455b completed successfully.
2025-07-10 13:42:56.173 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 13:42:56.176 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 13:42:56.179 +07:00 [INF] Processing job for RequestId: 15df4ed5-89d5-4b39-b7bd-b3df9a4d7f8d
2025-07-10 13:42:56.181 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:42:56.183 +07:00 [INF] Searching for file: Work.docx
2025-07-10 13:42:56.184 +07:00 [INF] No file matched for LoanNo: thinh8
2025-07-10 13:42:56.187 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 13:42:56.189 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [ErrorMessage] = @p0, [LastUpdatedAt] = @p1, [Status] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-07-10 13:42:56.191 +07:00 [INF] Job for RequestId: 15df4ed5-89d5-4b39-b7bd-b3df9a4d7f8d completed successfully.
2025-07-10 13:42:56.196 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 13:42:56.199 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 13:42:56.200 +07:00 [INF] Processing job for RequestId: 44ebc917-b986-4e7c-8bac-20049feb7514
2025-07-10 13:42:56.202 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:42:56.205 +07:00 [INF] Searching for file: Work.docx
2025-07-10 13:42:56.206 +07:00 [INF] No file matched for LoanNo: thinh9
2025-07-10 13:42:56.209 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 13:42:56.212 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [ErrorMessage] = @p0, [LastUpdatedAt] = @p1, [Status] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-07-10 13:42:56.214 +07:00 [INF] Job for RequestId: 44ebc917-b986-4e7c-8bac-20049feb7514 completed successfully.
2025-07-10 13:43:02.560 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------164668471053201273400660 16443
2025-07-10 13:43:02.584 +07:00 [INF] Request from IP: ::1
2025-07-10 13:43:02.587 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 13:43:02.603 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 13:43:02.651 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:43:02.658 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:43:02.686 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 13:43:02.720 +07:00 [INF] Enqueued job for RequestId: 2f761d25-1de3-4eb0-95ef-81f2dda040de
2025-07-10 13:43:02.730 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 13:43:02.736 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 13:43:02.741 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 13:43:02.743 +07:00 [INF] Processing job for RequestId: 2f761d25-1de3-4eb0-95ef-81f2dda040de
2025-07-10 13:43:02.746 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:43:02.747 +07:00 [INF] Searching for file: Work.docx
2025-07-10 13:43:02.748 +07:00 [INF] No file matched for LoanNo: thinh11
2025-07-10 13:43:02.751 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 13:43:02.752 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 144.5406ms
2025-07-10 13:43:02.754 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 13:43:02.755 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 13:43:02.756 +07:00 [INF] Job for RequestId: 2f761d25-1de3-4eb0-95ef-81f2dda040de completed successfully.
2025-07-10 13:43:02.765 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 205.5778ms
2025-07-10 13:43:24.832 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:43:54.849 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:44:24.872 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:44:54.879 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:45:04.249 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 13:45:04.257 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-07-10 13:45:04.259 +07:00 [INF] Processing job for RequestId: 05d6024e-963d-4a16-b0e3-06f73f7f3318
2025-07-10 13:45:04.260 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:45:04.262 +07:00 [INF] Searching for file: Work.docx
2025-07-10 13:45:04.263 +07:00 [INF] No file matched for LoanNo: thinh7
2025-07-10 13:45:04.266 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 13:45:04.269 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [ErrorMessage] = @p0, [LastUpdatedAt] = @p1, [Status] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-07-10 13:45:04.270 +07:00 [INF] Job for RequestId: 05d6024e-963d-4a16-b0e3-06f73f7f3318 completed successfully.
2025-07-10 13:45:10.995 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------572444006717681670404111 16443
2025-07-10 13:45:10.999 +07:00 [INF] Request from IP: ::1
2025-07-10 13:45:11.000 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 13:45:11.001 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 13:45:11.006 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:45:11.010 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:45:11.014 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 13:45:11.025 +07:00 [INF] Enqueued job for RequestId: c37e7438-4017-44c1-be3d-6083e7d6ab0b
2025-07-10 13:45:11.026 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 13:45:11.028 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 25.7891ms
2025-07-10 13:45:11.029 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 13:45:11.031 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 36.0563ms
2025-07-10 13:45:11.035 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 13:45:11.039 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 13:45:11.040 +07:00 [INF] Processing job for RequestId: c37e7438-4017-44c1-be3d-6083e7d6ab0b
2025-07-10 13:45:11.042 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:45:11.044 +07:00 [INF] Searching for file: Work.docx
2025-07-10 13:45:11.045 +07:00 [INF] No file matched for LoanNo: thinh12
2025-07-10 13:45:11.048 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 13:45:11.051 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 13:45:11.053 +07:00 [INF] Job for RequestId: c37e7438-4017-44c1-be3d-6083e7d6ab0b completed successfully.
2025-07-10 13:45:24.897 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:45:54.914 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:46:24.935 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:46:54.950 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:47:24.970 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:47:54.865 +07:00 [INF] 2 servers were removed due to timeout
2025-07-10 13:47:54.891 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 13:47:54.984 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:48:25.000 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:48:55.014 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:49:25.021 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:49:55.033 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:50:25.041 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:50:55.045 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:51:25.063 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:51:55.070 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:52:25.086 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:52:54.920 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 13:52:55.095 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:53:25.111 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:53:55.128 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:54:25.141 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:54:55.154 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:55:25.171 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:55:55.176 +07:00 [DBG] Server digi-tbhh2:28588:d86badc1 heartbeat successfully sent
2025-07-10 13:56:30.104 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 13:56:30.137 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 13:56:30.147 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 13:56:30.188 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 13:56:30.195 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 13:56:30.197 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 13:56:30.200 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 13:56:30.205 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 13:56:30.207 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 13:56:30.411 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 13:56:30.516 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 13:56:30.795 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 13:56:30.795 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 13:56:30.872 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 13:56:30.875 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 13:56:30.876 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 13:56:30.886 +07:00 [DBG] Execution loop BackgroundServerProcess:278f59da has started in 5.1847 ms
2025-07-10 13:56:30.893 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 13:56:30.893 +07:00 [INF] Hosting environment: Development
2025-07-10 13:56:30.894 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 13:56:30.901 +07:00 [INF] Server digi-tbhh2:21044:07970cf4 successfully announced in 8.981 ms
2025-07-10 13:56:30.907 +07:00 [DBG] Execution loop ServerHeartbeatProcess:51401246 has started in 4.3553 ms
2025-07-10 13:56:30.907 +07:00 [INF] Server digi-tbhh2:21044:07970cf4 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 13:56:30.916 +07:00 [DBG] Execution loop ServerWatchdog:fec64bab has started in 6.3706 ms
2025-07-10 13:56:30.918 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:ac56a8e3 has started in 8.3301 ms
2025-07-10 13:56:30.923 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:0565b0b8 has started in 7.4876 ms
2025-07-10 13:56:30.928 +07:00 [DBG] Execution loop ExpirationManager:842759df has started in 8.3857 ms
2025-07-10 13:56:30.932 +07:00 [DBG] Execution loop CountersAggregator:0248a7f7 has started in 8.5984 ms
2025-07-10 13:56:30.936 +07:00 [DBG] Execution loop Worker:dfade5f9 has started in 8.4642 ms
2025-07-10 13:56:30.940 +07:00 [DBG] Execution loop Worker:a1734ff7 has started in 11.7497 ms
2025-07-10 13:56:30.944 +07:00 [DBG] Execution loop Worker:9bd8c890 has started in 15.5543 ms
2025-07-10 13:56:30.949 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 13:56:30.953 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 13:56:30.949 +07:00 [DBG] Execution loop Worker:8551111c has started in 20.5602 ms
2025-07-10 13:56:30.952 +07:00 [DBG] Execution loop Worker:019a1d94 has started in 24.4084 ms
2025-07-10 13:56:30.958 +07:00 [DBG] Execution loop Worker:8a642db9 has started in 29.8608 ms
2025-07-10 13:56:30.960 +07:00 [DBG] Execution loop Worker:a5d7d2ca has started in 31.6566 ms
2025-07-10 13:56:30.963 +07:00 [DBG] Execution loop Worker:9d71629d has started in 35.136 ms
2025-07-10 13:56:30.966 +07:00 [DBG] Execution loop Worker:c4c8b2c8 has started in 37.9471 ms
2025-07-10 13:56:30.969 +07:00 [DBG] Execution loop Worker:f7e2994d has started in 40.9545 ms
2025-07-10 13:56:30.972 +07:00 [DBG] Execution loop Worker:84df059c has started in 44.3858 ms
2025-07-10 13:56:30.975 +07:00 [DBG] Execution loop Worker:b7ae724c has started in 47.2909 ms
2025-07-10 13:56:30.978 +07:00 [DBG] Execution loop Worker:e92b3070 has started in 50.3566 ms
2025-07-10 13:56:30.984 +07:00 [DBG] Execution loop Worker:6a0e8ce5 has started in 55.9001 ms
2025-07-10 13:56:31.004 +07:00 [INF] Server digi-tbhh2:21044:07970cf4 all the dispatchers started
2025-07-10 13:56:30.998 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 13:56:30.986 +07:00 [DBG] Execution loop Worker:3c601279 has started in 58.0768 ms
2025-07-10 13:56:30.992 +07:00 [DBG] Execution loop Worker:c5d0ee37 has started in 63.7638 ms
2025-07-10 13:56:30.992 +07:00 [DBG] Execution loop Worker:64eb000f has started in 63.7655 ms
2025-07-10 13:56:30.993 +07:00 [DBG] Execution loop Worker:41c46468 has started in 65.5928 ms
2025-07-10 13:56:30.997 +07:00 [DBG] Execution loop Worker:32d6a3ee has started in 69.2828 ms
2025-07-10 13:56:31.000 +07:00 [DBG] Execution loop Worker:b6f65a9b has started in 72.3461 ms
2025-07-10 13:56:31.004 +07:00 [DBG] Execution loop DelayedJobScheduler:7e24de5d has started in 6.6292 ms
2025-07-10 13:56:31.008 +07:00 [DBG] Execution loop RecurringJobScheduler:8f1fb2f0 has started in 7.3462 ms
2025-07-10 13:56:31.137 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 13:56:31.140 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 13:56:31.143 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 13:56:31.297 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 13:56:31.297 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 13:56:31.327 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 35.6099ms
2025-07-10 13:56:31.365 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 74.4564ms
2025-07-10 13:56:31.398 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 13:56:31.424 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 26.2594ms
2025-07-10 13:56:46.168 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------841592687865099334897055 16443
2025-07-10 13:56:46.184 +07:00 [INF] Request from IP: ::1
2025-07-10 13:56:46.187 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 13:56:46.208 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 13:56:46.503 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:56:46.537 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:56:46.649 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 13:56:46.716 +07:00 [INF] Enqueued job for RequestId: 41aa888b-5d6d-449e-a8d1-1f16dc2d5de4
2025-07-10 13:56:46.725 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 13:56:46.747 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 535.5308ms
2025-07-10 13:56:46.748 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 13:56:46.758 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 589.9358ms
2025-07-10 13:56:46.871 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 13:56:46.885 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 13:56:46.889 +07:00 [INF] Processing job for RequestId: 41aa888b-5d6d-449e-a8d1-1f16dc2d5de4
2025-07-10 13:56:46.890 +07:00 [INF] Tng s file upload: 0
2025-07-10 13:56:46.891 +07:00 [INF] ang x l LoanNo: thinh13, attachmentFileName: Work.docx
2025-07-10 13:56:46.892 +07:00 [WRN] Khng tm thy file trng tn: Work.docx trong danh sch upload.
2025-07-10 13:56:46.898 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:56:46.904 +07:00 [INF] Searching for file: Work.docx
2025-07-10 13:56:46.905 +07:00 [INF] No file matched for LoanNo: thinh13
2025-07-10 13:56:47.142 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 13:56:47.147 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 13:56:47.148 +07:00 [INF] Job for RequestId: 41aa888b-5d6d-449e-a8d1-1f16dc2d5de4 completed successfully.
2025-07-10 13:57:00.923 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 13:57:13.037 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------498360154613626668909597 16443
2025-07-10 13:57:13.048 +07:00 [INF] Request from IP: ::1
2025-07-10 13:57:13.049 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 13:57:13.050 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 13:57:13.056 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:57:13.061 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:57:13.072 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 13:57:13.079 +07:00 [INF] Enqueued job for RequestId: a61a040e-2d50-45b9-a1d9-4cd068d37479
2025-07-10 13:57:13.080 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 13:57:13.082 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 31.5816ms
2025-07-10 13:57:13.083 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 13:57:13.084 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 48.4604ms
2025-07-10 13:57:13.087 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 13:57:13.091 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 13:57:13.092 +07:00 [INF] Processing job for RequestId: a61a040e-2d50-45b9-a1d9-4cd068d37479
2025-07-10 13:57:13.093 +07:00 [INF] Tng s file upload: 0
2025-07-10 13:57:13.094 +07:00 [INF] ang x l LoanNo: thinh14, attachmentFileName: Work.docx
2025-07-10 13:57:13.094 +07:00 [WRN] Khng tm thy file trng tn: Work.docx trong danh sch upload.
2025-07-10 13:57:13.096 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:57:13.099 +07:00 [INF] Searching for file: Work.docx
2025-07-10 13:57:13.099 +07:00 [INF] No file matched for LoanNo: thinh14
2025-07-10 13:57:13.102 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 13:57:13.105 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 13:57:13.107 +07:00 [INF] Job for RequestId: a61a040e-2d50-45b9-a1d9-4cd068d37479 completed successfully.
2025-07-10 13:57:30.939 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 13:58:00.953 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 13:58:30.961 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 13:59:00.965 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 13:59:29.856 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------642260395381512091515219 16443
2025-07-10 13:59:29.862 +07:00 [INF] Request from IP: ::1
2025-07-10 13:59:29.863 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 13:59:29.864 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 13:59:29.871 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:59:29.880 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:59:29.884 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 13:59:29.893 +07:00 [INF] Enqueued job for RequestId: 6bae1cef-0bbf-49d3-884f-80f3bbc01054
2025-07-10 13:59:29.893 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 13:59:29.895 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 29.5663ms
2025-07-10 13:59:29.896 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 13:59:29.898 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 42.5979ms
2025-07-10 13:59:29.902 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 13:59:29.905 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 13:59:29.907 +07:00 [INF] Processing job for RequestId: 6bae1cef-0bbf-49d3-884f-80f3bbc01054
2025-07-10 13:59:29.907 +07:00 [INF] Tng s file upload: 0
2025-07-10 13:59:29.908 +07:00 [INF] ang x l LoanNo: thinh15, attachmentFileName: Work.docx
2025-07-10 13:59:29.908 +07:00 [WRN] Khng tm thy file trng tn: Work.docx trong danh sch upload.
2025-07-10 13:59:29.910 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 13:59:29.912 +07:00 [INF] Searching for file: Work.docx
2025-07-10 13:59:29.912 +07:00 [INF] No file matched for LoanNo: thinh15
2025-07-10 13:59:29.916 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 13:59:29.919 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 13:59:29.920 +07:00 [INF] Job for RequestId: 6bae1cef-0bbf-49d3-884f-80f3bbc01054 completed successfully.
2025-07-10 13:59:30.974 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:00:00.985 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:00:30.989 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:01:01.004 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:01:30.939 +07:00 [INF] 1 servers were removed due to timeout
2025-07-10 14:01:30.999 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 14:01:31.015 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:01:41.423 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------640763051849704391726190 16442
2025-07-10 14:01:41.431 +07:00 [INF] Request from IP: ::1
2025-07-10 14:01:41.432 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 14:01:41.433 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 14:01:41.438 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:01:41.447 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'pviBase.Dtos.ApiResponse'.
2025-07-10 14:01:41.453 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 18.7793ms
2025-07-10 14:01:41.453 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 14:01:41.454 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 400 195 application/json; charset=utf-8 31.22ms
2025-07-10 14:01:51.437 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------668188193824735297760134 16442
2025-07-10 14:01:51.441 +07:00 [INF] Request from IP: ::1
2025-07-10 14:01:51.442 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 14:01:51.443 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 14:01:51.448 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:01:51.451 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:01:51.455 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 14:01:51.465 +07:00 [INF] Enqueued job for RequestId: e248e6c4-a316-42cb-b3b4-3a0fb1e7c75f
2025-07-10 14:01:51.466 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 14:01:51.467 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 22.6604ms
2025-07-10 14:01:51.468 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 14:01:51.469 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 31.996ms
2025-07-10 14:01:51.475 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 14:01:51.478 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 14:01:51.480 +07:00 [INF] Processing job for RequestId: e248e6c4-a316-42cb-b3b4-3a0fb1e7c75f
2025-07-10 14:01:51.481 +07:00 [INF] Tng s file upload: 0
2025-07-10 14:01:51.481 +07:00 [INF] ang x l LoanNo: thinh16, attachmentFileName: Work.docx
2025-07-10 14:01:51.482 +07:00 [WRN] Khng tm thy file trng tn: Work.docx trong danh sch upload.
2025-07-10 14:01:51.484 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:01:51.486 +07:00 [INF] Searching for file: Work.docx
2025-07-10 14:01:51.487 +07:00 [INF] No file matched for LoanNo: thinh16
2025-07-10 14:01:51.490 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 14:01:51.492 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 14:01:51.494 +07:00 [INF] Job for RequestId: e248e6c4-a316-42cb-b3b4-3a0fb1e7c75f completed successfully.
2025-07-10 14:02:01.024 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:02:31.028 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:03:01.044 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:03:31.062 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:04:01.084 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:04:31.104 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:05:01.123 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:05:31.141 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:06:01.154 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:06:31.033 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 14:06:31.164 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:07:01.172 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:07:31.190 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:08:01.202 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:08:31.210 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:09:01.225 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:09:31.239 +07:00 [DBG] Server digi-tbhh2:21044:07970cf4 heartbeat successfully sent
2025-07-10 14:09:42.758 +07:00 [WRN] Stopping the server due to DomainUnload or ProcessExit event...
2025-07-10 14:09:42.759 +07:00 [INF] Server digi-tbhh2:21044:07970cf4 caught stopping signal...
2025-07-10 14:09:42.761 +07:00 [DBG] Execution loop CountersAggregator:0248a7f7 stopped in 0 ms
2025-07-10 14:09:42.762 +07:00 [DBG] Execution loop ServerWatchdog:fec64bab stopped in 0 ms
2025-07-10 14:09:42.764 +07:00 [INF] Server digi-tbhh2:21044:07970cf4 caught stopped signal...
2025-07-10 14:09:42.762 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:ac56a8e3 stopped in 0 ms
2025-07-10 14:09:42.768 +07:00 [WRN] Server digi-tbhh2:21044:07970cf4 caught shutdown signal...
2025-07-10 14:09:42.762 +07:00 [DBG] Execution loop ExpirationManager:842759df stopped in 0 ms
2025-07-10 14:09:42.771 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:0565b0b8 stopped in 8.0374 ms
2025-07-10 14:09:42.772 +07:00 [DBG] Execution loop ServerHeartbeatProcess:51401246 stopped in 0.2873 ms
2025-07-10 14:09:42.772 +07:00 [WRN] Server digi-tbhh2:21044:07970cf4 stopped non-gracefully due to SqlServerHeartbeatProcess, ExpirationManager, Worker, DelayedJobScheduler, RecurringJobScheduler. Outstanding work on those dispatchers could be aborted, and there can be delays in background processing. This server instance will be incorrectly shown as active for a while. To avoid non-graceful shutdowns, investigate what prevents from stopping gracefully and add CancellationToken support for those methods.
2025-07-10 14:09:42.763 +07:00 [DBG] Execution loop Worker:dfade5f9 stopped in 0 ms
2025-07-10 14:09:42.763 +07:00 [DBG] Execution loop Worker:a1734ff7 stopped in 0 ms
2025-07-10 14:09:42.763 +07:00 [DBG] Execution loop Worker:9bd8c890 stopped in 0 ms
2025-07-10 14:09:42.771 +07:00 [DBG] Execution loop Worker:8551111c stopped in 7.3656 ms
2025-07-10 14:09:42.764 +07:00 [DBG] Execution loop Worker:019a1d94 stopped in 0.6359 ms
2025-07-10 14:09:42.763 +07:00 [DBG] Execution loop Worker:8a642db9 stopped in 0 ms
2025-07-10 14:09:42.764 +07:00 [DBG] Execution loop Worker:a5d7d2ca stopped in 0.8052 ms
2025-07-10 14:09:42.762 +07:00 [DBG] Execution loop Worker:9d71629d stopped in 0 ms
2025-07-10 14:09:42.764 +07:00 [DBG] Execution loop Worker:c4c8b2c8 stopped in 0.2709 ms
2025-07-10 14:09:42.764 +07:00 [DBG] Execution loop Worker:f7e2994d stopped in 0.4746 ms
2025-07-10 14:09:42.779 +07:00 [INF] Server digi-tbhh2:21044:07970cf4 successfully reported itself as stopped in 2.6516 ms
2025-07-10 14:09:42.764 +07:00 [DBG] Execution loop Worker:84df059c stopped in 0.413 ms
2025-07-10 14:09:42.765 +07:00 [DBG] Execution loop Worker:b7ae724c stopped in 1.4444 ms
2025-07-10 14:09:42.780 +07:00 [INF] Server digi-tbhh2:21044:07970cf4 has been stopped in total 16.2445 ms
2025-07-10 14:09:42.764 +07:00 [DBG] Execution loop Worker:e92b3070 stopped in 0.9659 ms
2025-07-10 14:09:42.765 +07:00 [DBG] Execution loop Worker:6a0e8ce5 stopped in 1.5879 ms
2025-07-10 14:09:42.781 +07:00 [DBG] Execution loop BackgroundServerProcess:278f59da stopped in 17.7872 ms
2025-07-10 14:09:51.529 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 14:09:51.584 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 14:09:51.596 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 14:09:51.659 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 14:09:51.669 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 14:09:51.672 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 14:09:51.680 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 14:09:51.688 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 14:09:51.689 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 14:09:51.892 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 14:09:51.993 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 14:09:52.263 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 14:09:52.264 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 14:09:52.336 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 14:09:52.337 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 14:09:52.338 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 14:09:52.348 +07:00 [DBG] Execution loop BackgroundServerProcess:af95a839 has started in 5.4683 ms
2025-07-10 14:09:52.354 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 14:09:52.355 +07:00 [INF] Hosting environment: Development
2025-07-10 14:09:52.355 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 14:09:52.361 +07:00 [INF] Server digi-tbhh2:19260:319b16f3 successfully announced in 7.3928 ms
2025-07-10 14:09:52.366 +07:00 [DBG] Execution loop ServerHeartbeatProcess:29f07b2a has started in 3.1636 ms
2025-07-10 14:09:52.366 +07:00 [INF] Server digi-tbhh2:19260:319b16f3 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 14:09:52.370 +07:00 [DBG] Execution loop ServerWatchdog:10f848c7 has started in 2.7843 ms
2025-07-10 14:09:52.372 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:a2c9f0b3 has started in 4.8666 ms
2025-07-10 14:09:52.375 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:c3df3e91 has started in 4.9945 ms
2025-07-10 14:09:52.378 +07:00 [DBG] Execution loop ExpirationManager:7989037d has started in 5.1532 ms
2025-07-10 14:09:52.380 +07:00 [DBG] Execution loop CountersAggregator:92291202 has started in 4.888 ms
2025-07-10 14:09:52.384 +07:00 [DBG] Execution loop Worker:47fe19e6 has started in 6.4502 ms
2025-07-10 14:09:52.386 +07:00 [DBG] Execution loop Worker:4f3fb410 has started in 8.2469 ms
2025-07-10 14:09:52.401 +07:00 [DBG] Execution loop Worker:268802d8 has started in 23.2565 ms
2025-07-10 14:09:52.398 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 14:09:52.395 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 14:09:52.413 +07:00 [DBG] Execution loop Worker:5d6ca507 has started in 35.8137 ms
2025-07-10 14:09:52.389 +07:00 [DBG] Execution loop Worker:2ae56bd4 has started in 11.1164 ms
2025-07-10 14:09:52.391 +07:00 [DBG] Execution loop Worker:9e0b9cb1 has started in 13.6623 ms
2025-07-10 14:09:52.395 +07:00 [DBG] Execution loop Worker:d6237f2d has started in 17.5774 ms
2025-07-10 14:09:52.397 +07:00 [DBG] Execution loop Worker:3ecfb637 has started in 19.4461 ms
2025-07-10 14:09:52.435 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 14:09:52.404 +07:00 [DBG] Execution loop Worker:2284a551 has started in 26.2899 ms
2025-07-10 14:09:52.407 +07:00 [DBG] Execution loop Worker:cd086fc5 has started in 29.2483 ms
2025-07-10 14:09:52.450 +07:00 [INF] Server digi-tbhh2:19260:319b16f3 all the dispatchers started
2025-07-10 14:09:52.410 +07:00 [DBG] Execution loop Worker:6360c640 has started in 32.1541 ms
2025-07-10 14:09:52.418 +07:00 [DBG] Execution loop Worker:adba91d8 has started in 40.2315 ms
2025-07-10 14:09:52.420 +07:00 [DBG] Execution loop Worker:71d1087b has started in 42.5311 ms
2025-07-10 14:09:52.425 +07:00 [DBG] Execution loop Worker:3d819767 has started in 47.2826 ms
2025-07-10 14:09:52.428 +07:00 [DBG] Execution loop Worker:40510edb has started in 50.356 ms
2025-07-10 14:09:52.433 +07:00 [DBG] Execution loop Worker:e08d053e has started in 55.7537 ms
2025-07-10 14:09:52.435 +07:00 [DBG] Execution loop Worker:0c9acca7 has started in 57.9015 ms
2025-07-10 14:09:52.462 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 14:09:52.439 +07:00 [DBG] Execution loop Worker:122c302b has started in 61.4371 ms
2025-07-10 14:09:52.442 +07:00 [DBG] Execution loop Worker:8f3a96da has started in 64.7246 ms
2025-07-10 14:09:52.446 +07:00 [DBG] Execution loop Worker:507e7de9 has started in 68.6452 ms
2025-07-10 14:09:52.450 +07:00 [DBG] Execution loop DelayedJobScheduler:7e1f2ffd has started in 8.0961 ms
2025-07-10 14:09:52.475 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 14:09:52.454 +07:00 [DBG] Execution loop RecurringJobScheduler:db823f2f has started in 7.6533 ms
2025-07-10 14:09:52.484 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 14:09:52.799 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 14:09:52.799 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 14:09:52.827 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 32.6766ms
2025-07-10 14:09:52.862 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 69.1437ms
2025-07-10 14:09:52.891 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 14:09:52.923 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.576ms
2025-07-10 14:10:05.840 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------939906258625038443654125 16442
2025-07-10 14:10:05.858 +07:00 [INF] Request from IP: ::1
2025-07-10 14:10:05.862 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 14:10:05.879 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 14:10:06.228 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:10:06.264 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:10:06.389 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 14:10:06.460 +07:00 [INF] Enqueued job for RequestId: e22ee71d-9b84-4d96-9592-641d813b9081
2025-07-10 14:10:06.474 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 14:10:06.492 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 608.1553ms
2025-07-10 14:10:06.493 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 14:10:06.508 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 668.0544ms
2025-07-10 14:10:06.633 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 14:10:06.644 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 14:10:06.648 +07:00 [INF] Processing job for RequestId: e22ee71d-9b84-4d96-9592-641d813b9081
2025-07-10 14:10:06.649 +07:00 [INF] Tng s file upload: 0
2025-07-10 14:10:06.650 +07:00 [INF] ang x l LoanNo: thinh17, attachmentFileName: Work.docx
2025-07-10 14:10:06.651 +07:00 [WRN] Khng tm thy file trng tn: Work.docx trong danh sch upload.
2025-07-10 14:10:06.653 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:10:06.661 +07:00 [INF] Searching for file: Work.docx
2025-07-10 14:10:06.662 +07:00 [INF] No file matched for LoanNo: thinh17
2025-07-10 14:10:06.909 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 14:10:06.915 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 14:10:06.916 +07:00 [INF] Job for RequestId: e22ee71d-9b84-4d96-9592-641d813b9081 completed successfully.
2025-07-10 14:10:22.392 +07:00 [DBG] Server digi-tbhh2:19260:319b16f3 heartbeat successfully sent
2025-07-10 14:10:52.408 +07:00 [DBG] Server digi-tbhh2:19260:319b16f3 heartbeat successfully sent
2025-07-10 14:11:22.425 +07:00 [DBG] Server digi-tbhh2:19260:319b16f3 heartbeat successfully sent
2025-07-10 14:11:52.443 +07:00 [DBG] Server digi-tbhh2:19260:319b16f3 heartbeat successfully sent
2025-07-10 14:12:22.458 +07:00 [DBG] Server digi-tbhh2:19260:319b16f3 heartbeat successfully sent
2025-07-10 14:12:52.470 +07:00 [DBG] Server digi-tbhh2:19260:319b16f3 heartbeat successfully sent
2025-07-10 14:13:22.475 +07:00 [DBG] Server digi-tbhh2:19260:319b16f3 heartbeat successfully sent
2025-07-10 14:13:52.481 +07:00 [DBG] Server digi-tbhh2:19260:319b16f3 heartbeat successfully sent
2025-07-10 14:14:22.502 +07:00 [DBG] Server digi-tbhh2:19260:319b16f3 heartbeat successfully sent
2025-07-10 14:14:52.463 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 14:14:52.511 +07:00 [DBG] Server digi-tbhh2:19260:319b16f3 heartbeat successfully sent
2025-07-10 14:15:39.009 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 14:15:39.041 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 14:15:39.053 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 14:15:39.095 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 14:15:39.101 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 14:15:39.102 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 14:15:39.105 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 14:15:39.110 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 14:15:39.112 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 14:15:39.223 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 14:15:39.309 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 14:15:39.550 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 14:15:39.551 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 14:15:39.645 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 14:15:39.647 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 14:15:39.648 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 14:15:39.660 +07:00 [DBG] Execution loop BackgroundServerProcess:44005893 has started in 4.9867 ms
2025-07-10 14:15:39.667 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 14:15:39.668 +07:00 [INF] Hosting environment: Development
2025-07-10 14:15:39.669 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 14:15:39.675 +07:00 [INF] Server digi-tbhh2:4600:999f7a64 successfully announced in 7.8204 ms
2025-07-10 14:15:39.680 +07:00 [INF] Server digi-tbhh2:4600:999f7a64 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 14:15:39.680 +07:00 [DBG] Execution loop ServerHeartbeatProcess:08c13957 has started in 3.6645 ms
2025-07-10 14:15:39.684 +07:00 [DBG] Execution loop ServerWatchdog:828932d0 has started in 2.7535 ms
2025-07-10 14:15:39.686 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:677c1a46 has started in 4.5953 ms
2025-07-10 14:15:39.688 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:12e7d804 has started in 4.6793 ms
2025-07-10 14:15:39.691 +07:00 [DBG] Execution loop ExpirationManager:3a2c1f64 has started in 4.7633 ms
2025-07-10 14:15:39.693 +07:00 [DBG] Execution loop CountersAggregator:6576572c has started in 4.8354 ms
2025-07-10 14:15:39.697 +07:00 [DBG] Execution loop Worker:1601005f has started in 6.4287 ms
2025-07-10 14:15:39.706 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 14:15:39.707 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 14:15:39.701 +07:00 [DBG] Execution loop Worker:8022b31b has started in 10.4758 ms
2025-07-10 14:15:39.703 +07:00 [DBG] Execution loop Worker:630f0bcd has started in 12.0882 ms
2025-07-10 14:15:39.706 +07:00 [DBG] Execution loop Worker:9b27d203 has started in 14.8452 ms
2025-07-10 14:15:39.709 +07:00 [DBG] Execution loop Worker:1c0386c7 has started in 18.1125 ms
2025-07-10 14:15:39.727 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 14:15:39.712 +07:00 [DBG] Execution loop Worker:c003bcfe has started in 21.4195 ms
2025-07-10 14:15:39.715 +07:00 [DBG] Execution loop Worker:03c8089c has started in 24.0729 ms
2025-07-10 14:15:39.718 +07:00 [DBG] Execution loop Worker:3e536c25 has started in 27.2014 ms
2025-07-10 14:15:39.721 +07:00 [DBG] Execution loop Worker:50ccd94a has started in 29.8973 ms
2025-07-10 14:15:39.723 +07:00 [DBG] Execution loop Worker:bf2a79d8 has started in 32.6964 ms
2025-07-10 14:15:39.761 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 14:15:39.773 +07:00 [INF] Server digi-tbhh2:4600:999f7a64 all the dispatchers started
2025-07-10 14:15:39.727 +07:00 [DBG] Execution loop Worker:20696a7d has started in 35.6284 ms
2025-07-10 14:15:39.729 +07:00 [DBG] Execution loop Worker:8884d418 has started in 38.4083 ms
2025-07-10 14:15:39.733 +07:00 [DBG] Execution loop Worker:2b1e1c77 has started in 42.0362 ms
2025-07-10 14:15:39.736 +07:00 [DBG] Execution loop Worker:1da4a2c6 has started in 44.1311 ms
2025-07-10 14:15:39.739 +07:00 [DBG] Execution loop Worker:ed00d733 has started in 48.3632 ms
2025-07-10 14:15:39.779 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 14:15:39.746 +07:00 [DBG] Execution loop Worker:16f4b874 has started in 54.6764 ms
2025-07-10 14:15:39.749 +07:00 [DBG] Execution loop Worker:0b501be1 has started in 58.0106 ms
2025-07-10 14:15:39.752 +07:00 [DBG] Execution loop Worker:fcf44788 has started in 61.5604 ms
2025-07-10 14:15:39.787 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 14:15:39.758 +07:00 [DBG] Execution loop Worker:f2ffb2e5 has started in 67.4037 ms
2025-07-10 14:15:39.765 +07:00 [DBG] Execution loop Worker:75069b01 has started in 74.549 ms
2025-07-10 14:15:39.773 +07:00 [DBG] Execution loop DelayedJobScheduler:1ec533a9 has started in 8.1299 ms
2025-07-10 14:15:39.776 +07:00 [DBG] Execution loop RecurringJobScheduler:d0ab2fd6 has started in 10.4255 ms
2025-07-10 14:15:40.054 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 14:15:40.054 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 14:15:40.090 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 45.7274ms
2025-07-10 14:15:40.129 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 84.4957ms
2025-07-10 14:15:40.167 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 14:15:40.192 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 25.358ms
2025-07-10 14:16:09.705 +07:00 [DBG] Server digi-tbhh2:4600:999f7a64 heartbeat successfully sent
2025-07-10 14:16:39.726 +07:00 [DBG] Server digi-tbhh2:4600:999f7a64 heartbeat successfully sent
2025-07-10 14:16:48.693 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/test-upload - multipart/form-data; boundary=--------------------------371433879037781807288736 2874
2025-07-10 14:16:48.719 +07:00 [INF] Request from IP: ::1
2025-07-10 14:16:48.722 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.TestUpload (pviBase)'
2025-07-10 14:16:48.738 +07:00 [INF] Route matched with {action = "TestUpload", controller = "HubContract"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TestUpload(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 14:16:48.858 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 14:16:48.880 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.TestUpload (pviBase) in 138.3319ms
2025-07-10 14:16:48.881 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.TestUpload (pviBase)'
2025-07-10 14:16:48.898 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/test-upload - 200 91 application/json 205.123ms
2025-07-10 14:17:09.743 +07:00 [DBG] Server digi-tbhh2:4600:999f7a64 heartbeat successfully sent
2025-07-10 14:17:39.763 +07:00 [DBG] Server digi-tbhh2:4600:999f7a64 heartbeat successfully sent
2025-07-10 14:18:09.775 +07:00 [DBG] Server digi-tbhh2:4600:999f7a64 heartbeat successfully sent
2025-07-10 14:18:39.785 +07:00 [DBG] Server digi-tbhh2:4600:999f7a64 heartbeat successfully sent
2025-07-10 14:19:09.801 +07:00 [DBG] Server digi-tbhh2:4600:999f7a64 heartbeat successfully sent
2025-07-10 14:19:39.813 +07:00 [DBG] Server digi-tbhh2:4600:999f7a64 heartbeat successfully sent
2025-07-10 14:20:02.483 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 14:20:02.521 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 14:20:02.531 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 14:20:02.570 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 14:20:02.577 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 14:20:02.579 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 14:20:02.582 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 14:20:02.587 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 14:20:02.589 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 14:20:02.772 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 14:20:02.857 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 14:20:03.125 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 14:20:03.126 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 14:20:03.202 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 14:20:03.203 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 14:20:03.204 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 14:20:03.212 +07:00 [DBG] Execution loop BackgroundServerProcess:0fee987e has started in 4.3093 ms
2025-07-10 14:20:03.217 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 14:20:03.218 +07:00 [INF] Hosting environment: Development
2025-07-10 14:20:03.219 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 14:20:03.225 +07:00 [INF] Server digi-tbhh2:32176:6f7aec1e successfully announced in 7.5634 ms
2025-07-10 14:20:03.230 +07:00 [DBG] Execution loop ServerHeartbeatProcess:f7c9bac6 has started in 3.1587 ms
2025-07-10 14:20:03.230 +07:00 [INF] Server digi-tbhh2:32176:6f7aec1e is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 14:20:03.233 +07:00 [DBG] Execution loop ServerWatchdog:d8ca39e4 has started in 2.3357 ms
2025-07-10 14:20:03.235 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:ca177e5b has started in 4.2303 ms
2025-07-10 14:20:03.238 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:da82a606 has started in 5.5581 ms
2025-07-10 14:20:03.240 +07:00 [DBG] Execution loop ExpirationManager:2d71e379 has started in 4.5976 ms
2025-07-10 14:20:03.242 +07:00 [DBG] Execution loop CountersAggregator:6b09a5b7 has started in 4.5023 ms
2025-07-10 14:20:03.248 +07:00 [INF] 1 servers were removed due to timeout
2025-07-10 14:20:03.256 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 14:20:03.258 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 14:20:03.245 +07:00 [DBG] Execution loop Worker:6268057f has started in 5.3955 ms
2025-07-10 14:20:03.248 +07:00 [DBG] Execution loop Worker:dc683cf1 has started in 7.9637 ms
2025-07-10 14:20:03.250 +07:00 [DBG] Execution loop Worker:f731ca03 has started in 10.2326 ms
2025-07-10 14:20:03.253 +07:00 [DBG] Execution loop Worker:56ae949d has started in 12.5326 ms
2025-07-10 14:20:03.255 +07:00 [DBG] Execution loop Worker:0a1e5c16 has started in 14.7451 ms
2025-07-10 14:20:03.257 +07:00 [DBG] Execution loop Worker:594eed47 has started in 17.2701 ms
2025-07-10 14:20:03.260 +07:00 [DBG] Execution loop Worker:a585187a has started in 19.5855 ms
2025-07-10 14:20:03.263 +07:00 [DBG] Execution loop Worker:e7d20454 has started in 23.0146 ms
2025-07-10 14:20:03.294 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 14:20:03.298 +07:00 [INF] Server digi-tbhh2:32176:6f7aec1e all the dispatchers started
2025-07-10 14:20:03.265 +07:00 [DBG] Execution loop Worker:efd93687 has started in 25.0479 ms
2025-07-10 14:20:03.269 +07:00 [DBG] Execution loop Worker:1566169e has started in 28.5937 ms
2025-07-10 14:20:03.271 +07:00 [DBG] Execution loop Worker:04366ebc has started in 30.8176 ms
2025-07-10 14:20:03.274 +07:00 [DBG] Execution loop Worker:5f7fee5c has started in 33.7771 ms
2025-07-10 14:20:03.277 +07:00 [DBG] Execution loop Worker:0282346c has started in 36.6476 ms
2025-07-10 14:20:03.280 +07:00 [DBG] Execution loop Worker:87c4b8bd has started in 39.5491 ms
2025-07-10 14:20:03.283 +07:00 [DBG] Execution loop Worker:6b48ae21 has started in 42.5758 ms
2025-07-10 14:20:03.285 +07:00 [DBG] Execution loop Worker:76904367 has started in 44.9706 ms
2025-07-10 14:20:03.308 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 14:20:03.288 +07:00 [DBG] Execution loop Worker:3c676800 has started in 47.4487 ms
2025-07-10 14:20:03.290 +07:00 [DBG] Execution loop Worker:ec1a7442 has started in 50.2756 ms
2025-07-10 14:20:03.293 +07:00 [DBG] Execution loop Worker:0388043d has started in 53.0114 ms
2025-07-10 14:20:03.296 +07:00 [DBG] Execution loop Worker:737e4da8 has started in 55.7074 ms
2025-07-10 14:20:03.298 +07:00 [DBG] Execution loop DelayedJobScheduler:f8400e28 has started in 5.2426 ms
2025-07-10 14:20:03.301 +07:00 [DBG] Execution loop RecurringJobScheduler:56b9cc85 has started in 5.2481 ms
2025-07-10 14:20:03.312 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 14:20:03.316 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 14:20:03.768 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 14:20:03.768 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 14:20:03.797 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 32.8966ms
2025-07-10 14:20:03.828 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.2424ms
2025-07-10 14:20:03.854 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 14:20:03.885 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 30.7072ms
2025-07-10 14:20:08.209 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/test-upload - multipart/form-data; boundary=--------------------------303577756684792684566583 2874
2025-07-10 14:20:08.225 +07:00 [INF] Request from IP: ::1
2025-07-10 14:20:08.229 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.TestUpload (pviBase)'
2025-07-10 14:20:08.242 +07:00 [INF] Route matched with {action = "TestUpload", controller = "HubContract"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TestUpload(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 14:20:08.342 +07:00 [INF] [TestUpload] Content-Type: multipart/form-data; boundary=--------------------------303577756684792684566583
2025-07-10 14:20:08.347 +07:00 [INF] [TestUpload] Headers: {"Accept":"*/*","Connection":"keep-alive","Host":"localhost:7024","User-Agent":"PostmanRuntime/7.44.1","Accept-Encoding":"gzip, deflate, br","Content-Type":"multipart/form-data; boundary=--------------------------303577756684792684566583","Content-Length":"2874","Postman-Token":"aee8d288-f5a3-4121-9782-e744aa2d74e9"}
2025-07-10 14:20:08.348 +07:00 [INF] [TestUpload] ModelState.IsValid: True
2025-07-10 14:20:08.353 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`6[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], pviBase, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 14:20:08.371 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.TestUpload (pviBase) in 124.137ms
2025-07-10 14:20:08.372 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.TestUpload (pviBase)'
2025-07-10 14:20:08.386 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/test-upload - 200 562 application/json 177.7682ms
2025-07-10 14:20:18.222 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/test-upload - multipart/form-data; boundary=--------------------------500811136788851811875154 2873
2025-07-10 14:20:18.226 +07:00 [INF] Request from IP: ::1
2025-07-10 14:20:18.227 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.TestUpload (pviBase)'
2025-07-10 14:20:18.228 +07:00 [INF] Route matched with {action = "TestUpload", controller = "HubContract"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TestUpload(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 14:20:18.236 +07:00 [INF] [TestUpload] Content-Type: multipart/form-data; boundary=--------------------------500811136788851811875154
2025-07-10 14:20:18.237 +07:00 [INF] [TestUpload] Headers: {"Accept":"*/*","Connection":"keep-alive","Host":"localhost:7024","User-Agent":"PostmanRuntime/7.44.1","Accept-Encoding":"gzip, deflate, br","Content-Type":"multipart/form-data; boundary=--------------------------500811136788851811875154","Content-Length":"2873","Postman-Token":"5c624e9e-57b6-4f4e-abeb-4bb3d5b9b50e"}
2025-07-10 14:20:18.237 +07:00 [INF] [TestUpload] ModelState.IsValid: True
2025-07-10 14:20:18.238 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`6[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], pviBase, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 14:20:18.239 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.TestUpload (pviBase) in 9.0873ms
2025-07-10 14:20:18.240 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.TestUpload (pviBase)'
2025-07-10 14:20:18.243 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/test-upload - 200 643 application/json 20.4582ms
2025-07-10 14:20:33.243 +07:00 [DBG] Server digi-tbhh2:32176:6f7aec1e heartbeat successfully sent
2025-07-10 14:21:03.263 +07:00 [DBG] Server digi-tbhh2:32176:6f7aec1e heartbeat successfully sent
2025-07-10 14:21:33.269 +07:00 [DBG] Server digi-tbhh2:32176:6f7aec1e heartbeat successfully sent
2025-07-10 14:22:03.283 +07:00 [DBG] Server digi-tbhh2:32176:6f7aec1e heartbeat successfully sent
2025-07-10 14:22:30.156 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 14:22:30.195 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 14:22:30.206 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 14:22:30.256 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 14:22:30.263 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 14:22:30.265 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 14:22:30.268 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 14:22:30.274 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 14:22:30.275 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 14:22:30.394 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 14:22:30.493 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 14:22:30.722 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 14:22:30.723 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 14:22:30.817 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 14:22:30.818 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 14:22:30.819 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 14:22:30.829 +07:00 [DBG] Execution loop BackgroundServerProcess:6d53aaa2 has started in 5.1406 ms
2025-07-10 14:22:30.836 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 14:22:30.838 +07:00 [INF] Hosting environment: Development
2025-07-10 14:22:30.839 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 14:22:30.847 +07:00 [INF] Server digi-tbhh2:1232:294b3172 successfully announced in 10.7253 ms
2025-07-10 14:22:30.852 +07:00 [INF] Server digi-tbhh2:1232:294b3172 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 14:22:30.852 +07:00 [DBG] Execution loop ServerHeartbeatProcess:e05e962f has started in 3.3666 ms
2025-07-10 14:22:30.855 +07:00 [DBG] Execution loop ServerWatchdog:071042da has started in 2.8192 ms
2025-07-10 14:22:30.857 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:76c661b1 has started in 4.5457 ms
2025-07-10 14:22:30.863 +07:00 [DBG] Execution loop ExpirationManager:602f6352 has started in 5.1819 ms
2025-07-10 14:22:30.860 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:998ecb7e has started in 4.3461 ms
2025-07-10 14:22:30.864 +07:00 [DBG] Execution loop CountersAggregator:6274b568 has started in 4.5727 ms
2025-07-10 14:22:30.867 +07:00 [DBG] Execution loop Worker:68d330e0 has started in 4.8423 ms
2025-07-10 14:22:30.902 +07:00 [DBG] Execution loop Worker:c3d2ea61 has started in 40.587 ms
2025-07-10 14:22:30.910 +07:00 [DBG] Execution loop Worker:cf231727 has started in 48.2909 ms
2025-07-10 14:22:30.906 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 14:22:30.906 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 14:22:30.902 +07:00 [DBG] Execution loop Worker:b9bb3a0c has started in 40.5884 ms
2025-07-10 14:22:30.905 +07:00 [DBG] Execution loop Worker:c544f2cd has started in 43.5884 ms
2025-07-10 14:22:30.908 +07:00 [DBG] Execution loop Worker:0213301d has started in 45.9594 ms
2025-07-10 14:22:30.913 +07:00 [DBG] Execution loop Worker:3c2eb636 has started in 50.8528 ms
2025-07-10 14:22:30.916 +07:00 [DBG] Execution loop Worker:cddab1aa has started in 54.2932 ms
2025-07-10 14:22:30.918 +07:00 [DBG] Execution loop Worker:205411ed has started in 56.3889 ms
2025-07-10 14:22:30.921 +07:00 [DBG] Execution loop Worker:cf939b3c has started in 58.9718 ms
2025-07-10 14:22:30.945 +07:00 [DBG] Execution loop Worker:4407414e has started in 83.5 ms
2025-07-10 14:22:30.925 +07:00 [DBG] Execution loop Worker:9fe47249 has started in 62.8175 ms
2025-07-10 14:22:30.926 +07:00 [DBG] Execution loop Worker:83c8314f has started in 64.6804 ms
2025-07-10 14:22:30.948 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 14:22:30.954 +07:00 [INF] Server digi-tbhh2:1232:294b3172 all the dispatchers started
2025-07-10 14:22:30.929 +07:00 [DBG] Execution loop Worker:80565eba has started in 67.2376 ms
2025-07-10 14:22:30.932 +07:00 [DBG] Execution loop Worker:72a26dff has started in 70.1312 ms
2025-07-10 14:22:30.935 +07:00 [DBG] Execution loop Worker:c1889eae has started in 72.7713 ms
2025-07-10 14:22:30.937 +07:00 [DBG] Execution loop Worker:f7f5db86 has started in 75.4355 ms
2025-07-10 14:22:30.941 +07:00 [DBG] Execution loop Worker:b31b1dfb has started in 78.732 ms
2025-07-10 14:22:30.947 +07:00 [DBG] Execution loop Worker:d8dcfa47 has started in 85.4865 ms
2025-07-10 14:22:30.966 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 14:22:30.950 +07:00 [DBG] Execution loop Worker:dfa2d06e has started in 88.6887 ms
2025-07-10 14:22:30.954 +07:00 [DBG] Execution loop DelayedJobScheduler:3035986e has started in 6.5078 ms
2025-07-10 14:22:30.957 +07:00 [DBG] Execution loop RecurringJobScheduler:bfeef745 has started in 6.5012 ms
2025-07-10 14:22:30.970 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 14:22:30.973 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 14:22:31.098 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 14:22:31.098 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 14:22:31.129 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 34.5933ms
2025-07-10 14:22:31.178 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 85.4454ms
2025-07-10 14:22:31.208 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 14:22:31.240 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 32.1069ms
2025-07-10 14:22:47.219 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------416045405243679770195359 16442
2025-07-10 14:22:47.238 +07:00 [INF] Request from IP: ::1
2025-07-10 14:22:47.241 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 14:22:47.259 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 14:22:47.375 +07:00 [INF] [CreateContract] Content-Type: multipart/form-data; boundary=--------------------------416045405243679770195359
2025-07-10 14:22:47.379 +07:00 [INF] [CreateContract] Headers: {"Accept":"*/*","Connection":"keep-alive","Host":"localhost:7024","User-Agent":"PostmanRuntime/7.44.1","Accept-Encoding":"gzip, deflate, br","Content-Type":"multipart/form-data; boundary=--------------------------416045405243679770195359","Content-Length":"16442","Postman-Token":"895e0949-4b48-4148-a765-a1444af7df30"}
2025-07-10 14:22:47.380 +07:00 [INF] [CreateContract] ModelState.IsValid: True
2025-07-10 14:22:47.398 +07:00 [INF] [CreateContract] AllAttachments count: 1, names: Work.docx
2025-07-10 14:22:47.614 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:22:47.652 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'pviBase.Dtos.ApiResponse'.
2025-07-10 14:22:47.670 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 407.5238ms
2025-07-10 14:22:47.672 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 14:22:47.676 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 400 195 application/json; charset=utf-8 457.748ms
2025-07-10 14:22:55.902 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------963275606341573822555130 16442
2025-07-10 14:22:55.905 +07:00 [INF] Request from IP: ::1
2025-07-10 14:22:55.906 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 14:22:55.907 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 14:22:55.916 +07:00 [INF] [CreateContract] Content-Type: multipart/form-data; boundary=--------------------------963275606341573822555130
2025-07-10 14:22:55.917 +07:00 [INF] [CreateContract] Headers: {"Accept":"*/*","Connection":"keep-alive","Host":"localhost:7024","User-Agent":"PostmanRuntime/7.44.1","Accept-Encoding":"gzip, deflate, br","Content-Type":"multipart/form-data; boundary=--------------------------963275606341573822555130","Content-Length":"16442","Postman-Token":"80b25970-9884-457f-a58a-6a32ac184465"}
2025-07-10 14:22:55.919 +07:00 [INF] [CreateContract] ModelState.IsValid: True
2025-07-10 14:22:55.920 +07:00 [INF] [CreateContract] AllAttachments count: 1, names: Work.docx
2025-07-10 14:22:55.974 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:22:55.980 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:22:56.101 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 14:22:56.168 +07:00 [INF] Enqueued job for RequestId: ed8e3bbc-d681-4541-821e-c7ae5b269484
2025-07-10 14:22:56.170 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 14:22:56.173 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 264.1249ms
2025-07-10 14:22:56.174 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 14:22:56.183 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 281.3287ms
2025-07-10 14:22:56.292 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 14:22:56.306 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 14:22:56.310 +07:00 [INF] Processing job for RequestId: ed8e3bbc-d681-4541-821e-c7ae5b269484
2025-07-10 14:22:56.310 +07:00 [INF] Tng s file upload: 0
2025-07-10 14:22:56.313 +07:00 [INF] ang x l LoanNo: thinh18, attachmentFileName: Work.docx
2025-07-10 14:22:56.314 +07:00 [WRN] Khng tm thy file trng tn: Work.docx trong danh sch upload.
2025-07-10 14:22:56.316 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:22:56.323 +07:00 [INF] Searching for file: Work.docx
2025-07-10 14:22:56.323 +07:00 [INF] No file matched for LoanNo: thinh18
2025-07-10 14:22:56.554 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 14:22:56.560 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 14:22:56.562 +07:00 [INF] Job for RequestId: ed8e3bbc-d681-4541-821e-c7ae5b269484 completed successfully.
2025-07-10 14:23:00.926 +07:00 [DBG] Server digi-tbhh2:1232:294b3172 heartbeat successfully sent
2025-07-10 14:23:30.930 +07:00 [DBG] Server digi-tbhh2:1232:294b3172 heartbeat successfully sent
2025-07-10 14:23:36.119 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------362271938829800011101338 16442
2025-07-10 14:23:36.131 +07:00 [INF] Request from IP: ::1
2025-07-10 14:23:36.132 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 14:23:36.133 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 14:23:36.136 +07:00 [INF] [CreateContract] Content-Type: multipart/form-data; boundary=--------------------------362271938829800011101338
2025-07-10 14:23:36.137 +07:00 [INF] [CreateContract] Headers: {"Accept":"*/*","Connection":"keep-alive","Host":"localhost:7024","User-Agent":"PostmanRuntime/7.44.1","Accept-Encoding":"gzip, deflate, br","Content-Type":"multipart/form-data; boundary=--------------------------362271938829800011101338","Content-Length":"16442","Postman-Token":"5818d9ca-5586-4895-80cf-128d9de1d64f"}
2025-07-10 14:23:36.137 +07:00 [INF] [CreateContract] ModelState.IsValid: True
2025-07-10 14:23:36.138 +07:00 [INF] [CreateContract] AllAttachments count: 1, names: Work.docx
2025-07-10 14:23:36.142 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:23:36.153 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:23:36.156 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 14:23:36.162 +07:00 [INF] Enqueued job for RequestId: fc9e0ee7-3cc9-4205-9c9c-da0fd42a7aef
2025-07-10 14:23:36.163 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 14:23:36.165 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 30.9605ms
2025-07-10 14:23:36.166 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 14:23:36.167 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 47.8103ms
2025-07-10 14:23:36.168 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 14:23:36.173 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 14:23:36.176 +07:00 [INF] Processing job for RequestId: fc9e0ee7-3cc9-4205-9c9c-da0fd42a7aef
2025-07-10 14:23:36.177 +07:00 [INF] Tng s file upload: 0
2025-07-10 14:23:36.178 +07:00 [INF] ang x l LoanNo: thinh19, attachmentFileName: Work.docx
2025-07-10 14:23:36.178 +07:00 [WRN] Khng tm thy file trng tn: Work.docx trong danh sch upload.
2025-07-10 14:23:36.181 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:23:36.184 +07:00 [INF] Searching for file: Work.docx
2025-07-10 14:23:36.185 +07:00 [INF] No file matched for LoanNo: thinh19
2025-07-10 14:23:36.188 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 14:23:36.192 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 14:23:36.194 +07:00 [INF] Job for RequestId: fc9e0ee7-3cc9-4205-9c9c-da0fd42a7aef completed successfully.
2025-07-10 14:24:00.937 +07:00 [DBG] Server digi-tbhh2:1232:294b3172 heartbeat successfully sent
2025-07-10 14:24:30.953 +07:00 [DBG] Server digi-tbhh2:1232:294b3172 heartbeat successfully sent
2025-07-10 14:25:00.961 +07:00 [DBG] Server digi-tbhh2:1232:294b3172 heartbeat successfully sent
2025-07-10 14:25:05.773 +07:00 [WRN] Stopping the server due to DomainUnload or ProcessExit event...
2025-07-10 14:25:05.774 +07:00 [INF] Server digi-tbhh2:1232:294b3172 caught stopping signal...
2025-07-10 14:25:05.775 +07:00 [DBG] Execution loop RecurringJobScheduler:bfeef745 stopped in 0 ms
2025-07-10 14:25:05.777 +07:00 [INF] Server digi-tbhh2:1232:294b3172 caught stopped signal...
2025-07-10 14:25:05.777 +07:00 [DBG] Execution loop ServerWatchdog:071042da stopped in 0.448 ms
2025-07-10 14:25:05.778 +07:00 [WRN] Server digi-tbhh2:1232:294b3172 caught shutdown signal...
2025-07-10 14:25:05.775 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:76c661b1 stopped in 0 ms
2025-07-10 14:25:05.779 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:998ecb7e stopped in 3.1813 ms
2025-07-10 14:25:05.781 +07:00 [WRN] Server digi-tbhh2:1232:294b3172 stopped non-gracefully due to SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler. Outstanding work on those dispatchers could be aborted, and there can be delays in background processing. This server instance will be incorrectly shown as active for a while. To avoid non-graceful shutdowns, investigate what prevents from stopping gracefully and add CancellationToken support for those methods.
2025-07-10 14:25:05.780 +07:00 [DBG] Execution loop ServerHeartbeatProcess:e05e962f stopped in 0.367 ms
2025-07-10 14:25:05.776 +07:00 [DBG] Execution loop ExpirationManager:602f6352 stopped in 0 ms
2025-07-10 14:25:05.776 +07:00 [DBG] Execution loop CountersAggregator:6274b568 stopped in 0 ms
2025-07-10 14:25:05.778 +07:00 [DBG] Execution loop Worker:68d330e0 stopped in 1.5958 ms
2025-07-10 14:25:05.782 +07:00 [DBG] Execution loop Worker:c3d2ea61 stopped in 5.3896 ms
2025-07-10 14:25:05.776 +07:00 [DBG] Execution loop Worker:b9bb3a0c stopped in 0 ms
2025-07-10 14:25:05.777 +07:00 [DBG] Execution loop Worker:c544f2cd stopped in 0.2783 ms
2025-07-10 14:25:05.777 +07:00 [DBG] Execution loop Worker:0213301d stopped in 0.578 ms
2025-07-10 14:25:05.777 +07:00 [DBG] Execution loop Worker:cf231727 stopped in 0.8927 ms
2025-07-10 14:25:05.778 +07:00 [DBG] Execution loop Worker:3c2eb636 stopped in 1.7866 ms
2025-07-10 14:25:05.777 +07:00 [DBG] Execution loop Worker:cddab1aa stopped in 0.6314 ms
2025-07-10 14:25:05.777 +07:00 [DBG] Execution loop Worker:205411ed stopped in 0.6282 ms
2025-07-10 14:25:05.778 +07:00 [DBG] Execution loop Worker:cf939b3c stopped in 1.9907 ms
2025-07-10 14:25:05.789 +07:00 [INF] Server digi-tbhh2:1232:294b3172 successfully reported itself as stopped in 6.0056 ms
2025-07-10 14:25:05.778 +07:00 [DBG] Execution loop Worker:9fe47249 stopped in 1.5546 ms
2025-07-10 14:25:05.778 +07:00 [DBG] Execution loop Worker:83c8314f stopped in 1.8012 ms
2025-07-10 14:25:05.790 +07:00 [INF] Server digi-tbhh2:1232:294b3172 has been stopped in total 13.8253 ms
2025-07-10 14:25:05.778 +07:00 [DBG] Execution loop Worker:80565eba stopped in 2.0038 ms
2025-07-10 14:25:05.778 +07:00 [DBG] Execution loop Worker:72a26dff stopped in 1.9636 ms
2025-07-10 14:25:05.792 +07:00 [DBG] Execution loop BackgroundServerProcess:6d53aaa2 stopped in 15.5423 ms
2025-07-10 14:25:10.754 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 14:25:10.786 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 14:25:10.796 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 14:25:10.835 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 14:25:10.842 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 14:25:10.843 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 14:25:10.847 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 14:25:10.852 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 14:25:10.853 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 14:25:10.973 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 14:25:11.081 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 14:25:11.328 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 14:25:11.329 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 14:25:11.421 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 14:25:11.422 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 14:25:11.423 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 14:25:11.433 +07:00 [DBG] Execution loop BackgroundServerProcess:c73cef91 has started in 5.1524 ms
2025-07-10 14:25:11.439 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 14:25:11.440 +07:00 [INF] Hosting environment: Development
2025-07-10 14:25:11.441 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 14:25:11.447 +07:00 [INF] Server digi-tbhh2:30164:d3404c43 successfully announced in 8.3468 ms
2025-07-10 14:25:11.452 +07:00 [DBG] Execution loop ServerHeartbeatProcess:cb54da04 has started in 3.5294 ms
2025-07-10 14:25:11.452 +07:00 [INF] Server digi-tbhh2:30164:d3404c43 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 14:25:11.458 +07:00 [DBG] Execution loop ServerWatchdog:c755d002 has started in 4.6003 ms
2025-07-10 14:25:11.461 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:03fd244c has started in 6.2573 ms
2025-07-10 14:25:11.466 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:8ac0a1ab has started in 7.9854 ms
2025-07-10 14:25:11.467 +07:00 [DBG] Execution loop ExpirationManager:4696fe4f has started in 6.2706 ms
2025-07-10 14:25:11.470 +07:00 [DBG] Execution loop CountersAggregator:08021f4a has started in 5.233 ms
2025-07-10 14:25:11.476 +07:00 [INF] 1 servers were removed due to timeout
2025-07-10 14:25:11.480 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 14:25:11.483 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 14:25:11.473 +07:00 [DBG] Execution loop Worker:7d54c54b has started in 5.4618 ms
2025-07-10 14:25:11.476 +07:00 [DBG] Execution loop Worker:c15e8484 has started in 7.9176 ms
2025-07-10 14:25:11.479 +07:00 [DBG] Execution loop Worker:4c036316 has started in 11.1534 ms
2025-07-10 14:25:11.482 +07:00 [DBG] Execution loop Worker:7d84b0e5 has started in 13.8761 ms
2025-07-10 14:25:11.484 +07:00 [DBG] Execution loop Worker:f6bf4203 has started in 16.1621 ms
2025-07-10 14:25:11.486 +07:00 [DBG] Execution loop Worker:d6df431f has started in 18.4443 ms
2025-07-10 14:25:11.488 +07:00 [DBG] Execution loop Worker:72ee6e70 has started in 20.6622 ms
2025-07-10 14:25:11.491 +07:00 [DBG] Execution loop Worker:291ba235 has started in 23.0042 ms
2025-07-10 14:25:11.494 +07:00 [DBG] Execution loop Worker:94881624 has started in 26.0408 ms
2025-07-10 14:25:11.497 +07:00 [DBG] Execution loop Worker:7c207e30 has started in 28.7756 ms
2025-07-10 14:25:11.499 +07:00 [DBG] Execution loop Worker:81f7f894 has started in 31.4696 ms
2025-07-10 14:25:11.502 +07:00 [DBG] Execution loop Worker:0bbb6497 has started in 34.0599 ms
2025-07-10 14:25:11.505 +07:00 [DBG] Execution loop Worker:1c5eaea2 has started in 36.7726 ms
2025-07-10 14:25:11.507 +07:00 [DBG] Execution loop Worker:684aa3d3 has started in 39.3616 ms
2025-07-10 14:25:11.527 +07:00 [INF] Server digi-tbhh2:30164:d3404c43 all the dispatchers started
2025-07-10 14:25:11.514 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 14:25:11.512 +07:00 [DBG] Execution loop Worker:24b79735 has started in 43.7276 ms
2025-07-10 14:25:11.513 +07:00 [DBG] Execution loop Worker:8cd451fd has started in 45.413 ms
2025-07-10 14:25:11.516 +07:00 [DBG] Execution loop Worker:f24bca77 has started in 48.0148 ms
2025-07-10 14:25:11.518 +07:00 [DBG] Execution loop Worker:6056b9eb has started in 50.4984 ms
2025-07-10 14:25:11.521 +07:00 [DBG] Execution loop Worker:02afb773 has started in 53.1581 ms
2025-07-10 14:25:11.524 +07:00 [DBG] Execution loop Worker:704a04e9 has started in 55.9849 ms
2025-07-10 14:25:11.527 +07:00 [DBG] Execution loop DelayedJobScheduler:bf3ee49b has started in 5.6264 ms
2025-07-10 14:25:11.537 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 14:25:11.529 +07:00 [DBG] Execution loop RecurringJobScheduler:95cb6b08 has started in 5.4027 ms
2025-07-10 14:25:11.541 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 14:25:11.547 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 14:25:11.839 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 14:25:11.839 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 14:25:11.864 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 34.4054ms
2025-07-10 14:25:11.900 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 71.5804ms
2025-07-10 14:25:11.926 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 14:25:11.957 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.3645ms
2025-07-10 14:25:21.483 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------350040656967524841818712 16442
2025-07-10 14:25:21.522 +07:00 [INF] Request from IP: ::1
2025-07-10 14:25:21.528 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 14:25:21.553 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 14:25:21.688 +07:00 [INF] [CreateContract] Content-Type: multipart/form-data; boundary=--------------------------350040656967524841818712
2025-07-10 14:25:21.694 +07:00 [INF] [CreateContract] Headers: {"Accept":"*/*","Connection":"keep-alive","Host":"localhost:7024","User-Agent":"PostmanRuntime/7.44.1","Accept-Encoding":"gzip, deflate, br","Content-Type":"multipart/form-data; boundary=--------------------------350040656967524841818712","Content-Length":"16442","Postman-Token":"a6a3dca9-b578-44b6-b42a-b434c102f67f"}
2025-07-10 14:25:21.695 +07:00 [INF] [CreateContract] ModelState.IsValid: True
2025-07-10 14:25:21.717 +07:00 [INF] [CreateContract] AllAttachments count: 1, names: Work.docx
2025-07-10 14:25:21.910 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:25:21.946 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:25:22.069 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 14:25:22.132 +07:00 [INF] Enqueued job for RequestId: 08ba30a7-9aab-44f9-9ed2-734788d7affe
2025-07-10 14:25:22.145 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 14:25:22.163 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 604.2672ms
2025-07-10 14:25:22.166 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 14:25:22.179 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 696.1262ms
2025-07-10 14:25:22.316 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 14:25:22.331 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 14:25:22.334 +07:00 [INF] Processing job for RequestId: 08ba30a7-9aab-44f9-9ed2-734788d7affe
2025-07-10 14:25:22.335 +07:00 [INF] Tng s file upload: 0
2025-07-10 14:25:22.336 +07:00 [INF] ang x l LoanNo: thinh20, attachmentFileName: Work.docx
2025-07-10 14:25:22.337 +07:00 [WRN] Khng tm thy file trng tn: Work.docx trong danh sch upload.
2025-07-10 14:25:22.339 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:25:22.347 +07:00 [INF] Searching for file: Work.docx
2025-07-10 14:25:22.348 +07:00 [INF] No file matched for LoanNo: thinh20
2025-07-10 14:25:22.527 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 14:25:22.533 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 14:25:22.535 +07:00 [INF] Job for RequestId: 08ba30a7-9aab-44f9-9ed2-734788d7affe completed successfully.
2025-07-10 14:25:41.476 +07:00 [DBG] Server digi-tbhh2:30164:d3404c43 heartbeat successfully sent
2025-07-10 14:26:11.482 +07:00 [DBG] Server digi-tbhh2:30164:d3404c43 heartbeat successfully sent
2025-07-10 14:26:41.493 +07:00 [DBG] Server digi-tbhh2:30164:d3404c43 heartbeat successfully sent
2025-07-10 14:27:11.511 +07:00 [DBG] Server digi-tbhh2:30164:d3404c43 heartbeat successfully sent
2025-07-10 14:27:41.530 +07:00 [DBG] Server digi-tbhh2:30164:d3404c43 heartbeat successfully sent
2025-07-10 14:28:11.538 +07:00 [DBG] Server digi-tbhh2:30164:d3404c43 heartbeat successfully sent
2025-07-10 14:28:41.558 +07:00 [DBG] Server digi-tbhh2:30164:d3404c43 heartbeat successfully sent
2025-07-10 14:29:11.633 +07:00 [DBG] Server digi-tbhh2:30164:d3404c43 heartbeat successfully sent
2025-07-10 14:29:41.688 +07:00 [DBG] Server digi-tbhh2:30164:d3404c43 heartbeat successfully sent
2025-07-10 14:30:48.558 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 14:30:48.594 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 14:30:48.606 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 14:30:48.653 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 14:30:48.659 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 14:30:48.661 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 14:30:48.665 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 14:30:48.670 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 14:30:48.672 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 14:30:48.789 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 14:30:48.877 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 14:30:49.134 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 14:30:49.135 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 14:30:49.226 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 14:30:49.228 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 14:30:49.229 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 14:30:49.241 +07:00 [DBG] Execution loop BackgroundServerProcess:ce3b2bdc has started in 6.814 ms
2025-07-10 14:30:49.250 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 14:30:49.256 +07:00 [INF] Hosting environment: Development
2025-07-10 14:30:49.258 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 14:30:49.268 +07:00 [INF] Server digi-tbhh2:31360:be12f4f8 successfully announced in 17.7409 ms
2025-07-10 14:30:49.276 +07:00 [DBG] Execution loop ServerHeartbeatProcess:d17d726f has started in 6.0068 ms
2025-07-10 14:30:49.276 +07:00 [INF] Server digi-tbhh2:31360:be12f4f8 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 14:30:49.282 +07:00 [DBG] Execution loop ServerWatchdog:d27761c2 has started in 4.6657 ms
2025-07-10 14:30:49.290 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:eab264ee has started in 11.2972 ms
2025-07-10 14:30:49.292 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:0eba94c4 has started in 9.6336 ms
2025-07-10 14:30:49.296 +07:00 [DBG] Execution loop ExpirationManager:97b30e81 has started in 8.1616 ms
2025-07-10 14:30:49.311 +07:00 [INF] 1 servers were removed due to timeout
2025-07-10 14:30:49.320 +07:00 [DBG] Execution loop Worker:c9ac8a31 has started in 24.4023 ms
2025-07-10 14:30:49.314 +07:00 [DBG] Execution loop Worker:1353c204 has started in 18.5927 ms
2025-07-10 14:30:49.305 +07:00 [DBG] Execution loop Worker:7e4645f7 has started in 9.7614 ms
2025-07-10 14:30:49.330 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 14:30:49.299 +07:00 [DBG] Execution loop CountersAggregator:a5597ec0 has started in 6.6647 ms
2025-07-10 14:30:49.307 +07:00 [DBG] Execution loop Worker:9cb0cfd0 has started in 11.7743 ms
2025-07-10 14:30:49.311 +07:00 [DBG] Execution loop Worker:9928c20d has started in 15.403 ms
2025-07-10 14:30:49.357 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 14:30:49.326 +07:00 [DBG] Execution loop Worker:40b4b50d has started in 30.0083 ms
2025-07-10 14:30:49.369 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 14:30:49.328 +07:00 [DBG] Execution loop Worker:ab0a4f0e has started in 32.6898 ms
2025-07-10 14:30:49.333 +07:00 [DBG] Execution loop Worker:b828ce4f has started in 37.657 ms
2025-07-10 14:30:49.383 +07:00 [INF] Server digi-tbhh2:31360:be12f4f8 all the dispatchers started
2025-07-10 14:30:49.337 +07:00 [DBG] Execution loop Worker:9f85feaa has started in 41.5164 ms
2025-07-10 14:30:49.341 +07:00 [DBG] Execution loop Worker:575881ba has started in 45.4232 ms
2025-07-10 14:30:49.347 +07:00 [DBG] Execution loop Worker:bfab99de has started in 51.2858 ms
2025-07-10 14:30:49.349 +07:00 [DBG] Execution loop Worker:abdfe224 has started in 53.7816 ms
2025-07-10 14:30:49.353 +07:00 [DBG] Execution loop Worker:f3f20823 has started in 57.3498 ms
2025-07-10 14:30:49.356 +07:00 [DBG] Execution loop Worker:6aa41785 has started in 60.5497 ms
2025-07-10 14:30:49.359 +07:00 [DBG] Execution loop Worker:8ac4ed8c has started in 63.7618 ms
2025-07-10 14:30:49.365 +07:00 [DBG] Execution loop Worker:f6941c60 has started in 69.8806 ms
2025-07-10 14:30:49.368 +07:00 [DBG] Execution loop Worker:3c87d692 has started in 72.4444 ms
2025-07-10 14:30:49.396 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 14:30:49.372 +07:00 [DBG] Execution loop Worker:04538e3b has started in 76.1527 ms
2025-07-10 14:30:49.375 +07:00 [DBG] Execution loop Worker:727a9acd has started in 79.8167 ms
2025-07-10 14:30:49.379 +07:00 [DBG] Execution loop Worker:4b79e004 has started in 83.635 ms
2025-07-10 14:30:49.383 +07:00 [DBG] Execution loop DelayedJobScheduler:4414b47a has started in 7.3342 ms
2025-07-10 14:30:49.387 +07:00 [DBG] Execution loop RecurringJobScheduler:e8510a94 has started in 7.6728 ms
2025-07-10 14:30:49.403 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 14:30:49.407 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 14:30:49.706 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 14:30:49.706 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 14:30:49.743 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 45.927ms
2025-07-10 14:30:49.784 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 87.9282ms
2025-07-10 14:30:49.816 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 14:30:49.851 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 34.6771ms
2025-07-10 14:30:56.759 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------854621672232690717074726 16442
2025-07-10 14:30:56.776 +07:00 [INF] Request from IP: ::1
2025-07-10 14:30:56.780 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 14:30:56.797 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 14:30:56.909 +07:00 [INF] [CreateContract] Content-Type: multipart/form-data; boundary=--------------------------854621672232690717074726
2025-07-10 14:30:56.914 +07:00 [INF] [CreateContract] Headers: {"Accept":"*/*","Connection":"keep-alive","Host":"localhost:7024","User-Agent":"PostmanRuntime/7.44.1","Accept-Encoding":"gzip, deflate, br","Content-Type":"multipart/form-data; boundary=--------------------------854621672232690717074726","Content-Length":"16442","Postman-Token":"b578f049-6883-4724-ba14-ff0f52e388a5"}
2025-07-10 14:30:56.915 +07:00 [INF] [CreateContract] ModelState.IsValid: True
2025-07-10 14:30:56.935 +07:00 [INF] [CreateContract] AllAttachments count: 1, names: Work.docx
2025-07-10 14:30:57.129 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:30:57.167 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:30:57.295 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = -1), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 14:30:57.366 +07:00 [INF] Enqueued job for RequestId: a4010732-ffc8-48eb-945f-6a09ed6c4df6
2025-07-10 14:30:57.379 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 14:30:57.395 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 593.7426ms
2025-07-10 14:30:57.398 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 14:30:57.406 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 647.7529ms
2025-07-10 14:30:57.520 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 14:30:57.534 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 14:30:57.538 +07:00 [INF] Processing job for RequestId: a4010732-ffc8-48eb-945f-6a09ed6c4df6
2025-07-10 14:30:57.538 +07:00 [INF] Tng s file upload: 0
2025-07-10 14:30:57.540 +07:00 [INF] ang x l LoanNo: thinh21, attachmentFileName: Work.docx
2025-07-10 14:30:57.540 +07:00 [WRN] Khng tm thy file trng tn: Work.docx trong danh sch upload.
2025-07-10 14:30:57.543 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:30:57.552 +07:00 [INF] Searching for file: Work.docx
2025-07-10 14:30:57.553 +07:00 [INF] No file matched for LoanNo: thinh21
2025-07-10 14:30:57.726 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = -1) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 14:30:57.731 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 14:30:57.733 +07:00 [INF] Job for RequestId: a4010732-ffc8-48eb-945f-6a09ed6c4df6 completed successfully.
2025-07-10 14:31:19.292 +07:00 [DBG] Server digi-tbhh2:31360:be12f4f8 heartbeat successfully sent
2025-07-10 14:31:49.304 +07:00 [DBG] Server digi-tbhh2:31360:be12f4f8 heartbeat successfully sent
2025-07-10 14:32:19.308 +07:00 [DBG] Server digi-tbhh2:31360:be12f4f8 heartbeat successfully sent
2025-07-10 14:32:49.326 +07:00 [DBG] Server digi-tbhh2:31360:be12f4f8 heartbeat successfully sent
2025-07-10 14:33:19.337 +07:00 [DBG] Server digi-tbhh2:31360:be12f4f8 heartbeat successfully sent
2025-07-10 14:33:49.348 +07:00 [DBG] Server digi-tbhh2:31360:be12f4f8 heartbeat successfully sent
2025-07-10 14:34:19.359 +07:00 [DBG] Server digi-tbhh2:31360:be12f4f8 heartbeat successfully sent
2025-07-10 14:34:49.376 +07:00 [DBG] Server digi-tbhh2:31360:be12f4f8 heartbeat successfully sent
2025-07-10 14:35:28.197 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 14:35:28.233 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 14:35:28.245 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 14:35:28.290 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 14:35:28.298 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 14:35:28.300 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 14:35:28.303 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 14:35:28.309 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 14:35:28.310 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 14:35:28.426 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 14:35:28.509 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 14:35:28.776 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 14:35:28.777 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 14:35:28.874 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 14:35:28.875 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 14:35:28.876 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 14:35:28.889 +07:00 [DBG] Execution loop BackgroundServerProcess:13c9a4a7 has started in 5.4624 ms
2025-07-10 14:35:28.896 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 14:35:28.898 +07:00 [INF] Hosting environment: Development
2025-07-10 14:35:28.898 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 14:35:28.907 +07:00 [INF] Server digi-tbhh2:16556:3a8c6a39 successfully announced in 10.5749 ms
2025-07-10 14:35:28.939 +07:00 [DBG] Execution loop ServerHeartbeatProcess:d23f8269 has started in 30.4851 ms
2025-07-10 14:35:28.940 +07:00 [INF] Server digi-tbhh2:16556:3a8c6a39 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 14:35:28.944 +07:00 [DBG] Execution loop ServerWatchdog:91e9fd70 has started in 2.7921 ms
2025-07-10 14:35:28.947 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:3cb1d101 has started in 5.3764 ms
2025-07-10 14:35:28.948 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:f8b49b5d has started in 4.4305 ms
2025-07-10 14:35:28.952 +07:00 [DBG] Execution loop ExpirationManager:3b3d18e2 has started in 4.5843 ms
2025-07-10 14:35:28.953 +07:00 [DBG] Execution loop CountersAggregator:9a1d60c2 has started in 4.9448 ms
2025-07-10 14:35:28.986 +07:00 [DBG] Execution loop Worker:8f361b47 has started in 35.1152 ms
2025-07-10 14:35:28.986 +07:00 [DBG] Execution loop Worker:82c51abd has started in 35.1154 ms
2025-07-10 14:35:28.996 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 14:35:28.993 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 14:35:28.991 +07:00 [DBG] Execution loop Worker:dd017099 has started in 39.4682 ms
2025-07-10 14:35:28.992 +07:00 [DBG] Execution loop Worker:c7490d81 has started in 41.2451 ms
2025-07-10 14:35:29.007 +07:00 [INF] 1 servers were removed due to timeout
2025-07-10 14:35:29.018 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 14:35:28.995 +07:00 [DBG] Execution loop Worker:6e582967 has started in 43.7881 ms
2025-07-10 14:35:28.997 +07:00 [DBG] Execution loop Worker:f4b2ca17 has started in 46.1561 ms
2025-07-10 14:35:29.000 +07:00 [DBG] Execution loop Worker:8ce1d1b7 has started in 48.9866 ms
2025-07-10 14:35:29.003 +07:00 [DBG] Execution loop Worker:14fa7e5c has started in 51.7919 ms
2025-07-10 14:35:29.006 +07:00 [DBG] Execution loop Worker:2cb1c580 has started in 55.278 ms
2025-07-10 14:35:29.008 +07:00 [DBG] Execution loop Worker:77ac95eb has started in 57.1305 ms
2025-07-10 14:35:29.012 +07:00 [DBG] Execution loop Worker:86ba6c5a has started in 60.6798 ms
2025-07-10 14:35:29.015 +07:00 [DBG] Execution loop Worker:b803f2f7 has started in 63.8186 ms
2025-07-10 14:35:29.038 +07:00 [INF] Server digi-tbhh2:16556:3a8c6a39 all the dispatchers started
2025-07-10 14:35:29.017 +07:00 [DBG] Execution loop Worker:54ed5e4a has started in 65.7722 ms
2025-07-10 14:35:29.019 +07:00 [DBG] Execution loop Worker:452ad249 has started in 68.3205 ms
2025-07-10 14:35:29.022 +07:00 [DBG] Execution loop Worker:1d6d6d40 has started in 70.8943 ms
2025-07-10 14:35:29.025 +07:00 [DBG] Execution loop Worker:929fb211 has started in 73.5342 ms
2025-07-10 14:35:29.027 +07:00 [DBG] Execution loop Worker:81b3f9bb has started in 76.1472 ms
2025-07-10 14:35:29.031 +07:00 [DBG] Execution loop Worker:51912ab4 has started in 79.765 ms
2025-07-10 14:35:29.033 +07:00 [DBG] Execution loop Worker:9678fa07 has started in 81.6062 ms
2025-07-10 14:35:29.045 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 14:35:29.035 +07:00 [DBG] Execution loop Worker:8de8feff has started in 84.1443 ms
2025-07-10 14:35:29.038 +07:00 [DBG] Execution loop DelayedJobScheduler:32e7ead5 has started in 5.1846 ms
2025-07-10 14:35:29.040 +07:00 [DBG] Execution loop RecurringJobScheduler:7795e429 has started in 5.2568 ms
2025-07-10 14:35:29.055 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 14:35:29.072 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 14:35:29.215 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 14:35:29.215 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 14:35:29.243 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 33.629ms
2025-07-10 14:35:29.274 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.4255ms
2025-07-10 14:35:29.301 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 14:35:29.336 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 34.0047ms
2025-07-10 14:35:54.590 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - multipart/form-data; boundary=--------------------------440035571246938893509737 16442
2025-07-10 14:35:54.609 +07:00 [INF] Request from IP: ::1
2025-07-10 14:35:54.612 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 14:35:54.631 +07:00 [INF] Route matched with {action = "CreateContract", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateContract(pviBase.Dtos.CreateContractFormDto) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 14:35:54.738 +07:00 [INF] [CreateContract] Content-Type: multipart/form-data; boundary=--------------------------440035571246938893509737
2025-07-10 14:35:54.743 +07:00 [INF] [CreateContract] Headers: {"Accept":"*/*","Connection":"keep-alive","Host":"localhost:7024","User-Agent":"PostmanRuntime/7.44.1","Accept-Encoding":"gzip, deflate, br","Content-Type":"multipart/form-data; boundary=--------------------------440035571246938893509737","Content-Length":"16442","Postman-Token":"105e73be-94c6-4f48-b650-6b22e7a74eee"}
2025-07-10 14:35:54.744 +07:00 [INF] [CreateContract] ModelState.IsValid: True
2025-07-10 14:35:54.767 +07:00 [INF] [CreateContract] AllAttachments count: 1, names: Work.docx
2025-07-10 14:35:54.955 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:35:54.992 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:35:55.113 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (DbType = DateTime2), @p3='?' (Size = -1), @p4='?' (Size = 50), @p5='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RequestLogs] ([CreatedAt], [ErrorMessage], [LastUpdatedAt], [RequestData], [RequestId], [Status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-07-10 14:35:55.188 +07:00 [INF] Enqueued job for RequestId: 64fc5413-6508-48ec-941b-20a959e13eec
2025-07-10 14:35:55.203 +07:00 [INF] Executing AcceptedResult, writing value of type 'pviBase.Dtos.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-10 14:35:55.223 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.CreateContract (pviBase) in 587.5574ms
2025-07-10 14:35:55.225 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.CreateContract (pviBase)'
2025-07-10 14:35:55.236 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7024/api/v1/HubContract/MAFC_SKNVV_CreateContract - 202 99 application/json 646.6642ms
2025-07-10 14:35:55.346 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__requestId_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[ErrorMessage], [r].[LastUpdatedAt], [r].[RequestData], [r].[RequestId], [r].[Status]
FROM [RequestLogs] AS [r]
WHERE [r].[RequestId] = @__requestId_0
2025-07-10 14:35:55.365 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 14:35:55.369 +07:00 [INF] Processing job for RequestId: 64fc5413-6508-48ec-941b-20a959e13eec
2025-07-10 14:35:55.370 +07:00 [INF] Tng s file upload: 0
2025-07-10 14:35:55.371 +07:00 [INF] ang x l LoanNo: thinh22, attachmentFileName: Work.docx
2025-07-10 14:35:55.373 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InsuranceContracts] AS [i]
        WHERE [i].[LoanNo] = @__loanNo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-10 14:35:55.382 +07:00 [INF] Stored file 'Work.docx' for LoanNo: thinh22
2025-07-10 14:35:55.557 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = -1) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1), @p8='?' (Size = 12), @p9='?' (Size = 200), @p10='?' (Size = 10), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Double), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InsuranceContracts] ([AttachmentContentType], [AttachmentData], [AttachmentFileName], [CreatedAt], [CustAddress], [CustBirthday], [CustEmail], [CustGender], [CustIdNo], [CustName], [CustPhone], [DisbursementDate], [InsRate], [LoanAmount], [LoanDate], [LoanNo], [LoanTerm], [LoanType], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-07-10 14:35:55.562 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RequestLogs] SET [LastUpdatedAt] = @p0, [Status] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-10 14:35:55.563 +07:00 [INF] Job for RequestId: 64fc5413-6508-48ec-941b-20a959e13eec completed successfully.
2025-07-10 14:35:58.955 +07:00 [DBG] Server digi-tbhh2:16556:3a8c6a39 heartbeat successfully sent
2025-07-10 14:36:28.972 +07:00 [DBG] Server digi-tbhh2:16556:3a8c6a39 heartbeat successfully sent
2025-07-10 14:36:58.983 +07:00 [DBG] Server digi-tbhh2:16556:3a8c6a39 heartbeat successfully sent
2025-07-10 14:37:28.997 +07:00 [DBG] Server digi-tbhh2:16556:3a8c6a39 heartbeat successfully sent
2025-07-10 14:37:59.009 +07:00 [DBG] Server digi-tbhh2:16556:3a8c6a39 heartbeat successfully sent
2025-07-10 14:38:38.243 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 14:38:38.289 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 14:38:38.302 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 14:38:38.349 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 14:38:38.356 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 14:38:38.358 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 14:38:38.361 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 14:38:38.367 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 14:38:38.369 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 14:38:38.490 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 14:38:38.613 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 14:38:38.867 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 14:38:38.868 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 14:38:38.953 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 14:38:38.954 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 14:38:38.955 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 14:38:38.966 +07:00 [DBG] Execution loop BackgroundServerProcess:3f76e74f has started in 5.1127 ms
2025-07-10 14:38:38.972 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 14:38:38.973 +07:00 [INF] Hosting environment: Development
2025-07-10 14:38:38.974 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 14:38:38.981 +07:00 [INF] Server digi-tbhh2:32336:5986a740 successfully announced in 8.0791 ms
2025-07-10 14:38:38.986 +07:00 [DBG] Execution loop ServerHeartbeatProcess:49e8f805 has started in 3.3596 ms
2025-07-10 14:38:38.986 +07:00 [INF] Server digi-tbhh2:32336:5986a740 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 14:38:38.990 +07:00 [DBG] Execution loop ServerWatchdog:8e350043 has started in 2.4939 ms
2025-07-10 14:38:38.992 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:50445e46 has started in 4.3657 ms
2025-07-10 14:38:38.994 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:e1f22c7c has started in 4.4478 ms
2025-07-10 14:38:38.997 +07:00 [DBG] Execution loop ExpirationManager:747e1fdb has started in 4.6384 ms
2025-07-10 14:38:38.999 +07:00 [DBG] Execution loop CountersAggregator:d3153440 has started in 4.6288 ms
2025-07-10 14:38:39.002 +07:00 [DBG] Execution loop Worker:7f93e463 has started in 4.915 ms
2025-07-10 14:38:39.004 +07:00 [DBG] Execution loop Worker:b80aaec2 has started in 7.2755 ms
2025-07-10 14:38:39.013 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 14:38:39.013 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 14:38:39.008 +07:00 [DBG] Execution loop Worker:2ebd4513 has started in 11.0637 ms
2025-07-10 14:38:39.009 +07:00 [DBG] Execution loop Worker:8e3f216e has started in 12.6441 ms
2025-07-10 14:38:39.012 +07:00 [DBG] Execution loop Worker:2da07f6d has started in 15.6069 ms
2025-07-10 14:38:39.015 +07:00 [DBG] Execution loop Worker:1e7667ea has started in 17.973 ms
2025-07-10 14:38:39.036 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 14:38:39.017 +07:00 [DBG] Execution loop Worker:20341eb2 has started in 20.3097 ms
2025-07-10 14:38:39.021 +07:00 [DBG] Execution loop Worker:2d73ec80 has started in 24.1129 ms
2025-07-10 14:38:39.022 +07:00 [DBG] Execution loop Worker:ee16d733 has started in 25.4608 ms
2025-07-10 14:38:39.025 +07:00 [DBG] Execution loop Worker:89aba1fb has started in 28.1438 ms
2025-07-10 14:38:39.028 +07:00 [DBG] Execution loop Worker:0d0dc147 has started in 31.3833 ms
2025-07-10 14:38:39.057 +07:00 [INF] Server digi-tbhh2:32336:5986a740 all the dispatchers started
2025-07-10 14:38:39.052 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 14:38:39.031 +07:00 [DBG] Execution loop Worker:26d77bb9 has started in 34.2306 ms
2025-07-10 14:38:39.034 +07:00 [DBG] Execution loop Worker:5f0382bb has started in 36.8208 ms
2025-07-10 14:38:39.036 +07:00 [DBG] Execution loop Worker:bb44a4b0 has started in 39.4484 ms
2025-07-10 14:38:39.064 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 14:38:39.039 +07:00 [DBG] Execution loop Worker:d455cbad has started in 42.1692 ms
2025-07-10 14:38:39.042 +07:00 [DBG] Execution loop Worker:d47200c1 has started in 45.2804 ms
2025-07-10 14:38:39.045 +07:00 [DBG] Execution loop Worker:f9915b41 has started in 48.6494 ms
2025-07-10 14:38:39.070 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 14:38:39.048 +07:00 [DBG] Execution loop Worker:c309eba6 has started in 51.5908 ms
2025-07-10 14:38:39.052 +07:00 [DBG] Execution loop Worker:a3c12374 has started in 55.4009 ms
2025-07-10 14:38:39.055 +07:00 [DBG] Execution loop Worker:d7400efd has started in 58.2482 ms
2025-07-10 14:38:39.057 +07:00 [DBG] Execution loop DelayedJobScheduler:3c2e0ff5 has started in 6.2027 ms
2025-07-10 14:38:39.060 +07:00 [DBG] Execution loop RecurringJobScheduler:70b3d166 has started in 6.1988 ms
2025-07-10 14:38:39.615 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 14:38:39.615 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 14:38:39.647 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 36.1721ms
2025-07-10 14:38:39.684 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 74.964ms
2025-07-10 14:38:39.710 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 14:38:39.740 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 30.3206ms
2025-07-10 14:38:58.463 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/api/v1/HubContract/download-attachment/thinh22 - null null
2025-07-10 14:38:58.483 +07:00 [INF] Request from IP: ::1
2025-07-10 14:38:58.487 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.DownloadAttachment (pviBase)'
2025-07-10 14:38:58.504 +07:00 [INF] Route matched with {action = "DownloadAttachment", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadAttachment(System.String) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 14:38:58.732 +07:00 [INF] Cache miss for LoanNo: thinh22, fetching from DB.
2025-07-10 14:38:58.922 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[AttachmentContentType], [i].[AttachmentData], [i].[AttachmentFileName], [i].[CreatedAt], [i].[CustAddress], [i].[CustBirthday], [i].[CustEmail], [i].[CustGender], [i].[CustIdNo], [i].[CustName], [i].[CustPhone], [i].[DisbursementDate], [i].[InsRate], [i].[LoanAmount], [i].[LoanDate], [i].[LoanNo], [i].[LoanTerm], [i].[LoanType], [i].[UpdatedAt]
FROM [InsuranceContracts] AS [i]
WHERE [i].[LoanNo] = @__loanNo_0
2025-07-10 14:38:58.993 +07:00 [INF] Cached contract for LoanNo: thinh22
2025-07-10 14:38:58.998 +07:00 [INF] Executing FileContentResult, sending file with download name 'Work.docx' ...
2025-07-10 14:38:59.006 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.DownloadAttachment (pviBase) in 496.9491ms
2025-07-10 14:38:59.008 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.DownloadAttachment (pviBase)'
2025-07-10 14:38:59.147 +07:00 [ERR] An unhandled exception has occurred.
System.Text.Json.JsonReaderException: 'P' is an invalid start of a value. LineNumber: 0 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.ConsumeValue(Byte marker)
   at System.Text.Json.Utf8JsonReader.ReadFirstToken(Byte first)
   at System.Text.Json.Utf8JsonReader.ReadSingleSegment()
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.JsonDocument.Parse(ReadOnlySpan`1 utf8JsonSpan, JsonReaderOptions readerOptions, MetadataDb& database, StackRowStack& stack)
   at System.Text.Json.JsonDocument.Parse(ReadOnlyMemory`1 utf8Json, JsonReaderOptions readerOptions, Byte[] extraRentedArrayPoolBytes, PooledByteBufferWriter extraPooledByteBufferWriter)
   at System.Text.Json.JsonDocument.Parse(ReadOnlyMemory`1 json, JsonDocumentOptions options)
   at System.Text.Json.JsonDocument.Parse(String json, JsonDocumentOptions options)
   at pviBase.Middlewares.ResponseWrappingMiddleware.InvokeAsync(HttpContext context) in C:\Users\ADMIN\source\repos\pviBase\Middlewares\ResponseWrappingMiddleware.cs:line 66
   at pviBase.Middlewares.IpWhitelistMiddleware.InvokeAsync(HttpContext context) in C:\Users\ADMIN\source\repos\pviBase\Middlewares\IpWhitelistMiddleware.cs:line 38
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at pviBase.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\ADMIN\source\repos\pviBase\Middlewares\ExceptionHandlingMiddleware.cs:line 28
2025-07-10 14:38:59.245 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, ReadOnlyMemory`1 data, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.GetTaskForValueTaskSource(IValueTaskSource`1 t)
--- End of stack trace from previous location ---
   at pviBase.Middlewares.ExceptionHandlingMiddleware.HandleExceptionAsync(HttpContext context, Exception exception) in C:\Users\ADMIN\source\repos\pviBase\Middlewares\ExceptionHandlingMiddleware.cs:line 60
   at pviBase.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\ADMIN\source\repos\pviBase\Middlewares\ExceptionHandlingMiddleware.cs:line 33
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-10 14:38:59.252 +07:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, ReadOnlyMemory`1 data, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.GetTaskForValueTaskSource(IValueTaskSource`1 t)
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.DisplayExceptionContent(ErrorContext errorContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-10 14:38:59.256 +07:00 [ERR] Connection id "0HNDVGJ4MPJT5", Request id "0HNDVGJ4MPJT5:00000007": An unhandled exception was thrown by the application.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, ReadOnlyMemory`1 data, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.GetTaskForValueTaskSource(IValueTaskSource`1 t)
--- End of stack trace from previous location ---
   at pviBase.Middlewares.ExceptionHandlingMiddleware.HandleExceptionAsync(HttpContext context, Exception exception) in C:\Users\ADMIN\source\repos\pviBase\Middlewares\ExceptionHandlingMiddleware.cs:line 60
   at pviBase.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\ADMIN\source\repos\pviBase\Middlewares\ExceptionHandlingMiddleware.cs:line 33
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-07-10 14:38:59.275 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/api/v1/HubContract/download-attachment/thinh22 - 500 0 null 811.9554ms
2025-07-10 14:39:09.012 +07:00 [DBG] Server digi-tbhh2:32336:5986a740 heartbeat successfully sent
2025-07-10 14:39:39.020 +07:00 [DBG] Server digi-tbhh2:32336:5986a740 heartbeat successfully sent
2025-07-10 14:40:09.039 +07:00 [DBG] Server digi-tbhh2:32336:5986a740 heartbeat successfully sent
2025-07-10 14:53:57.063 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 14:53:57.097 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-10 14:53:57.108 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-10 14:53:57.157 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-10 14:53:57.164 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-10 14:53:57.165 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-10 14:53:57.169 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-10 14:53:57.174 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-07-10 14:53:57.175 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-10 14:53:57.392 +07:00 [INF] Start installing Hangfire SQL objects...
2025-07-10 14:53:57.484 +07:00 [INF] Hangfire SQL objects installed.
2025-07-10 14:53:57.779 +07:00 [INF] Now listening on: https://localhost:7024
2025-07-10 14:53:57.780 +07:00 [INF] Now listening on: http://localhost:5017
2025-07-10 14:53:57.851 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@InsuranceHubDb'
2025-07-10 14:53:57.852 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-07-10 14:53:57.853 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-10 14:53:57.864 +07:00 [DBG] Execution loop BackgroundServerProcess:015f4203 has started in 5.8211 ms
2025-07-10 14:53:57.872 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-10 14:53:57.873 +07:00 [INF] Hosting environment: Development
2025-07-10 14:53:57.873 +07:00 [INF] Content root path: C:\Users\ADMIN\source\repos\pviBase
2025-07-10 14:53:57.880 +07:00 [INF] Server digi-tbhh2:12328:9b38a6a2 successfully announced in 9.2033 ms
2025-07-10 14:53:57.885 +07:00 [DBG] Execution loop ServerHeartbeatProcess:2663e03c has started in 3.1841 ms
2025-07-10 14:53:57.885 +07:00 [INF] Server digi-tbhh2:12328:9b38a6a2 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, SqlServerHeartbeatProcess, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-10 14:53:57.890 +07:00 [DBG] Execution loop ServerWatchdog:2698a054 has started in 2.9945 ms
2025-07-10 14:53:57.892 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:e8337d8b has started in 4.765 ms
2025-07-10 14:53:57.896 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:59645344 has started in 5.8801 ms
2025-07-10 14:53:57.897 +07:00 [DBG] Execution loop ExpirationManager:e221fd3e has started in 5.123 ms
2025-07-10 14:53:57.900 +07:00 [DBG] Execution loop CountersAggregator:97dbee86 has started in 4.8797 ms
2025-07-10 14:53:57.910 +07:00 [INF] 3 servers were removed due to timeout
2025-07-10 14:53:57.905 +07:00 [DBG] Execution loop Worker:96f9018f has started in 7.2159 ms
2025-07-10 14:53:57.916 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table...
2025-07-10 14:53:57.916 +07:00 [DBG] Aggregating records in 'Counter' table...
2025-07-10 14:53:57.906 +07:00 [DBG] Execution loop Worker:b54b640b has started in 8.8446 ms
2025-07-10 14:53:57.909 +07:00 [DBG] Execution loop Worker:791ada0f has started in 11.8093 ms
2025-07-10 14:53:57.913 +07:00 [DBG] Execution loop Worker:ddef7dc0 has started in 15.8701 ms
2025-07-10 14:53:57.916 +07:00 [DBG] Execution loop Worker:333a7872 has started in 18.1227 ms
2025-07-10 14:53:57.919 +07:00 [DBG] Execution loop Worker:3f33618c has started in 21.4536 ms
2025-07-10 14:53:57.921 +07:00 [DBG] Execution loop Worker:1104395f has started in 23.085 ms
2025-07-10 14:53:57.953 +07:00 [DBG] Execution loop Worker:d33ed823 has started in 55.0418 ms
2025-07-10 14:53:57.942 +07:00 [DBG] Removing outdated records from the 'Job' table...
2025-07-10 14:53:57.923 +07:00 [DBG] Execution loop Worker:01b0de34 has started in 25.8273 ms
2025-07-10 14:53:57.961 +07:00 [INF] Server digi-tbhh2:12328:9b38a6a2 all the dispatchers started
2025-07-10 14:53:57.927 +07:00 [DBG] Execution loop Worker:e8b8ce6e has started in 29.2978 ms
2025-07-10 14:53:57.929 +07:00 [DBG] Execution loop Worker:275b8b5e has started in 32.0772 ms
2025-07-10 14:53:57.933 +07:00 [DBG] Execution loop Worker:8d42eade has started in 35.8399 ms
2025-07-10 14:53:57.935 +07:00 [DBG] Execution loop Worker:80d7c63a has started in 37.802 ms
2025-07-10 14:53:57.938 +07:00 [DBG] Execution loop Worker:ef744869 has started in 40.8686 ms
2025-07-10 14:53:57.942 +07:00 [DBG] Execution loop Worker:8a4e9711 has started in 44.6662 ms
2025-07-10 14:53:57.944 +07:00 [DBG] Execution loop Worker:884dfb03 has started in 46.4899 ms
2025-07-10 14:53:57.947 +07:00 [DBG] Execution loop Worker:704d2049 has started in 49.2471 ms
2025-07-10 14:53:57.950 +07:00 [DBG] Execution loop Worker:5972d80e has started in 52.8359 ms
2025-07-10 14:53:57.973 +07:00 [DBG] Removing outdated records from the 'List' table...
2025-07-10 14:53:57.955 +07:00 [DBG] Execution loop Worker:1dbbfb57 has started in 58.0291 ms
2025-07-10 14:53:57.958 +07:00 [DBG] Execution loop Worker:c780908b has started in 60.8595 ms
2025-07-10 14:53:57.961 +07:00 [DBG] Execution loop DelayedJobScheduler:5ebbb117 has started in 5.4924 ms
2025-07-10 14:53:57.964 +07:00 [DBG] Execution loop RecurringJobScheduler:66955e99 has started in 5.3197 ms
2025-07-10 14:53:57.977 +07:00 [DBG] Removing outdated records from the 'Set' table...
2025-07-10 14:53:57.980 +07:00 [DBG] Removing outdated records from the 'Hash' table...
2025-07-10 14:53:58.403 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_vs/browserLink - null null
2025-07-10 14:53:58.403 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - null null
2025-07-10 14:53:58.440 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 42.7517ms
2025-07-10 14:53:58.493 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/_vs/browserLink - 200 null text/javascript; charset=UTF-8 96.4761ms
2025-07-10 14:53:58.527 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - null null
2025-07-10 14:53:58.559 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.5093ms
2025-07-10 14:54:07.031 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7024/api/v1/HubContract/download-attachment/thinh22 - null null
2025-07-10 14:54:07.053 +07:00 [INF] Request from IP: ::1
2025-07-10 14:54:07.057 +07:00 [INF] Executing endpoint 'pviBase.Controllers.HubContractController.DownloadAttachment (pviBase)'
2025-07-10 14:54:07.078 +07:00 [INF] Route matched with {action = "DownloadAttachment", controller = "HubContract"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadAttachment(System.String) on controller pviBase.Controllers.HubContractController (pviBase).
2025-07-10 14:54:07.427 +07:00 [INF] Cache miss for LoanNo: thinh22, fetching from DB.
2025-07-10 14:54:07.650 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__loanNo_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[AttachmentContentType], [i].[AttachmentData], [i].[AttachmentFileName], [i].[CreatedAt], [i].[CustAddress], [i].[CustBirthday], [i].[CustEmail], [i].[CustGender], [i].[CustIdNo], [i].[CustName], [i].[CustPhone], [i].[DisbursementDate], [i].[InsRate], [i].[LoanAmount], [i].[LoanDate], [i].[LoanNo], [i].[LoanTerm], [i].[LoanType], [i].[UpdatedAt]
FROM [InsuranceContracts] AS [i]
WHERE [i].[LoanNo] = @__loanNo_0
2025-07-10 14:54:07.734 +07:00 [INF] Cached contract for LoanNo: thinh22
2025-07-10 14:54:07.740 +07:00 [INF] Executing FileContentResult, sending file with download name 'Work.docx' ...
2025-07-10 14:54:07.745 +07:00 [INF] Executed action pviBase.Controllers.HubContractController.DownloadAttachment (pviBase) in 664.1932ms
2025-07-10 14:54:07.746 +07:00 [INF] Executed endpoint 'pviBase.Controllers.HubContractController.DownloadAttachment (pviBase)'
2025-07-10 14:54:07.756 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7024/api/v1/HubContract/download-attachment/thinh22 - 200 15450 application/vnd.openxmlformats-officedocument.wordprocessingml.document 725.2181ms
2025-07-10 14:54:27.914 +07:00 [DBG] Server digi-tbhh2:12328:9b38a6a2 heartbeat successfully sent
